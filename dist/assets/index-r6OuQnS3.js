(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function re(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ti(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Pe(t){let e,n,i;t.length!==2?(e=re,n=(s,l)=>re(t(s),l),i=(s,l)=>t(s)-l):(e=t===re||t===Ti?t:bi,n=t,i=t);function r(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const m=u+c>>>1;n(s[m],l)<0?u=m+1:c=m}while(u<c)}return u}function a(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const m=u+c>>>1;n(s[m],l)<=0?u=m+1:c=m}while(u<c)}return u}function o(s,l,u=0,c=s.length){const m=r(s,l,u,c-1);return m>u&&i(s[m-1],l)>-i(s[m],l)?m-1:m}return{left:r,center:o,right:a}}function bi(){return 0}function Mi(t){return t===null?NaN:+t}const Si=Pe(re),Di=Si.right;Pe(Mi).center;function ki(t,e){let n,i;for(const r of t)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));return[n,i]}const Ai=Math.sqrt(50),$i=Math.sqrt(10),Ci=Math.sqrt(2);function Pn(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),a=i/Math.pow(10,r),o=a>=Ai?10:a>=$i?5:a>=Ci?2:1;let s,l,u;return r<0?(u=Math.pow(10,-r)/o,s=Math.round(t*u),l=Math.round(e*u),s/u<t&&++s,l/u>e&&--l,u=-u):(u=Math.pow(10,r)*o,s=Math.round(t/u),l=Math.round(e/u),s*u<t&&++s,l*u>e&&--l),l<s&&.5<=n&&n<2?Pn(t,e,n*2):[s,l,u]}function an(t,e,n){return e=+e,t=+t,n=+n,Pn(t,e,n)[2]}function sn(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?an(e,t,n):an(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function zi(t){return t}var Li=3,un=1e-6;function Ei(t){return"translate("+t+",0)"}function Ni(t){return e=>+t(e)}function Ii(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Ui(){return!this.__axis}function Yi(t,e){var n=[],i=null,r=null,a=6,o=6,s=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=1,c="y",m=Ei;function h(g){var T=i??(e.ticks?e.ticks.apply(e,n):e.domain()),M=r??(e.tickFormat?e.tickFormat.apply(e,n):zi),z=Math.max(a,0)+s,x=e.range(),H=+x[0]+l,E=+x[x.length-1]+l,I=(e.bandwidth?Ii:Ni)(e.copy(),l),R=g.selection?g.selection():g,w=R.selectAll(".domain").data([null]),A=R.selectAll(".tick").data(T,e).order(),q=A.exit(),nt=A.enter().append("g").attr("class","tick"),Q=A.select("line"),ft=A.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),A=A.merge(nt),Q=Q.merge(nt.append("line").attr("stroke","currentColor").attr(c+"2",u*a)),ft=ft.merge(nt.append("text").attr("fill","currentColor").attr(c,u*z).attr("dy","0.71em")),g!==R&&(w=w.transition(g),A=A.transition(g),Q=Q.transition(g),ft=ft.transition(g),q=q.transition(g).attr("opacity",un).attr("transform",function(K){return isFinite(K=I(K))?m(K+l):this.getAttribute("transform")}),nt.attr("opacity",un).attr("transform",function(K){var _t=this.parentNode.__axis;return m((_t&&isFinite(_t=_t(K))?_t:I(K))+l)})),q.remove(),w.attr("d",o?"M"+H+","+u*o+"V"+l+"H"+E+"V"+u*o:"M"+H+","+l+"H"+E),A.attr("opacity",1).attr("transform",function(K){return m(I(K)+l)}),Q.attr(c+"2",u*a),ft.attr(c,u*z).text(M),R.filter(Ui).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),R.each(function(){this.__axis=I})}return h.scale=function(g){return arguments.length?(e=g,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(g){return arguments.length?(n=g==null?[]:Array.from(g),h):n.slice()},h.tickValues=function(g){return arguments.length?(i=g==null?null:Array.from(g),h):i&&i.slice()},h.tickFormat=function(g){return arguments.length?(r=g,h):r},h.tickSize=function(g){return arguments.length?(a=o=+g,h):a},h.tickSizeInner=function(g){return arguments.length?(a=+g,h):a},h.tickSizeOuter=function(g){return arguments.length?(o=+g,h):o},h.tickPadding=function(g){return arguments.length?(s=+g,h):s},h.offset=function(g){return arguments.length?(l=+g,h):l},h}function ln(t){return Yi(Li,t)}var Hi={value:()=>{}};function Ge(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new oe(n)}function oe(t){this._=t}function Ri(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}oe.prototype=Ge.prototype={constructor:oe,on:function(t,e){var n=this._,i=Ri(t+"",n),r,a=-1,o=i.length;if(arguments.length<2){for(;++a<o;)if((r=(t=i[a]).type)&&(r=Fi(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(r=(t=i[a]).type)n[r]=cn(n[r],t.name,e);else if(e==null)for(r in n)n[r]=cn(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new oe(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],i=0,r=a.length;i<r;++i)a[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,a=i.length;r<a;++r)i[r].value.apply(e,n)}};function Fi(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function cn(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=Hi,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Le="http://www.w3.org/1999/xhtml";const hn={svg:"http://www.w3.org/2000/svg",xhtml:Le,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function we(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),hn.hasOwnProperty(e)?{space:hn[e],local:t}:t}function Oi(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Le&&e.documentElement.namespaceURI===Le?e.createElement(t):e.createElementNS(n,t)}}function Pi(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Gn(t){var e=we(t);return(e.local?Pi:Oi)(e)}function Gi(){}function Ve(t){return t==null?Gi:function(){return this.querySelector(t)}}function Vi(t){typeof t!="function"&&(t=Ve(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a=e[r],o=a.length,s=i[r]=new Array(o),l,u,c=0;c<o;++c)(l=a[c])&&(u=t.call(l,l.__data__,c,a))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new Z(i,this._parents)}function qi(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Bi(){return[]}function Vn(t){return t==null?Bi:function(){return this.querySelectorAll(t)}}function Xi(t){return function(){return qi(t.apply(this,arguments))}}function ji(t){typeof t=="function"?t=Xi(t):t=Vn(t);for(var e=this._groups,n=e.length,i=[],r=[],a=0;a<n;++a)for(var o=e[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&(i.push(t.call(l,l.__data__,u,o)),r.push(l));return new Z(i,r)}function qn(t){return function(){return this.matches(t)}}function Bn(t){return function(e){return e.matches(t)}}var Wi=Array.prototype.find;function Zi(t){return function(){return Wi.call(this.children,t)}}function Ji(){return this.firstElementChild}function Qi(t){return this.select(t==null?Ji:Zi(typeof t=="function"?t:Bn(t)))}var Ki=Array.prototype.filter;function tr(){return Array.from(this.children)}function er(t){return function(){return Ki.call(this.children,t)}}function nr(t){return this.selectAll(t==null?tr:er(typeof t=="function"?t:Bn(t)))}function ir(t){typeof t!="function"&&(t=qn(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a=e[r],o=a.length,s=i[r]=[],l,u=0;u<o;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&s.push(l);return new Z(i,this._parents)}function Xn(t){return new Array(t.length)}function rr(){return new Z(this._enter||this._groups.map(Xn),this._parents)}function le(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}le.prototype={constructor:le,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function or(t){return function(){return t}}function ar(t,e,n,i,r,a){for(var o=0,s,l=e.length,u=a.length;o<u;++o)(s=e[o])?(s.__data__=a[o],i[o]=s):n[o]=new le(t,a[o]);for(;o<l;++o)(s=e[o])&&(r[o]=s)}function sr(t,e,n,i,r,a,o){var s,l,u=new Map,c=e.length,m=a.length,h=new Array(c),g;for(s=0;s<c;++s)(l=e[s])&&(h[s]=g=o.call(l,l.__data__,s,e)+"",u.has(g)?r[s]=l:u.set(g,l));for(s=0;s<m;++s)g=o.call(t,a[s],s,a)+"",(l=u.get(g))?(i[s]=l,l.__data__=a[s],u.delete(g)):n[s]=new le(t,a[s]);for(s=0;s<c;++s)(l=e[s])&&u.get(h[s])===l&&(r[s]=l)}function ur(t){return t.__data__}function lr(t,e){if(!arguments.length)return Array.from(this,ur);var n=e?sr:ar,i=this._parents,r=this._groups;typeof t!="function"&&(t=or(t));for(var a=r.length,o=new Array(a),s=new Array(a),l=new Array(a),u=0;u<a;++u){var c=i[u],m=r[u],h=m.length,g=cr(t.call(c,c&&c.__data__,u,i)),T=g.length,M=s[u]=new Array(T),z=o[u]=new Array(T),x=l[u]=new Array(h);n(c,m,M,z,x,g,e);for(var H=0,E=0,I,R;H<T;++H)if(I=M[H]){for(H>=E&&(E=H+1);!(R=z[E])&&++E<T;);I._next=R||null}}return o=new Z(o,i),o._enter=s,o._exit=l,o}function cr(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function hr(){return new Z(this._exit||this._groups.map(Xn),this._parents)}function fr(t,e,n){var i=this.enter(),r=this,a=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?a.remove():n(a),i&&r?i.merge(r).order():r}function mr(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,a=i.length,o=Math.min(r,a),s=new Array(r),l=0;l<o;++l)for(var u=n[l],c=i[l],m=u.length,h=s[l]=new Array(m),g,T=0;T<m;++T)(g=u[T]||c[T])&&(h[T]=g);for(;l<r;++l)s[l]=n[l];return new Z(s,this._parents)}function gr(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,a=i[r],o;--r>=0;)(o=i[r])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function dr(t){t||(t=pr);function e(m,h){return m&&h?t(m.__data__,h.__data__):!m-!h}for(var n=this._groups,i=n.length,r=new Array(i),a=0;a<i;++a){for(var o=n[a],s=o.length,l=r[a]=new Array(s),u,c=0;c<s;++c)(u=o[c])&&(l[c]=u);l.sort(e)}return new Z(r,this._parents).order()}function pr(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function vr(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function yr(){return Array.from(this)}function wr(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,a=i.length;r<a;++r){var o=i[r];if(o)return o}return null}function _r(){let t=0;for(const e of this)++t;return t}function xr(){return!this.node()}function Tr(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],a=0,o=r.length,s;a<o;++a)(s=r[a])&&t.call(s,s.__data__,a,r);return this}function br(t){return function(){this.removeAttribute(t)}}function Mr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Sr(t,e){return function(){this.setAttribute(t,e)}}function Dr(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function kr(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Ar(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function $r(t,e){var n=we(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?Mr:br:typeof e=="function"?n.local?Ar:kr:n.local?Dr:Sr)(n,e))}function jn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Cr(t){return function(){this.style.removeProperty(t)}}function zr(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Lr(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function Er(t,e,n){return arguments.length>1?this.each((e==null?Cr:typeof e=="function"?Lr:zr)(t,e,n??"")):It(this.node(),t)}function It(t,e){return t.style.getPropertyValue(e)||jn(t).getComputedStyle(t,null).getPropertyValue(e)}function Nr(t){return function(){delete this[t]}}function Ir(t,e){return function(){this[t]=e}}function Ur(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Yr(t,e){return arguments.length>1?this.each((e==null?Nr:typeof e=="function"?Ur:Ir)(t,e)):this.node()[t]}function Wn(t){return t.trim().split(/^|\s+/)}function qe(t){return t.classList||new Zn(t)}function Zn(t){this._node=t,this._names=Wn(t.getAttribute("class")||"")}Zn.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Jn(t,e){for(var n=qe(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Qn(t,e){for(var n=qe(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function Hr(t){return function(){Jn(this,t)}}function Rr(t){return function(){Qn(this,t)}}function Fr(t,e){return function(){(e.apply(this,arguments)?Jn:Qn)(this,t)}}function Or(t,e){var n=Wn(t+"");if(arguments.length<2){for(var i=qe(this.node()),r=-1,a=n.length;++r<a;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?Fr:e?Hr:Rr)(n,e))}function Pr(){this.textContent=""}function Gr(t){return function(){this.textContent=t}}function Vr(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function qr(t){return arguments.length?this.each(t==null?Pr:(typeof t=="function"?Vr:Gr)(t)):this.node().textContent}function Br(){this.innerHTML=""}function Xr(t){return function(){this.innerHTML=t}}function jr(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Wr(t){return arguments.length?this.each(t==null?Br:(typeof t=="function"?jr:Xr)(t)):this.node().innerHTML}function Zr(){this.nextSibling&&this.parentNode.appendChild(this)}function Jr(){return this.each(Zr)}function Qr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Kr(){return this.each(Qr)}function to(t){var e=typeof t=="function"?t:Gn(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function eo(){return null}function no(t,e){var n=typeof t=="function"?t:Gn(t),i=e==null?eo:typeof e=="function"?e:Ve(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function io(){var t=this.parentNode;t&&t.removeChild(this)}function ro(){return this.each(io)}function oo(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ao(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function so(t){return this.select(t?ao:oo)}function uo(t){return arguments.length?this.property("__data__",t):this.node().__data__}function lo(t){return function(e){t.call(this,e,this.__data__)}}function co(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function ho(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,a;n<r;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++i]=a;++i?e.length=i:delete this.__on}}}function fo(t,e,n){return function(){var i=this.__on,r,a=lo(e);if(i){for(var o=0,s=i.length;o<s;++o)if((r=i[o]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),r.value=e;return}}this.addEventListener(t.type,a,n),r={type:t.type,name:t.name,value:e,listener:a,options:n},i?i.push(r):this.__on=[r]}}function mo(t,e,n){var i=co(t+""),r,a=i.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(r=0,c=s[l];r<a;++r)if((o=i[r]).type===c.type&&o.name===c.name)return c.value}return}for(s=e?fo:ho,r=0;r<a;++r)this.each(s(i[r],e,n));return this}function Kn(t,e,n){var i=jn(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function go(t,e){return function(){return Kn(this,t,e)}}function po(t,e){return function(){return Kn(this,t,e.apply(this,arguments))}}function vo(t,e){return this.each((typeof e=="function"?po:go)(t,e))}function*yo(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,a=i.length,o;r<a;++r)(o=i[r])&&(yield o)}var ti=[null];function Z(t,e){this._groups=t,this._parents=e}function Jt(){return new Z([[document.documentElement]],ti)}function wo(){return this}Z.prototype=Jt.prototype={constructor:Z,select:Vi,selectAll:ji,selectChild:Qi,selectChildren:nr,filter:ir,data:lr,enter:rr,exit:hr,join:fr,merge:mr,selection:wo,order:gr,sort:dr,call:vr,nodes:yr,node:wr,size:_r,empty:xr,each:Tr,attr:$r,style:Er,property:Yr,classed:Or,text:qr,html:Wr,raise:Jr,lower:Kr,append:to,insert:no,remove:ro,clone:so,datum:uo,on:mo,dispatch:vo,[Symbol.iterator]:yo};function at(t){return typeof t=="string"?new Z([[document.querySelector(t)]],[document.documentElement]):new Z([[t]],ti)}function _o(t){let e;for(;e=t.sourceEvent;)t=e;return t}function xt(t,e){if(t=_o(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const Ee={capture:!0,passive:!1};function Ne(t){t.preventDefault(),t.stopImmediatePropagation()}function xo(t){var e=t.document.documentElement,n=at(t).on("dragstart.drag",Ne,Ee);"onselectstart"in e?n.on("selectstart.drag",Ne,Ee):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function To(t,e){var n=t.document.documentElement,i=at(t).on("dragstart.drag",null);e&&(i.on("click.drag",Ne,Ee),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Be(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ei(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Qt(){}var jt=.7,ce=1/jt,Nt="\\s*([+-]?\\d+)\\s*",Wt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ct="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bo=/^#([0-9a-f]{3,8})$/,Mo=new RegExp(`^rgb\\(${Nt},${Nt},${Nt}\\)$`),So=new RegExp(`^rgb\\(${ct},${ct},${ct}\\)$`),Do=new RegExp(`^rgba\\(${Nt},${Nt},${Nt},${Wt}\\)$`),ko=new RegExp(`^rgba\\(${ct},${ct},${ct},${Wt}\\)$`),Ao=new RegExp(`^hsl\\(${Wt},${ct},${ct}\\)$`),$o=new RegExp(`^hsla\\(${Wt},${ct},${ct},${Wt}\\)$`),fn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Be(Qt,St,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:mn,formatHex:mn,formatHex8:Co,formatHsl:zo,formatRgb:gn,toString:gn});function mn(){return this.rgb().formatHex()}function Co(){return this.rgb().formatHex8()}function zo(){return ni(this).formatHsl()}function gn(){return this.rgb().formatRgb()}function St(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=bo.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?dn(e):n===3?new V(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?te(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?te(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Mo.exec(t))?new V(e[1],e[2],e[3],1):(e=So.exec(t))?new V(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Do.exec(t))?te(e[1],e[2],e[3],e[4]):(e=ko.exec(t))?te(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ao.exec(t))?yn(e[1],e[2]/100,e[3]/100,1):(e=$o.exec(t))?yn(e[1],e[2]/100,e[3]/100,e[4]):fn.hasOwnProperty(t)?dn(fn[t]):t==="transparent"?new V(NaN,NaN,NaN,0):null}function dn(t){return new V(t>>16&255,t>>8&255,t&255,1)}function te(t,e,n,i){return i<=0&&(t=e=n=NaN),new V(t,e,n,i)}function Lo(t){return t instanceof Qt||(t=St(t)),t?(t=t.rgb(),new V(t.r,t.g,t.b,t.opacity)):new V}function Ie(t,e,n,i){return arguments.length===1?Lo(t):new V(t,e,n,i??1)}function V(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}Be(V,Ie,ei(Qt,{brighter(t){return t=t==null?ce:Math.pow(ce,t),new V(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?jt:Math.pow(jt,t),new V(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new V(Mt(this.r),Mt(this.g),Mt(this.b),he(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pn,formatHex:pn,formatHex8:Eo,formatRgb:vn,toString:vn}));function pn(){return`#${bt(this.r)}${bt(this.g)}${bt(this.b)}`}function Eo(){return`#${bt(this.r)}${bt(this.g)}${bt(this.b)}${bt((isNaN(this.opacity)?1:this.opacity)*255)}`}function vn(){const t=he(this.opacity);return`${t===1?"rgb(":"rgba("}${Mt(this.r)}, ${Mt(this.g)}, ${Mt(this.b)}${t===1?")":`, ${t})`}`}function he(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Mt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function bt(t){return t=Mt(t),(t<16?"0":"")+t.toString(16)}function yn(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new st(t,e,n,i)}function ni(t){if(t instanceof st)return new st(t.h,t.s,t.l,t.opacity);if(t instanceof Qt||(t=St(t)),!t)return new st;if(t instanceof st)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),a=Math.max(e,n,i),o=NaN,s=a-r,l=(a+r)/2;return s?(e===a?o=(n-i)/s+(n<i)*6:n===a?o=(i-e)/s+2:o=(e-n)/s+4,s/=l<.5?a+r:2-a-r,o*=60):s=l>0&&l<1?0:o,new st(o,s,l,t.opacity)}function No(t,e,n,i){return arguments.length===1?ni(t):new st(t,e,n,i??1)}function st(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Be(st,No,ei(Qt,{brighter(t){return t=t==null?ce:Math.pow(ce,t),new st(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?jt:Math.pow(jt,t),new st(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new V(Me(t>=240?t-240:t+120,r,i),Me(t,r,i),Me(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new st(wn(this.h),ee(this.s),ee(this.l),he(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=he(this.opacity);return`${t===1?"hsl(":"hsla("}${wn(this.h)}, ${ee(this.s)*100}%, ${ee(this.l)*100}%${t===1?")":`, ${t})`}`}}));function wn(t){return t=(t||0)%360,t<0?t+360:t}function ee(t){return Math.max(0,Math.min(1,t||0))}function Me(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Xe=t=>()=>t;function Io(t,e){return function(n){return t+n*e}}function Uo(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Yo(t){return(t=+t)==1?ii:function(e,n){return n-e?Uo(e,n,t):Xe(isNaN(e)?n:e)}}function ii(t,e){var n=e-t;return n?Io(t,n):Xe(isNaN(t)?e:t)}const fe=(function t(e){var n=Yo(e);function i(r,a){var o=n((r=Ie(r)).r,(a=Ie(a)).r),s=n(r.g,a.g),l=n(r.b,a.b),u=ii(r.opacity,a.opacity);return function(c){return r.r=o(c),r.g=s(c),r.b=l(c),r.opacity=u(c),r+""}}return i.gamma=t,i})(1);function Ho(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(a){for(r=0;r<n;++r)i[r]=t[r]*(1-a)+e[r]*a;return i}}function Ro(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Fo(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),a=new Array(n),o;for(o=0;o<i;++o)r[o]=je(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<i;++o)a[o]=r[o](s);return a}}function Oo(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function ot(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Po(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=je(t[r],e[r]):i[r]=e[r];return function(a){for(r in n)i[r]=n[r](a);return i}}var Ue=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Se=new RegExp(Ue.source,"g");function Go(t){return function(){return t}}function Vo(t){return function(e){return t(e)+""}}function ri(t,e){var n=Ue.lastIndex=Se.lastIndex=0,i,r,a,o=-1,s=[],l=[];for(t=t+"",e=e+"";(i=Ue.exec(t))&&(r=Se.exec(e));)(a=r.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(i=i[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:ot(i,r)})),n=Se.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?Vo(l[0].x):Go(e):(e=l.length,function(u){for(var c=0,m;c<e;++c)s[(m=l[c]).i]=m.x(u);return s.join("")})}function je(t,e){var n=typeof e,i;return e==null||n==="boolean"?Xe(e):(n==="number"?ot:n==="string"?(i=St(e))?(e=i,fe):ri:e instanceof St?fe:e instanceof Date?Oo:Ro(e)?Ho:Array.isArray(e)?Fo:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Po:ot)(t,e)}function qo(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var _n=180/Math.PI,oi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ai(t,e,n,i,r,a){var o,s,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),t*i<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:r,translateY:a,rotate:Math.atan2(e,t)*_n,skewX:Math.atan(l)*_n,scaleX:o,scaleY:s}}var ne;function Bo(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?oi:ai(e.a,e.b,e.c,e.d,e.e,e.f)}function Xo(t){return t==null||(ne||(ne=document.createElementNS("http://www.w3.org/2000/svg","g")),ne.setAttribute("transform",t),!(t=ne.transform.baseVal.consolidate()))?oi:(t=t.matrix,ai(t.a,t.b,t.c,t.d,t.e,t.f))}function si(t,e,n,i){function r(u){return u.length?u.pop()+" ":""}function a(u,c,m,h,g,T){if(u!==m||c!==h){var M=g.push("translate(",null,e,null,n);T.push({i:M-4,x:ot(u,m)},{i:M-2,x:ot(c,h)})}else(m||h)&&g.push("translate("+m+e+h+n)}function o(u,c,m,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:m.push(r(m)+"rotate(",null,i)-2,x:ot(u,c)})):c&&m.push(r(m)+"rotate("+c+i)}function s(u,c,m,h){u!==c?h.push({i:m.push(r(m)+"skewX(",null,i)-2,x:ot(u,c)}):c&&m.push(r(m)+"skewX("+c+i)}function l(u,c,m,h,g,T){if(u!==m||c!==h){var M=g.push(r(g)+"scale(",null,",",null,")");T.push({i:M-4,x:ot(u,m)},{i:M-2,x:ot(c,h)})}else(m!==1||h!==1)&&g.push(r(g)+"scale("+m+","+h+")")}return function(u,c){var m=[],h=[];return u=t(u),c=t(c),a(u.translateX,u.translateY,c.translateX,c.translateY,m,h),o(u.rotate,c.rotate,m,h),s(u.skewX,c.skewX,m,h),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,m,h),u=c=null,function(g){for(var T=-1,M=h.length,z;++T<M;)m[(z=h[T]).i]=z.x(g);return m.join("")}}}var jo=si(Bo,"px, ","px)","deg)"),Wo=si(Xo,", ",")",")"),Zo=1e-12;function xn(t){return((t=Math.exp(t))+1/t)/2}function Jo(t){return((t=Math.exp(t))-1/t)/2}function Qo(t){return((t=Math.exp(2*t))-1)/(t+1)}const Ko=(function t(e,n,i){function r(a,o){var s=a[0],l=a[1],u=a[2],c=o[0],m=o[1],h=o[2],g=c-s,T=m-l,M=g*g+T*T,z,x;if(M<Zo)x=Math.log(h/u)/e,z=function(A){return[s+A*g,l+A*T,u*Math.exp(e*A*x)]};else{var H=Math.sqrt(M),E=(h*h-u*u+i*M)/(2*u*n*H),I=(h*h-u*u-i*M)/(2*h*n*H),R=Math.log(Math.sqrt(E*E+1)-E),w=Math.log(Math.sqrt(I*I+1)-I);x=(w-R)/e,z=function(A){var q=A*x,nt=xn(R),Q=u/(n*H)*(nt*Qo(e*q+R)-Jo(R));return[s+Q*g,l+Q*T,u*nt/xn(e*q+R)]}}return z.duration=x*1e3*e/Math.SQRT2,z}return r.rho=function(a){var o=Math.max(.001,+a),s=o*o,l=s*s;return t(o,s,l)},r})(Math.SQRT2,2,4);var Ut=0,qt=0,Rt=0,ui=1e3,me,Bt,ge=0,Dt=0,_e=0,Zt=typeof performance=="object"&&performance.now?performance:Date,li=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function We(){return Dt||(li(ta),Dt=Zt.now()+_e)}function ta(){Dt=0}function de(){this._call=this._time=this._next=null}de.prototype=ci.prototype={constructor:de,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?We():+n)+(e==null?0:+e),!this._next&&Bt!==this&&(Bt?Bt._next=this:me=this,Bt=this),this._call=t,this._time=n,Ye()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ye())}};function ci(t,e,n){var i=new de;return i.restart(t,e,n),i}function ea(){We(),++Ut;for(var t=me,e;t;)(e=Dt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ut}function Tn(){Dt=(ge=Zt.now())+_e,Ut=qt=0;try{ea()}finally{Ut=0,ia(),Dt=0}}function na(){var t=Zt.now(),e=t-ge;e>ui&&(_e-=e,ge=t)}function ia(){for(var t,e=me,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:me=n);Bt=t,Ye(i)}function Ye(t){if(!Ut){qt&&(qt=clearTimeout(qt));var e=t-Dt;e>24?(t<1/0&&(qt=setTimeout(Tn,t-Zt.now()-_e)),Rt&&(Rt=clearInterval(Rt))):(Rt||(ge=Zt.now(),Rt=setInterval(na,ui)),Ut=1,li(Tn))}}function bn(t,e,n){var i=new de;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var ra=Ge("start","end","cancel","interrupt"),oa=[],hi=0,Mn=1,He=2,ae=3,Sn=4,Re=5,se=6;function xe(t,e,n,i,r,a){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;aa(t,n,{name:e,index:i,group:r,on:ra,tween:oa,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:hi})}function Ze(t,e){var n=ut(t,e);if(n.state>hi)throw new Error("too late; already scheduled");return n}function ht(t,e){var n=ut(t,e);if(n.state>ae)throw new Error("too late; already running");return n}function ut(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function aa(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=ci(a,0,n.time);function a(u){n.state=Mn,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var c,m,h,g;if(n.state!==Mn)return l();for(c in i)if(g=i[c],g.name===n.name){if(g.state===ae)return bn(o);g.state===Sn?(g.state=se,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete i[c]):+c<e&&(g.state=se,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete i[c])}if(bn(function(){n.state===ae&&(n.state=Sn,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=He,n.on.call("start",t,t.__data__,n.index,n.group),n.state===He){for(n.state=ae,r=new Array(h=n.tween.length),c=0,m=-1;c<h;++c)(g=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++m]=g);r.length=m+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Re,1),m=-1,h=r.length;++m<h;)r[m].call(t,c);n.state===Re&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=se,n.timer.stop(),delete i[e];for(var u in i)return;delete t.__transition}}function ue(t,e){var n=t.__transition,i,r,a=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((i=n[o]).name!==e){a=!1;continue}r=i.state>He&&i.state<Re,i.state=se,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[o]}a&&delete t.__transition}}function sa(t){return this.each(function(){ue(this,t)})}function ua(t,e){var n,i;return function(){var r=ht(this,t),a=r.tween;if(a!==n){i=n=a;for(var o=0,s=i.length;o<s;++o)if(i[o].name===e){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function la(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var a=ht(this,t),o=a.tween;if(o!==i){r=(i=o).slice();for(var s={name:e,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===e){r[l]=s;break}l===u&&r.push(s)}a.tween=r}}function ca(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=ut(this.node(),n).tween,r=0,a=i.length,o;r<a;++r)if((o=i[r]).name===t)return o.value;return null}return this.each((e==null?ua:la)(n,t,e))}function Je(t,e,n){var i=t._id;return t.each(function(){var r=ht(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return ut(r,i).value[e]}}function fi(t,e){var n;return(typeof e=="number"?ot:e instanceof St?fe:(n=St(e))?(e=n,fe):ri)(t,e)}function ha(t){return function(){this.removeAttribute(t)}}function fa(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ma(t,e,n){var i,r=n+"",a;return function(){var o=this.getAttribute(t);return o===r?null:o===i?a:a=e(i=o,n)}}function ga(t,e,n){var i,r=n+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===r?null:o===i?a:a=e(i=o,n)}}function da(t,e,n){var i,r,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=s+"",o===l?null:o===i&&l===r?a:(r=l,a=e(i=o,s)))}}function pa(t,e,n){var i,r,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=s+"",o===l?null:o===i&&l===r?a:(r=l,a=e(i=o,s)))}}function va(t,e){var n=we(t),i=n==="transform"?Wo:fi;return this.attrTween(t,typeof e=="function"?(n.local?pa:da)(n,i,Je(this,"attr."+t,e)):e==null?(n.local?fa:ha)(n):(n.local?ga:ma)(n,i,e))}function ya(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function wa(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function _a(t,e){var n,i;function r(){var a=e.apply(this,arguments);return a!==i&&(n=(i=a)&&wa(t,a)),n}return r._value=e,r}function xa(t,e){var n,i;function r(){var a=e.apply(this,arguments);return a!==i&&(n=(i=a)&&ya(t,a)),n}return r._value=e,r}function Ta(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=we(t);return this.tween(n,(i.local?_a:xa)(i,e))}function ba(t,e){return function(){Ze(this,t).delay=+e.apply(this,arguments)}}function Ma(t,e){return e=+e,function(){Ze(this,t).delay=e}}function Sa(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ba:Ma)(e,t)):ut(this.node(),e).delay}function Da(t,e){return function(){ht(this,t).duration=+e.apply(this,arguments)}}function ka(t,e){return e=+e,function(){ht(this,t).duration=e}}function Aa(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Da:ka)(e,t)):ut(this.node(),e).duration}function $a(t,e){if(typeof e!="function")throw new Error;return function(){ht(this,t).ease=e}}function Ca(t){var e=this._id;return arguments.length?this.each($a(e,t)):ut(this.node(),e).ease}function za(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ht(this,t).ease=n}}function La(t){if(typeof t!="function")throw new Error;return this.each(za(this._id,t))}function Ea(t){typeof t!="function"&&(t=qn(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a=e[r],o=a.length,s=i[r]=[],l,u=0;u<o;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&s.push(l);return new vt(i,this._parents,this._name,this._id)}function Na(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,a=Math.min(i,r),o=new Array(i),s=0;s<a;++s)for(var l=e[s],u=n[s],c=l.length,m=o[s]=new Array(c),h,g=0;g<c;++g)(h=l[g]||u[g])&&(m[g]=h);for(;s<i;++s)o[s]=e[s];return new vt(o,this._parents,this._name,this._id)}function Ia(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Ua(t,e,n){var i,r,a=Ia(e)?Ze:ht;return function(){var o=a(this,t),s=o.on;s!==i&&(r=(i=s).copy()).on(e,n),o.on=r}}function Ya(t,e){var n=this._id;return arguments.length<2?ut(this.node(),n).on.on(t):this.each(Ua(n,t,e))}function Ha(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Ra(){return this.on("end.remove",Ha(this._id))}function Fa(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ve(t));for(var i=this._groups,r=i.length,a=new Array(r),o=0;o<r;++o)for(var s=i[o],l=s.length,u=a[o]=new Array(l),c,m,h=0;h<l;++h)(c=s[h])&&(m=t.call(c,c.__data__,h,s))&&("__data__"in c&&(m.__data__=c.__data__),u[h]=m,xe(u[h],e,n,h,u,ut(c,n)));return new vt(a,this._parents,e,n)}function Oa(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Vn(t));for(var i=this._groups,r=i.length,a=[],o=[],s=0;s<r;++s)for(var l=i[s],u=l.length,c,m=0;m<u;++m)if(c=l[m]){for(var h=t.call(c,c.__data__,m,l),g,T=ut(c,n),M=0,z=h.length;M<z;++M)(g=h[M])&&xe(g,e,n,M,h,T);a.push(h),o.push(c)}return new vt(a,o,e,n)}var Pa=Jt.prototype.constructor;function Ga(){return new Pa(this._groups,this._parents)}function Va(t,e){var n,i,r;return function(){var a=It(this,t),o=(this.style.removeProperty(t),It(this,t));return a===o?null:a===n&&o===i?r:r=e(n=a,i=o)}}function mi(t){return function(){this.style.removeProperty(t)}}function qa(t,e,n){var i,r=n+"",a;return function(){var o=It(this,t);return o===r?null:o===i?a:a=e(i=o,n)}}function Ba(t,e,n){var i,r,a;return function(){var o=It(this,t),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(t),It(this,t))),o===l?null:o===i&&l===r?a:(r=l,a=e(i=o,s))}}function Xa(t,e){var n,i,r,a="style."+e,o="end."+a,s;return function(){var l=ht(this,t),u=l.on,c=l.value[a]==null?s||(s=mi(e)):void 0;(u!==n||r!==c)&&(i=(n=u).copy()).on(o,r=c),l.on=i}}function ja(t,e,n){var i=(t+="")=="transform"?jo:fi;return e==null?this.styleTween(t,Va(t,i)).on("end.style."+t,mi(t)):typeof e=="function"?this.styleTween(t,Ba(t,i,Je(this,"style."+t,e))).each(Xa(this._id,t)):this.styleTween(t,qa(t,i,e),n).on("end.style."+t,null)}function Wa(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Za(t,e,n){var i,r;function a(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&Wa(t,o,n)),i}return a._value=e,a}function Ja(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Za(t,e,n??""))}function Qa(t){return function(){this.textContent=t}}function Ka(t){return function(){var e=t(this);this.textContent=e??""}}function ts(t){return this.tween("text",typeof t=="function"?Ka(Je(this,"text",t)):Qa(t==null?"":t+""))}function es(t){return function(e){this.textContent=t.call(this,e)}}function ns(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&es(r)),e}return i._value=t,i}function is(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,ns(t))}function rs(){for(var t=this._name,e=this._id,n=gi(),i=this._groups,r=i.length,a=0;a<r;++a)for(var o=i[a],s=o.length,l,u=0;u<s;++u)if(l=o[u]){var c=ut(l,e);xe(l,t,n,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new vt(i,this._parents,t,n)}function os(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(a,o){var s={value:o},l={value:function(){--r===0&&a()}};n.each(function(){var u=ht(this,i),c=u.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),u.on=e}),r===0&&a()})}var as=0;function vt(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function gi(){return++as}var mt=Jt.prototype;vt.prototype={constructor:vt,select:Fa,selectAll:Oa,selectChild:mt.selectChild,selectChildren:mt.selectChildren,filter:Ea,merge:Na,selection:Ga,transition:rs,call:mt.call,nodes:mt.nodes,node:mt.node,size:mt.size,empty:mt.empty,each:mt.each,on:Ya,attr:va,attrTween:Ta,style:ja,styleTween:Ja,text:ts,textTween:is,remove:Ra,tween:ca,delay:Sa,duration:Aa,ease:Ca,easeVarying:La,end:os,[Symbol.iterator]:mt[Symbol.iterator]};const ss=t=>+t;function us(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ls={time:null,delay:0,duration:250,ease:us};function cs(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function hs(t){var e,n;t instanceof vt?(e=t._id,t=t._name):(e=gi(),(n=ls).time=We(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,a=0;a<r;++a)for(var o=i[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&xe(l,t,e,u,o,n||cs(l,e));return new vt(i,this._parents,t,e)}Jt.prototype.interrupt=sa;Jt.prototype.transition=hs;function fs(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ms(t){return function(){return t}}function gs(t){return+t}var Dn=[0,1];function zt(t){return t}function Fe(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:ms(isNaN(e)?NaN:.5)}function ds(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function ps(t,e,n){var i=t[0],r=t[1],a=e[0],o=e[1];return r<i?(i=Fe(r,i),a=n(o,a)):(i=Fe(i,r),a=n(a,o)),function(s){return a(i(s))}}function vs(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),a=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=Fe(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(s){var l=Di(t,s,1,i)-1;return a[l](r[l](s))}}function ys(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ws(){var t=Dn,e=Dn,n=je,i,r,a,o=zt,s,l,u;function c(){var h=Math.min(t.length,e.length);return o!==zt&&(o=ds(t[0],t[h-1])),s=h>2?vs:ps,l=u=null,m}function m(h){return h==null||isNaN(h=+h)?a:(l||(l=s(t.map(i),e,n)))(i(o(h)))}return m.invert=function(h){return o(r((u||(u=s(e,t.map(i),ot)))(h)))},m.domain=function(h){return arguments.length?(t=Array.from(h,gs),c()):t.slice()},m.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},m.rangeRound=function(h){return e=Array.from(h),n=qo,c()},m.clamp=function(h){return arguments.length?(o=h?!0:zt,c()):o!==zt},m.interpolate=function(h){return arguments.length?(n=h,c()):n},m.unknown=function(h){return arguments.length?(a=h,m):a},function(h,g){return i=h,r=g,c()}}function _s(){return ws()(zt,zt)}function xs(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],a=t[i],o;return a<r&&(o=n,n=i,i=o,o=r,r=a,a=o),t[n]=e.floor(r),t[i]=e.ceil(a),t}const De=new Date,ke=new Date;function O(t,e,n,i){function r(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return r.floor=a=>(t(a=new Date(+a)),a),r.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),r.round=a=>{const o=r(a),s=r.ceil(a);return a-o<s-a?o:s},r.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),r.range=(a,o,s)=>{const l=[];if(a=r.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return l;let u;do l.push(u=new Date(+a)),e(a,s),t(a);while(u<a&&a<o);return l},r.filter=a=>O(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;e(o,-1),!a(o););else for(;--s>=0;)for(;e(o,1),!a(o););}),n&&(r.count=(a,o)=>(De.setTime(+a),ke.setTime(+o),t(De),t(ke),Math.floor(n(De,ke))),r.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?r.filter(i?o=>i(o)%a===0:o=>r.count(0,o)%a===0):r)),r}const pe=O(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);pe.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?O(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):pe);pe.range;const dt=1e3,et=dt*60,pt=et*60,yt=pt*24,Qe=yt*7,kn=yt*30,Ae=yt*365,Lt=O(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*dt)},(t,e)=>(e-t)/dt,t=>t.getUTCSeconds());Lt.range;const Ke=O(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*dt)},(t,e)=>{t.setTime(+t+e*et)},(t,e)=>(e-t)/et,t=>t.getMinutes());Ke.range;const Ts=O(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*et)},(t,e)=>(e-t)/et,t=>t.getUTCMinutes());Ts.range;const tn=O(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*dt-t.getMinutes()*et)},(t,e)=>{t.setTime(+t+e*pt)},(t,e)=>(e-t)/pt,t=>t.getHours());tn.range;const bs=O(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*pt)},(t,e)=>(e-t)/pt,t=>t.getUTCHours());bs.range;const Kt=O(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*et)/yt,t=>t.getDate()-1);Kt.range;const en=O(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/yt,t=>t.getUTCDate()-1);en.range;const Ms=O(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/yt,t=>Math.floor(t/yt));Ms.range;function At(t){return O(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*et)/Qe)}const Te=At(0),ve=At(1),Ss=At(2),Ds=At(3),Yt=At(4),ks=At(5),As=At(6);Te.range;ve.range;Ss.range;Ds.range;Yt.range;ks.range;As.range;function $t(t){return O(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Qe)}const di=$t(0),ye=$t(1),$s=$t(2),Cs=$t(3),Ht=$t(4),zs=$t(5),Ls=$t(6);di.range;ye.range;$s.range;Cs.range;Ht.range;zs.range;Ls.range;const nn=O(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());nn.range;const Es=O(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Es.range;const wt=O(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());wt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:O(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});wt.range;const kt=O(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());kt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:O(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});kt.range;function Ns(t,e,n,i,r,a){const o=[[Lt,1,dt],[Lt,5,5*dt],[Lt,15,15*dt],[Lt,30,30*dt],[a,1,et],[a,5,5*et],[a,15,15*et],[a,30,30*et],[r,1,pt],[r,3,3*pt],[r,6,6*pt],[r,12,12*pt],[i,1,yt],[i,2,2*yt],[n,1,Qe],[e,1,kn],[e,3,3*kn],[t,1,Ae]];function s(u,c,m){const h=c<u;h&&([u,c]=[c,u]);const g=m&&typeof m.range=="function"?m:l(u,c,m),T=g?g.range(u,+c+1):[];return h?T.reverse():T}function l(u,c,m){const h=Math.abs(c-u)/m,g=Pe(([,,z])=>z).right(o,h);if(g===o.length)return t.every(sn(u/Ae,c/Ae,m));if(g===0)return pe.every(Math.max(sn(u,c,m),1));const[T,M]=o[h/o[g-1][2]<o[g][2]/h?g-1:g];return T.every(M)}return[s,l]}const[Is,Us]=Ns(wt,nn,Te,Kt,tn,Ke);function $e(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ce(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ft(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Ys(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,a=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,u=Ot(r),c=Pt(r),m=Ot(a),h=Pt(a),g=Ot(o),T=Pt(o),M=Ot(s),z=Pt(s),x=Ot(l),H=Pt(l),E={a:_,A:b,b:S,B:D,c:null,d:En,e:En,f:au,g:pu,G:yu,H:iu,I:ru,j:ou,L:pi,m:su,M:uu,p:L,q:Y,Q:Un,s:Yn,S:lu,u:cu,U:hu,V:fu,w:mu,W:gu,x:null,X:null,y:du,Y:vu,Z:wu,"%":In},I={a:tt,A:F,b:B,B:it,c:null,d:Nn,e:Nn,f:bu,g:Eu,G:Iu,H:_u,I:xu,j:Tu,L:yi,m:Mu,M:Su,p:X,q:rt,Q:Un,s:Yn,S:Du,u:ku,U:Au,V:$u,w:Cu,W:zu,x:null,X:null,y:Lu,Y:Nu,Z:Uu,"%":In},R={a:Q,A:ft,b:K,B:_t,c:f,d:zn,e:zn,f:Ks,g:Cn,G:$n,H:Ln,I:Ln,j:Ws,L:Qs,m:js,M:Zs,p:nt,q:Xs,Q:eu,s:nu,S:Js,u:Ps,U:Gs,V:Vs,w:Os,W:qs,x:y,X:d,y:Cn,Y:$n,Z:Bs,"%":tu};E.x=w(n,E),E.X=w(i,E),E.c=w(e,E),I.x=w(n,I),I.X=w(i,I),I.c=w(e,I);function w(v,k){return function($){var p=[],G=-1,N=0,j=v.length,W,Tt,on;for($ instanceof Date||($=new Date(+$));++G<j;)v.charCodeAt(G)===37&&(p.push(v.slice(N,G)),(Tt=An[W=v.charAt(++G)])!=null?W=v.charAt(++G):Tt=W==="e"?" ":"0",(on=k[W])&&(W=on($,Tt)),p.push(W),N=G+1);return p.push(v.slice(N,G)),p.join("")}}function A(v,k){return function($){var p=Ft(1900,void 0,1),G=q(p,v,$+="",0),N,j;if(G!=$.length)return null;if("Q"in p)return new Date(p.Q);if("s"in p)return new Date(p.s*1e3+("L"in p?p.L:0));if(k&&!("Z"in p)&&(p.Z=0),"p"in p&&(p.H=p.H%12+p.p*12),p.m===void 0&&(p.m="q"in p?p.q:0),"V"in p){if(p.V<1||p.V>53)return null;"w"in p||(p.w=1),"Z"in p?(N=Ce(Ft(p.y,0,1)),j=N.getUTCDay(),N=j>4||j===0?ye.ceil(N):ye(N),N=en.offset(N,(p.V-1)*7),p.y=N.getUTCFullYear(),p.m=N.getUTCMonth(),p.d=N.getUTCDate()+(p.w+6)%7):(N=$e(Ft(p.y,0,1)),j=N.getDay(),N=j>4||j===0?ve.ceil(N):ve(N),N=Kt.offset(N,(p.V-1)*7),p.y=N.getFullYear(),p.m=N.getMonth(),p.d=N.getDate()+(p.w+6)%7)}else("W"in p||"U"in p)&&("w"in p||(p.w="u"in p?p.u%7:"W"in p?1:0),j="Z"in p?Ce(Ft(p.y,0,1)).getUTCDay():$e(Ft(p.y,0,1)).getDay(),p.m=0,p.d="W"in p?(p.w+6)%7+p.W*7-(j+5)%7:p.w+p.U*7-(j+6)%7);return"Z"in p?(p.H+=p.Z/100|0,p.M+=p.Z%100,Ce(p)):$e(p)}}function q(v,k,$,p){for(var G=0,N=k.length,j=$.length,W,Tt;G<N;){if(p>=j)return-1;if(W=k.charCodeAt(G++),W===37){if(W=k.charAt(G++),Tt=R[W in An?k.charAt(G++):W],!Tt||(p=Tt(v,$,p))<0)return-1}else if(W!=$.charCodeAt(p++))return-1}return p}function nt(v,k,$){var p=u.exec(k.slice($));return p?(v.p=c.get(p[0].toLowerCase()),$+p[0].length):-1}function Q(v,k,$){var p=g.exec(k.slice($));return p?(v.w=T.get(p[0].toLowerCase()),$+p[0].length):-1}function ft(v,k,$){var p=m.exec(k.slice($));return p?(v.w=h.get(p[0].toLowerCase()),$+p[0].length):-1}function K(v,k,$){var p=x.exec(k.slice($));return p?(v.m=H.get(p[0].toLowerCase()),$+p[0].length):-1}function _t(v,k,$){var p=M.exec(k.slice($));return p?(v.m=z.get(p[0].toLowerCase()),$+p[0].length):-1}function f(v,k,$){return q(v,e,k,$)}function y(v,k,$){return q(v,n,k,$)}function d(v,k,$){return q(v,i,k,$)}function _(v){return o[v.getDay()]}function b(v){return a[v.getDay()]}function S(v){return l[v.getMonth()]}function D(v){return s[v.getMonth()]}function L(v){return r[+(v.getHours()>=12)]}function Y(v){return 1+~~(v.getMonth()/3)}function tt(v){return o[v.getUTCDay()]}function F(v){return a[v.getUTCDay()]}function B(v){return l[v.getUTCMonth()]}function it(v){return s[v.getUTCMonth()]}function X(v){return r[+(v.getUTCHours()>=12)]}function rt(v){return 1+~~(v.getUTCMonth()/3)}return{format:function(v){var k=w(v+="",E);return k.toString=function(){return v},k},parse:function(v){var k=A(v+="",!1);return k.toString=function(){return v},k},utcFormat:function(v){var k=w(v+="",I);return k.toString=function(){return v},k},utcParse:function(v){var k=A(v+="",!0);return k.toString=function(){return v},k}}}var An={"-":"",_:" ",0:"0"},P=/^\s*\d+/,Hs=/^%/,Rs=/[\\^$*+?|[\]().{}]/g;function C(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(e)+r:r)}function Fs(t){return t.replace(Rs,"\\$&")}function Ot(t){return new RegExp("^(?:"+t.map(Fs).join("|")+")","i")}function Pt(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Os(t,e,n){var i=P.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Ps(t,e,n){var i=P.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function Gs(t,e,n){var i=P.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function Vs(t,e,n){var i=P.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function qs(t,e,n){var i=P.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function $n(t,e,n){var i=P.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Cn(t,e,n){var i=P.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Bs(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Xs(t,e,n){var i=P.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function js(t,e,n){var i=P.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function zn(t,e,n){var i=P.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Ws(t,e,n){var i=P.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function Ln(t,e,n){var i=P.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function Zs(t,e,n){var i=P.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function Js(t,e,n){var i=P.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function Qs(t,e,n){var i=P.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function Ks(t,e,n){var i=P.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function tu(t,e,n){var i=Hs.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function eu(t,e,n){var i=P.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function nu(t,e,n){var i=P.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function En(t,e){return C(t.getDate(),e,2)}function iu(t,e){return C(t.getHours(),e,2)}function ru(t,e){return C(t.getHours()%12||12,e,2)}function ou(t,e){return C(1+Kt.count(wt(t),t),e,3)}function pi(t,e){return C(t.getMilliseconds(),e,3)}function au(t,e){return pi(t,e)+"000"}function su(t,e){return C(t.getMonth()+1,e,2)}function uu(t,e){return C(t.getMinutes(),e,2)}function lu(t,e){return C(t.getSeconds(),e,2)}function cu(t){var e=t.getDay();return e===0?7:e}function hu(t,e){return C(Te.count(wt(t)-1,t),e,2)}function vi(t){var e=t.getDay();return e>=4||e===0?Yt(t):Yt.ceil(t)}function fu(t,e){return t=vi(t),C(Yt.count(wt(t),t)+(wt(t).getDay()===4),e,2)}function mu(t){return t.getDay()}function gu(t,e){return C(ve.count(wt(t)-1,t),e,2)}function du(t,e){return C(t.getFullYear()%100,e,2)}function pu(t,e){return t=vi(t),C(t.getFullYear()%100,e,2)}function vu(t,e){return C(t.getFullYear()%1e4,e,4)}function yu(t,e){var n=t.getDay();return t=n>=4||n===0?Yt(t):Yt.ceil(t),C(t.getFullYear()%1e4,e,4)}function wu(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+C(e/60|0,"0",2)+C(e%60,"0",2)}function Nn(t,e){return C(t.getUTCDate(),e,2)}function _u(t,e){return C(t.getUTCHours(),e,2)}function xu(t,e){return C(t.getUTCHours()%12||12,e,2)}function Tu(t,e){return C(1+en.count(kt(t),t),e,3)}function yi(t,e){return C(t.getUTCMilliseconds(),e,3)}function bu(t,e){return yi(t,e)+"000"}function Mu(t,e){return C(t.getUTCMonth()+1,e,2)}function Su(t,e){return C(t.getUTCMinutes(),e,2)}function Du(t,e){return C(t.getUTCSeconds(),e,2)}function ku(t){var e=t.getUTCDay();return e===0?7:e}function Au(t,e){return C(di.count(kt(t)-1,t),e,2)}function wi(t){var e=t.getUTCDay();return e>=4||e===0?Ht(t):Ht.ceil(t)}function $u(t,e){return t=wi(t),C(Ht.count(kt(t),t)+(kt(t).getUTCDay()===4),e,2)}function Cu(t){return t.getUTCDay()}function zu(t,e){return C(ye.count(kt(t)-1,t),e,2)}function Lu(t,e){return C(t.getUTCFullYear()%100,e,2)}function Eu(t,e){return t=wi(t),C(t.getUTCFullYear()%100,e,2)}function Nu(t,e){return C(t.getUTCFullYear()%1e4,e,4)}function Iu(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Ht(t):Ht.ceil(t),C(t.getUTCFullYear()%1e4,e,4)}function Uu(){return"+0000"}function In(){return"%"}function Un(t){return+t}function Yn(t){return Math.floor(+t/1e3)}var Ct,_i;Oe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Oe(t){return Ct=Ys(t),_i=Ct.format,Ct.parse,Ct.utcFormat,Ct.utcParse,Ct}function Yu(t){return new Date(t)}function Hu(t){return t instanceof Date?+t:+new Date(+t)}function xi(t,e,n,i,r,a,o,s,l,u){var c=_s(),m=c.invert,h=c.domain,g=u(".%L"),T=u(":%S"),M=u("%I:%M"),z=u("%I %p"),x=u("%a %d"),H=u("%b %d"),E=u("%B"),I=u("%Y");function R(w){return(l(w)<w?g:s(w)<w?T:o(w)<w?M:a(w)<w?z:i(w)<w?r(w)<w?x:H:n(w)<w?E:I)(w)}return c.invert=function(w){return new Date(m(w))},c.domain=function(w){return arguments.length?h(Array.from(w,Hu)):h().map(Yu)},c.ticks=function(w){var A=h();return t(A[0],A[A.length-1],w??10)},c.tickFormat=function(w,A){return A==null?R:u(A)},c.nice=function(w){var A=h();return(!w||typeof w.range!="function")&&(w=e(A[0],A[A.length-1],w??10)),w?h(xs(A,w)):c},c.copy=function(){return ys(c,xi(t,e,n,i,r,a,o,s,l,u))},c}function Ru(){return fs.apply(xi(Is,Us,wt,nn,Te,Kt,tn,Ke,Lt,_i).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}const ie=t=>()=>t;function Fu(t,{sourceEvent:e,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function lt(t,e,n){this.k=t,this.x=e,this.y=n}lt.prototype={constructor:lt,scale:function(t){return t===1?this:new lt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new lt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var rn=new lt(1,0,0);lt.prototype;function ze(t){t.stopImmediatePropagation()}function Gt(t){t.preventDefault(),t.stopImmediatePropagation()}function Ou(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Pu(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Hn(){return this.__zoom||rn}function Gu(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Vu(){return navigator.maxTouchPoints||"ontouchstart"in this}function qu(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function Bu(){var t=Ou,e=Pu,n=qu,i=Gu,r=Vu,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],s=250,l=Ko,u=Ge("start","zoom","end"),c,m,h,g=500,T=150,M=0,z=10;function x(f){f.property("__zoom",Hn).on("wheel.zoom",q,{passive:!1}).on("mousedown.zoom",nt).on("dblclick.zoom",Q).filter(r).on("touchstart.zoom",ft).on("touchmove.zoom",K).on("touchend.zoom touchcancel.zoom",_t).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(f,y,d,_){var b=f.selection?f.selection():f;b.property("__zoom",Hn),f!==b?R(f,y,d,_):b.interrupt().each(function(){w(this,arguments).event(_).start().zoom(null,typeof y=="function"?y.apply(this,arguments):y).end()})},x.scaleBy=function(f,y,d,_){x.scaleTo(f,function(){var b=this.__zoom.k,S=typeof y=="function"?y.apply(this,arguments):y;return b*S},d,_)},x.scaleTo=function(f,y,d,_){x.transform(f,function(){var b=e.apply(this,arguments),S=this.__zoom,D=d==null?I(b):typeof d=="function"?d.apply(this,arguments):d,L=S.invert(D),Y=typeof y=="function"?y.apply(this,arguments):y;return n(E(H(S,Y),D,L),b,o)},d,_)},x.translateBy=function(f,y,d,_){x.transform(f,function(){return n(this.__zoom.translate(typeof y=="function"?y.apply(this,arguments):y,typeof d=="function"?d.apply(this,arguments):d),e.apply(this,arguments),o)},null,_)},x.translateTo=function(f,y,d,_,b){x.transform(f,function(){var S=e.apply(this,arguments),D=this.__zoom,L=_==null?I(S):typeof _=="function"?_.apply(this,arguments):_;return n(rn.translate(L[0],L[1]).scale(D.k).translate(typeof y=="function"?-y.apply(this,arguments):-y,typeof d=="function"?-d.apply(this,arguments):-d),S,o)},_,b)};function H(f,y){return y=Math.max(a[0],Math.min(a[1],y)),y===f.k?f:new lt(y,f.x,f.y)}function E(f,y,d){var _=y[0]-d[0]*f.k,b=y[1]-d[1]*f.k;return _===f.x&&b===f.y?f:new lt(f.k,_,b)}function I(f){return[(+f[0][0]+ +f[1][0])/2,(+f[0][1]+ +f[1][1])/2]}function R(f,y,d,_){f.on("start.zoom",function(){w(this,arguments).event(_).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).event(_).end()}).tween("zoom",function(){var b=this,S=arguments,D=w(b,S).event(_),L=e.apply(b,S),Y=d==null?I(L):typeof d=="function"?d.apply(b,S):d,tt=Math.max(L[1][0]-L[0][0],L[1][1]-L[0][1]),F=b.__zoom,B=typeof y=="function"?y.apply(b,S):y,it=l(F.invert(Y).concat(tt/F.k),B.invert(Y).concat(tt/B.k));return function(X){if(X===1)X=B;else{var rt=it(X),v=tt/rt[2];X=new lt(v,Y[0]-rt[0]*v,Y[1]-rt[1]*v)}D.zoom(null,X)}})}function w(f,y,d){return!d&&f.__zooming||new A(f,y)}function A(f,y){this.that=f,this.args=y,this.active=0,this.sourceEvent=null,this.extent=e.apply(f,y),this.taps=0}A.prototype={event:function(f){return f&&(this.sourceEvent=f),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(f,y){return this.mouse&&f!=="mouse"&&(this.mouse[1]=y.invert(this.mouse[0])),this.touch0&&f!=="touch"&&(this.touch0[1]=y.invert(this.touch0[0])),this.touch1&&f!=="touch"&&(this.touch1[1]=y.invert(this.touch1[0])),this.that.__zoom=y,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(f){var y=at(this.that).datum();u.call(f,this.that,new Fu(f,{sourceEvent:this.sourceEvent,target:x,transform:this.that.__zoom,dispatch:u}),y)}};function q(f,...y){if(!t.apply(this,arguments))return;var d=w(this,y).event(f),_=this.__zoom,b=Math.max(a[0],Math.min(a[1],_.k*Math.pow(2,i.apply(this,arguments)))),S=xt(f);if(d.wheel)(d.mouse[0][0]!==S[0]||d.mouse[0][1]!==S[1])&&(d.mouse[1]=_.invert(d.mouse[0]=S)),clearTimeout(d.wheel);else{if(_.k===b)return;d.mouse=[S,_.invert(S)],ue(this),d.start()}Gt(f),d.wheel=setTimeout(D,T),d.zoom("mouse",n(E(H(_,b),d.mouse[0],d.mouse[1]),d.extent,o));function D(){d.wheel=null,d.end()}}function nt(f,...y){if(h||!t.apply(this,arguments))return;var d=f.currentTarget,_=w(this,y,!0).event(f),b=at(f.view).on("mousemove.zoom",Y,!0).on("mouseup.zoom",tt,!0),S=xt(f,d),D=f.clientX,L=f.clientY;xo(f.view),ze(f),_.mouse=[S,this.__zoom.invert(S)],ue(this),_.start();function Y(F){if(Gt(F),!_.moved){var B=F.clientX-D,it=F.clientY-L;_.moved=B*B+it*it>M}_.event(F).zoom("mouse",n(E(_.that.__zoom,_.mouse[0]=xt(F,d),_.mouse[1]),_.extent,o))}function tt(F){b.on("mousemove.zoom mouseup.zoom",null),To(F.view,_.moved),Gt(F),_.event(F).end()}}function Q(f,...y){if(t.apply(this,arguments)){var d=this.__zoom,_=xt(f.changedTouches?f.changedTouches[0]:f,this),b=d.invert(_),S=d.k*(f.shiftKey?.5:2),D=n(E(H(d,S),_,b),e.apply(this,y),o);Gt(f),s>0?at(this).transition().duration(s).call(R,D,_,f):at(this).call(x.transform,D,_,f)}}function ft(f,...y){if(t.apply(this,arguments)){var d=f.touches,_=d.length,b=w(this,y,f.changedTouches.length===_).event(f),S,D,L,Y;for(ze(f),D=0;D<_;++D)L=d[D],Y=xt(L,this),Y=[Y,this.__zoom.invert(Y),L.identifier],b.touch0?!b.touch1&&b.touch0[2]!==Y[2]&&(b.touch1=Y,b.taps=0):(b.touch0=Y,S=!0,b.taps=1+!!c);c&&(c=clearTimeout(c)),S&&(b.taps<2&&(m=Y[0],c=setTimeout(function(){c=null},g)),ue(this),b.start())}}function K(f,...y){if(this.__zooming){var d=w(this,y).event(f),_=f.changedTouches,b=_.length,S,D,L,Y;for(Gt(f),S=0;S<b;++S)D=_[S],L=xt(D,this),d.touch0&&d.touch0[2]===D.identifier?d.touch0[0]=L:d.touch1&&d.touch1[2]===D.identifier&&(d.touch1[0]=L);if(D=d.that.__zoom,d.touch1){var tt=d.touch0[0],F=d.touch0[1],B=d.touch1[0],it=d.touch1[1],X=(X=B[0]-tt[0])*X+(X=B[1]-tt[1])*X,rt=(rt=it[0]-F[0])*rt+(rt=it[1]-F[1])*rt;D=H(D,Math.sqrt(X/rt)),L=[(tt[0]+B[0])/2,(tt[1]+B[1])/2],Y=[(F[0]+it[0])/2,(F[1]+it[1])/2]}else if(d.touch0)L=d.touch0[0],Y=d.touch0[1];else return;d.zoom("touch",n(E(D,L,Y),d.extent,o))}}function _t(f,...y){if(this.__zooming){var d=w(this,y).event(f),_=f.changedTouches,b=_.length,S,D;for(ze(f),h&&clearTimeout(h),h=setTimeout(function(){h=null},g),S=0;S<b;++S)D=_[S],d.touch0&&d.touch0[2]===D.identifier?delete d.touch0:d.touch1&&d.touch1[2]===D.identifier&&delete d.touch1;if(d.touch1&&!d.touch0&&(d.touch0=d.touch1,delete d.touch1),d.touch0)d.touch0[1]=this.__zoom.invert(d.touch0[0]);else if(d.end(),d.taps===2&&(D=xt(D,this),Math.hypot(m[0]-D[0],m[1]-D[1])<z)){var L=at(this).on("dblclick.zoom");L&&L.apply(this,arguments)}}}return x.wheelDelta=function(f){return arguments.length?(i=typeof f=="function"?f:ie(+f),x):i},x.filter=function(f){return arguments.length?(t=typeof f=="function"?f:ie(!!f),x):t},x.touchable=function(f){return arguments.length?(r=typeof f=="function"?f:ie(!!f),x):r},x.extent=function(f){return arguments.length?(e=typeof f=="function"?f:ie([[+f[0][0],+f[0][1]],[+f[1][0],+f[1][1]]]),x):e},x.scaleExtent=function(f){return arguments.length?(a[0]=+f[0],a[1]=+f[1],x):[a[0],a[1]]},x.translateExtent=function(f){return arguments.length?(o[0][0]=+f[0][0],o[1][0]=+f[1][0],o[0][1]=+f[0][1],o[1][1]=+f[1][1],x):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},x.constrain=function(f){return arguments.length?(n=f,x):n},x.duration=function(f){return arguments.length?(s=+f,x):s},x.interpolate=function(f){return arguments.length?(l=f,x):l},x.on=function(){var f=u.on.apply(u,arguments);return f===u?x:f},x.clickDistance=function(f){return arguments.length?(M=(f=+f)*f,x):Math.sqrt(M)},x.tapDistance=function(f){return arguments.length?(z=+f,x):z},x}function Vt(t=8){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";const i=e.length;for(let r=0;r<t;r++)n+=e.charAt(Math.floor(Math.random()*i));return n}function Rn(t,e,n){if(Number.isNaN(t)||Number.isNaN(e)||Number.isNaN(n))throw new Error("Clamp arguments must be valid numbers, got NaN");return Math.min(Math.max(t,e),n)}function Xu(t,e,n=!1){let i=null,r=!1;const a=function(...o){i&&clearTimeout(i),n&&!r?(t.apply(this,o),r=!0):i=setTimeout(()=>{t.apply(this,o),r=!1,i=null},e)};return a.cancel=function(){i&&clearTimeout(i),i=null,r=!1},a}class Et{static LEVEL_PRIORITY={debug:0,info:1,warn:2,error:3,fatal:4};static COLORS={debug:"#6b7280",info:"#3b82f6",warn:"#f59e0b",error:"#ef4444",fatal:"#dc2626",logName:"#06b6d4"};currentLevel;logName;constructor(e="APP",n="debug"){this.logName=e,this.currentLevel=n}setLevel(e){this.currentLevel=e}shouldLog(e){return Et.LEVEL_PRIORITY[e]>=Et.LEVEL_PRIORITY[this.currentLevel]}formatTime(){const e=new Date;return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}`}_log(e,n,i){if(!this.shouldLog(e))return;const r={logName:`color: ${Et.COLORS.logName}; font-weight: bold;`,module:"color: #4b5563; font-weight: 600;",level:`color: ${Et.COLORS[e]}; font-weight: bold; text-transform: uppercase;`,content:"color: #eeeeee;",time:"color: #9ca3af; font-size: 11px;",sep:"color: #d1d5db;"},a=[`%c[${this.logName}]`,"%c | "],o=[r.logName,r.sep];i&&(a.push(`%c[${i}]`,"%c | "),o.push(r.module,r.sep)),a.push(`%c${e}`,"%c | ","%c"+n,"%c | ",`%c${this.formatTime()}`),o.push(r.level,r.sep,r.content,r.sep,r.time),console.log(a.join(""),...o)}debug(e,n){this._log("debug",e,n)}info(e,n){this._log("info",e,n)}warn(e,n){this._log("warn",e,n)}error(e,n){this._log("error",e,n)}fatal(e,n){this._log("fatal",e,n)}log(e,n,i){this._log(e,n,i)}}class Fn{opts;constructor(e={}){this.opts={dateFormat:e.dateFormat??"iso",space:e.space??2}}stringify(e){const n=i=>{switch(this.opts.dateFormat){case"timestamp":return{$type:"Date",$value:i.getTime()};case"formatted":return{$type:"Date",$value:i.toLocaleString("zh-CN"),$iso:i.toISOString()};default:return{$type:"Date",$value:i.toISOString()}}};return JSON.stringify(e,(i,r)=>{if(r&&typeof r=="object")for(const a in r){const o=r[a];o instanceof Date&&(r[a]=n(o))}else if(r instanceof Date)return n(r);return r},this.opts.space)}parse(e){return JSON.parse(e,(n,i)=>i?.$type==="Date"?new Date(this.opts.dateFormat==="formatted"&&i.$iso?i.$iso:i.$value):i)}deepClone(e){return this.parse(this.stringify(e))}deepEqual(e,n){return this.stringify(e)===this.stringify(n)}}const On={en:{dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},zh:{dateTime:"%x %X",date:"%Y%-m%-d",time:"%H:%M:%S",periods:["",""],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["1","2","3","4","5","6","7","8","9","10","11","12"]}};class be{logger=new Et("D3Timeline");container;options;timelines=[];events=[];timeRange;eventBindings={click:new Set,zoom:new Set,"zoom.end":new Set};boundResize=Xu(this.resize.bind(this),300);svg;mainGroup;gridGroup;timelineGroup;stageLineGroup;stageLinesVisible=!0;eventGroup;axisGroup;labelGroup;xScale;xAxis;zoom;tooltip;lastTransform;defaultOptions={id:Vt(),width:0,height:0,margin:{top:20,right:20,bottom:20,left:120},timelineHeight:60,timelineSpacing:20,axisHeight:20,zoomMin:11520*60*1e3,zoomMax:365*24*60*60*1e3,animationDuration:300,stageLineParams:{path:"straight",size:2,color:"#9f86c0",dash:!0,arrow:!0,animation:!1},locale:"en"};constructor(e,n={}){if(this.container=at(e),this.options={...this.defaultOptions,...n},this.options.width<=0&&e.clientWidth>0&&(this.options.width=e.clientWidth),this.options.height<=0&&e.clientHeight>0&&(this.options.height=e.clientHeight),this.options.width<=0)throw Error("D3Timeline err: width is zero.");this.init()}get isStageLineVisible(){return this.stageLinesVisible}init(){this.setupLocales(),this.setupTimeRange(),this.setupSVG(),this.setupScales(),this.setupGroups(),this.setupZoom(),this.setupTooltip(),this.setupEventListeners(),this.setupPlugins(),this.render()}setupTimeRange(){const e=new Date,n=new Date(e.getFullYear()-10,e.getMonth(),e.getDate()),i=new Date(e.getFullYear()+10,e.getMonth(),e.getDate());this.timeRange={start:n,end:i}}setupLocales(){Oe(On[this.options.locale])}setupSVG(){this.svg=this.container.append("svg").attr("viewBox",[0,0,this.options.width,this.options.height]).attr("width",this.options.width).attr("height",this.options.height);const e=this.svg.append("defs");e.append("clipPath").attr("id",`main-clip-${this.options.id}`).append("rect").attr("id",`main-clip-rect-${this.options.id}`).attr("x",this.options.margin.left).attr("y",this.options.margin.top).attr("width",this.getTimelineInnerWidth()).attr("height",Rn(this.getTimelineInnerHeight(),0,1/0));const n=e.append("linearGradient").attr("id",`timelineGradient-${this.options.id}`).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%");n.append("stop").attr("offset","0%").attr("stop-color","#667eea"),n.append("stop").attr("offset","100%").attr("stop-color","#764ba2");const i=e.append("filter").attr("id",`drop-shadow-${this.options.id}`).attr("height","130%");i.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",2).attr("result","blur"),i.append("feOffset").attr("in","blur").attr("dx",0).attr("dy",2).attr("result","offsetBlur");const r=i.append("feMerge");r.append("feMergeNode").attr("in","offsetBlur"),r.append("feMergeNode").attr("in","SourceGraphic")}setupScales(){this.xScale=Ru().domain([this.timeRange.start,this.timeRange.end]).range([this.options.margin.left,this.options.width-this.options.margin.right]),this.xAxis=ln(this.xScale).ticks(this.options.width/80)}setupGroups(){this.mainGroup=this.svg.append("g").attr("class","main-group"),this.labelGroup=this.mainGroup.append("g").attr("class","d3-labels");const e=this.mainGroup.append("g").attr("clip-path",`url(#main-clip-${this.options.id})`);this.gridGroup=e.append("g").attr("class","d3-grid"),this.timelineGroup=e.append("g").attr("class","timelines"),this.stageLineGroup=e.append("g").attr("class","stage-lines"),this.eventGroup=e.append("g").attr("class","events"),this.axisGroup=e.append("g").attr("class","d3-axis").attr("transform",`translate(0, ${this.options.height-this.options.margin.bottom-this.options.axisHeight})`)}isPointInClipArea(e){const n=xt(e,this.timelineGroup.node()),[i,r]=n,a=this.getTimelineInnerWidth(),o=this.getTimelineInnerHeight();return i>=this.options.margin.left&&i<=a+this.options.margin.left&&r>=this.options.margin.top&&r<=o+this.options.margin.top}getTimelineInnerWidth(){return this.options.width-this.options.margin.left-this.options.margin.right}getTimelineInnerHeight(e=!1){return this.options.height-this.options.margin.top-this.options.margin.bottom-(e?this.options.axisHeight:0)}setupZoom(){const e=this.timeRange.end.getTime()-this.timeRange.start.getTime(),n=this.options.zoomMax/e,i=e/this.options.zoomMin;this.zoom=Bu().filter(this.isPointInClipArea.bind(this)).scaleExtent([Math.max(1,n),Math.max(1,i)]).extent([[this.options.margin.left,0],[this.options.width-this.options.margin.right,this.options.height]]).translateExtent([[this.options.margin.left,-1/0],[this.options.width-this.options.margin.right,1/0]])}setupTooltip(){this.tooltip=at("body").append("div").attr("class","d3-timeline-tooltip").style("position","fixed").style("background","rgba(0, 0, 0, 0.9)").style("color","white").style("padding","12px").style("border-radius","8px").style("font-size","12px").style("pointer-events","none").style("opacity",0).style("z-index","1000").style("max-width","250px").style("box-shadow","0 4px 12px rgba(0,0,0,0.3)")}setupPlugins(){be.plugins.forEach(e=>{e.install({instance:this,container:this.container,options:this.options,timeRange:this.timeRange,svg:this.svg})})}setupEventListeners(){this.zoom&&this.zoom.on("zoom",e=>{this.handleZoom(e),this.emit("zoom",{scale:e.transform.k,x:e.transform.x,y:e.transform.y})}).on("zoom.end",e=>{this.emit("zoom.end",{scale:e.transform.k,x:e.transform.x,y:e.transform.y})}),this.svg&&this.svg.on("click",e=>{const n=e.target.closest(".event");if(n){const i=at(n).datum();this.emit("click",{data:i})}}),window.addEventListener("resize",this.boundResize)}removeEventListeners(){this.zoom&&this.zoom.on("zoom",null).on("zoom.end",null),this.svg&&this.svg.on("click",null),window.removeEventListener("resize",this.boundResize),this.eventBindings.click.clear(),this.eventBindings.zoom.clear(),this.eventBindings["zoom.end"].clear()}updateTimelinePositions(){this.timelineGroup.selectAll(".timeline").attr("transform",e=>`translate(0, ${this.calculateTimelineOffsetY(e)})`)}calculateTimelineOffsetY(e){return e?(this.timelines.length-this.timelines.indexOf(e)-1)*(this.options.timelineHeight+this.options.timelineSpacing)+this.options.margin.top:0}calculateHeight(){return this.options.margin.top+this.options.margin.bottom+this.options.axisHeight+this.timelines.length*(this.options.timelineSpacing+this.options.timelineHeight)}updateEventPositions(e){this.eventGroup.selectAll(".event").attr("transform",n=>{const i=this.timelines.find(o=>o.id===n.timelineId),r=e(n.startTime),a=i?this.calculateTimelineOffsetY(i)+this.options.timelineHeight/2:0;return`translate(${r}, ${a})`}).select(".d3-event-range").attr("width",n=>{if(n.type==="range"){const i=e(n.endTime),r=e(n.startTime);return Math.max(5,i-r)}return 0}),this.eventGroup.selectAll(".event").filter(n=>n.type==="range").select(".d3-event-text").attr("x",n=>{const i=e(n.endTime),r=e(n.startTime);return(i-r)/2}),this.eventGroup.selectAll(".event").select(".event-text").filter(n=>n.type==="range").attr("x",n=>{if(n.type==="range"){const i=e(n.endTime),r=e(n.startTime);return(i-r)/2}return 0})}emit(e,n){this.eventBindings[e].forEach(i=>{i(n)})}on(e,n){this.eventBindings[e].has(n)||this.eventBindings[e].add(n)}off(e,n){this.eventBindings[e].delete(n)}addTimeline(e,n="#667eea",i,r=!0){const a={id:i??Vt(),name:e,color:n};return this.timelines.push(a),r&&this.resize(),a}addTimelines(e,n=!0){if(!Array.isArray(e)||e.length===0)return[];const i=e.map(r=>({id:r.id??Vt(),name:r.name,color:r.color??"#667eea"}));return this.timelines.push(...i),n&&this.resize(),i}removeTimeline(e){this.timelines=this.timelines.filter(n=>n.id!==e),this.events=this.events.filter(n=>n.timelineId!==e),this.resize()}addEvent(e,n,i=!0){const r=this.timelines.find(o=>o.id===n);if(!r)return null;if(n=n??e.timelineId,!n)throw Error("The timelineId is not specified.");const a={id:e.id??Vt(),timelineId:n,title:e.title||"",description:e.description||"",startTime:e.startTime||new Date,endTime:e.endTime||e.startTime||new Date,color:e.color||r.color,type:e.endTime?"range":"point",stage:e.stage};return this.events.push(a),this.render(),i&&this.fitRange(),a}addEvents(e,n,i=!0){if(!Array.isArray(e)||e.length===0)return null;const r=e.map(a=>{let o=n??a.timelineId;if(!o)throw Error("The timelineId is not specified.");const s=this.timelines.find(l=>l.id===o);if(!s)throw Error("The timeineId is invalid.");return{id:a.id??Vt(),timelineId:o,title:a.title||"",description:a.description||"",startTime:a.startTime||new Date,endTime:a.endTime||a.startTime||new Date,color:a.color||s.color,type:a.endTime?"range":"point",stage:a.stage}});return this.events.push(...r),this.render(),i&&this.fitRange(),r}removeEvent(e){this.events=this.events.filter(n=>n.id!==e),this.render()}changeLocale(e){if(this.options.locale=e,Oe(On[e]),this.setupScales(),this.lastTransform){const n=new lt(this.lastTransform.k,this.lastTransform.x+1,this.lastTransform.y);this.renderAxis(n.rescaleX(this.xScale)),this.renderAxis(this.lastTransform.rescaleX(this.xScale))}}render(e=!1){const n=this.timelineGroup.selectAll(".d3-timeline").size(),i=this.eventGroup.selectAll(".event").size();n!==this.timelines.length||i!==this.events.length||e?(this.renderTimelines(),this.renderEvents(),this.renderStageLines()):(this.updateTimelinePositions(),this.updateEventPositions(this.xScale)),this.renderGrid(this.xScale),this.renderAxis(this.xScale)}renderGrid(e){this.gridGroup.selectAll("*").remove();const n=this.xScale.ticks(20);this.gridGroup.selectAll(".vertical-grid").data(n).enter().append("line").attr("class","vertical-grid").attr("x1",i=>e(i)).attr("y1",this.options.margin.top).attr("x2",i=>e(i)).attr("y2",this.options.height-this.options.margin.bottom-this.options.axisHeight).attr("class","d3-grid")}renderTimelines(){const e=this.timelineGroup.selectAll(".d3-timeline").data(this.timelines,r=>r.id.toString()),n=e.enter().append("g").attr("class","d3-timeline");n.append("rect").attr("class","d3-timeline-bg").attr("x",this.options.margin.left).attr("width",this.getTimelineInnerWidth()).attr("height",this.options.timelineHeight).attr("filter",`url(#drop-shadow-${this.options.id})`),n.append("line").attr("class","d3-timeline-line").attr("x1",this.options.margin.left).attr("x2",this.options.margin.left+this.getTimelineInnerWidth());const i=n.merge(e);i.transition().duration(this.options.animationDuration).attr("transform",r=>`translate(0, ${this.calculateTimelineOffsetY(r)})`),i.select(".d3-timeline-bg").attr("y",0),i.select(".d3-timeline-line").attr("y1",this.options.timelineHeight/2).attr("y2",this.options.timelineHeight/2).attr("stroke",r=>r.color),e.exit().transition().duration(this.options.animationDuration).style("opacity",0).remove(),this.renderTimelineLabels()}renderTimelineLabels(){const e=this.labelGroup.selectAll(".d3-timeline-label").data(this.timelines,n=>n.id.toString());e.enter().append("text").attr("class","d3-timeline-label").attr("x",this.options.margin.left-10).attr("text-anchor","end").attr("dominant-baseline","middle").attr("fill","#333").attr("font-size","14").attr("font-weight","bold").merge(e).transition().duration(this.options.animationDuration).attr("y",n=>this.calculateTimelineOffsetY(n)+this.options.timelineHeight/2).text(n=>n.name),e.exit().transition().duration(this.options.animationDuration).style("opacity",0).remove()}handleZoom(e){const{transform:n}=e,i=n.rescaleX(this.xScale);this.updateTimelinePositions(),this.updateEventPositions(i),this.updateStageLinePositions(i);const r=this.getTimelineInnerWidth();this.timelineGroup.selectAll(".d3-timeline-bg").attr("width",r).attr("fill",`url(#timelineGradient-${this.options.id})`),this.timelineGroup.selectAll(".d3-timeline-line").attr("x2",this.options.margin.left+r),this.renderAxis(i),this.renderGrid(i),this.lastTransform=n}renderEvents(){const e=this.eventGroup.selectAll(".event").data(this.events,o=>o.id.toString()),n=e.enter().append("g").attr("class","event"),i=n.filter(o=>o.type==="range");i.append("rect").attr("class","d3-event-range").attr("height",30).attr("y",-15).attr("rx",6).attr("filter",`url(#drop-shadow-${this.options.id})`),i.append("text").attr("class","d3-event-text").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("fill","white").attr("y",0);const r=n.filter(o=>o.type==="point");r.append("circle").attr("class","d3-event-point").attr("r",8).attr("stroke","white").attr("stroke-width",2).attr("filter",`url(#drop-shadow-${this.options.id})`),r.append("text").attr("class","d3-event-text").attr("text-anchor","middle").attr("fill","#333").attr("y",-20);const a=n.merge(e);a.transition().duration(this.options.animationDuration).attr("transform",o=>{const s=this.timelines.find(c=>c.id===o.timelineId),l=this.xScale(o.startTime),u=s?this.calculateTimelineOffsetY(s)+this.options.timelineHeight:0;return`translate(${l}, ${u})`}),a.select(".d3-event-range").attr("x",0).attr("width",o=>{const s=this.xScale(o.endTime),l=this.xScale(o.startTime);return Math.max(5,s-l)}).attr("fill",o=>o.color),a.select(".d3-event-text").filter(o=>o.type==="range").attr("x",o=>{const s=this.xScale(o.endTime),l=this.xScale(o.startTime);return(s-l)/2}).text(o=>o.title),a.select(".d3-event-point").attr("cx",0).attr("cy",0).attr("fill",o=>o.color),a.select(".d3-event-text").filter(o=>o.type==="point").attr("x",0).text(o=>o.title),a.on("mouseover",(o,s)=>{const l=o.currentTarget;this.showTooltip(o,s,l)}).on("mouseout",()=>this.hideTooltip()),e.exit().transition().duration(this.options.animationDuration).style("opacity",0).remove()}generatePathSegment(e,n,i){switch(i){case"arc":const r=(e.x+n.x)/2,a=Math.abs(n.x-e.x)*.2;return` Q ${r} ${Math.min(e.y,n.y)-a} ${n.x} ${n.y}`;case"fluid":const o=e.x+(n.x-e.x)*.5,s=e.y,l=e.x+(n.x-e.x)*.5,u=n.y;return` C ${o} ${s}, ${l} ${u}, ${n.x} ${n.y}`;case"magnet":const c=(e.y+n.y)/2;return` L ${e.x} ${c} L ${n.x} ${c} L ${n.x} ${n.y}`;case"grid":const m=30;return Math.abs(e.y-n.y)<5?` L ${n.x} ${n.y}`:` L ${e.x+m} ${e.y} L ${e.x+m} ${n.y} L ${n.x} ${n.y}`;default:return` L ${n.x} ${n.y}`}}updateStageLinePositions(e){const n=new Map;this.events.forEach(r=>{if(r.stage){const a=r.stage.id;n.has(a)||n.set(a,[]),n.get(a).push(r)}});const i=this.options.stageLineParams;n.forEach((r,a)=>{if(r.sort((u,c)=>(u.stage.index||0)-(c.stage.index||0)),r.length<2)return;const o=this.stageLineGroup.select(`.stage-${a}`);if(o.empty())return;o.selectAll("*").remove();const s=r.map(u=>{const c=this.timelines.find(T=>T.id===u.timelineId),m=e(u.startTime),h=c?this.calculateTimelineOffsetY(c)+this.options.timelineHeight/2:0,g=u.type==="range"?e(u.endTime)-e(u.startTime):0;return{x:m,y:h,event:u,width:g}});let l="";for(let u=0;u<s.length-1;u++){const c=s[u],m=s[u+1],h=this.generatePathSegment(c,m,i.path);u===0&&(l+=`M ${c.x} ${c.y}`),l+=h}if(o.append("path").attr("class","stage-path").attr("d",l).attr("fill","none").attr("stroke",i.color).attr("stroke-width",i.size).attr("stroke-dasharray",i.dash?"5,5":null),i.arrow)for(let u=0;u<s.length-1;u++)this.drawArrowInGroup(o,s[u],s[u+1],i,i.path)})}renderStageLines(){if(!this.stageLinesVisible)return;this.stageLineGroup.selectAll("*").remove();const e=new Map;this.events.forEach(i=>{if(i.stage){const r=i.stage.id;e.has(r)||e.set(r,[]),e.get(r).push(i)}});const n=this.options.stageLineParams;e.forEach((i,r)=>{if(i.sort((u,c)=>(u.stage.index||0)-(c.stage.index||0)),i.length<2)return;const a=this.stageLineGroup.append("g").attr("class",`stage-line-group stage-${r}`),o=i.map(u=>{const c=this.timelines.find(T=>T.id===u.timelineId),m=this.xScale(u.startTime),h=c?this.calculateTimelineOffsetY(c)+this.options.timelineHeight/2:0,g=u.type==="range"?this.xScale(u.endTime)-this.xScale(u.startTime):0;return{x:m,y:h,event:u,width:g}});let s="";for(let u=0;u<o.length-1;u++){const c=o[u],m=o[u+1],h=this.generatePathSegment(c,m,n.path);u===0&&(s+=`M ${c.x} ${c.y}`),s+=h}const l=a.append("path").attr("class","stage-path").attr("d",s).attr("fill","none").attr("stroke",n.color).attr("stroke-width",n.size).attr("stroke-dasharray",n.dash?"5,5":null).style("opacity",0);if(l.transition().duration(this.options.animationDuration).style("opacity",1),n.arrow&&o.length>=2)for(let u=0;u<o.length-1;u++)this.drawArrowInGroup(a,o[u],o[u+1],n,n.path);if(n.animation){const u=l.node()?.getTotalLength()||0;l.attr("stroke-dasharray",`${u} ${u}`).attr("stroke-dashoffset",u).transition().duration(2e3).ease(ss).attr("stroke-dashoffset",0).on("end",function(){at(this).attr("stroke-dasharray",n.dash?"5,5":null)})}})}drawArrowInGroup(e,n,i,r,a){let o;switch(a){case"arc":{const M=(n.x+i.x)/2,z=Math.abs(i.x-n.x)*.2,x=Math.min(n.y,i.y)-z;o=Math.atan2(i.y-x,i.x-M);break}case"fluid":{const M=n.x+(i.x-n.x)*.5,z=i.y;o=Math.atan2(i.y-z,i.x-M);break}default:o=Math.atan2(i.y-n.y,i.x-n.x)}let s=i.x,l=i.y;if(i.event.type==="point")s=i.x-8*Math.cos(o),l=i.y-8*Math.sin(o);else if(i.event.type==="range"){const M=n.x<i.x?-1:1,z=i.width/2*M;s=i.x+z,l=i.y}const u=10,c=Math.PI/6,m=s-u*Math.cos(o-c),h=l-u*Math.sin(o-c),g=s-u*Math.cos(o+c),T=l-u*Math.sin(o+c);e.append("path").attr("class","stage-arrow").attr("d",`M ${s} ${l} L ${m} ${h} M ${s} ${l} L ${g} ${T}`).attr("stroke",r.color).attr("stroke-width",r.size).attr("fill","none")}renderAxis(e){this.xAxis=ln(e).ticks(this.options.width/80).tickSizeOuter(0),this.axisGroup.call(this.xAxis)}showTooltip(e,n,i){this.tooltip.transition().duration(200).style("opacity",1);const r=this.timelines.find(h=>h.id===n.timelineId),a=`
            <strong>${n.title}</strong><br>
            ${n.description?n.description+"<br>":""}
            : ${r?r.name:""}<br>
            : ${n.startTime.toLocaleString("zh-CN")}<br>
            ${n.type==="range"?`: ${n.endTime.toLocaleString("zh-CN")}`:""}
        `;this.tooltip.html(a);const o=8,s=i.getBoundingClientRect(),l=this.tooltip.node();if(!l)return;const u=l.getBoundingClientRect();let c=s.left+s.width/2-u.width/2,m=s.top-u.height-o;m<0&&(m=s.bottom+o),c<o?c=o:c+u.width>window.innerWidth-o&&(c=window.innerWidth-u.width-o),this.tooltip.style("left",c+"px").style("top",m+"px")}hideTooltip(){this.tooltip.transition().duration(200).style("opacity",0)}async scaleTo(e){const n=this.timeRange.end.getTime()-this.timeRange.start.getTime(),i=e.start.getTime(),r=e.end.getTime(),a=r-i,o=1440*60*1e3,s=n/(a+o),l=new Date((i+r)/2);return await this.svg.call(this.zoom).transition().duration(500).call(this.zoom.scaleTo,s,[this.xScale(l),0]).end()}async translateTo(e){const n=e.start.getTime(),i=e.end.getTime(),r=new Date((n+i)/2);return await this.svg.call(this.zoom).transition().duration(500).call(this.zoom.translateTo,this.xScale(r),0).end()}async fitRange(){const e=ki(this.events.flatMap(n=>[n.startTime,n.endTime]));if(e[0]&&e[1]){const n={start:e[0],end:e[1]};try{await this.translateTo(n),await this.scaleTo(n)}catch(i){this.logger.warn("Cautch fitRange error: "+String(i))}}}showStageLines(){this.stageLinesVisible=!0,this.stageLineGroup.attr("style","display: ''")}hideStageLines(){this.stageLinesVisible=!1,this.stageLineGroup.attr("style","display: none")}setZoom(e){const n=rn.scale(e);this.svg.transition().duration(this.options.animationDuration).call(this.zoom.transform,n)}resetView(){this.fitRange()}resize(){const e=this.container.node();this.options.width=e.clientWidth||this.options.width,this.options.height=this.calculateHeight(),this.svg.attr("viewBox",[0,0,this.options.width,this.options.height]).attr("width",this.options.width).attr("height",this.options.height),this.svg.select(`#main-clip-rect-${this.options.id}`).attr("width",this.getTimelineInnerWidth()).attr("height",Rn(this.getTimelineInnerHeight(),0,1/0)),this.setupScales(),this.axisGroup.attr("transform",`translate(0, ${this.options.height-this.options.margin.bottom-this.options.axisHeight})`),this.zoom.extent([[this.options.margin.left,0],[this.options.width-this.options.margin.right,this.options.height]]).translateExtent([[this.options.margin.left,-1/0],[this.options.width-this.options.margin.right,1/0]]),this.gridGroup.attr("y2",this.options.height-this.options.margin.bottom-this.options.axisHeight),this.render(!0),this.fitRange()}setTimeRange(e,n){this.timeRange={start:e,end:n},this.xScale.domain([e,n]),this.render()}getTimelines(){return[...this.timelines]}getEvents(){return[...this.events]}exportData(){return{timelines:[...this.timelines],events:[...this.events],timeRange:{...this.timeRange}}}exportDataString(e=!1){return new Fn({space:e?2:0}).stringify(this.exportData())}importData(e){try{return this.timelines=[...e.timelines],this.events=[...e.events],this.timeRange={...e.timeRange},this.xScale.domain([this.timeRange.start,this.timeRange.end]),this.resize(),!0}catch(n){return this.logger.error(`: ${n.message}`),!1}}importDataString(e){return this.importData(new Fn().parse(e))}destroy(){this.removeEventListeners(),this.tooltip.remove(),this.svg.remove()}static plugins=[]}let U,gt,Xt=[];function ju(){Wu(),Zu()}function Wu(){const t=document.getElementById("project-timeline");U=new be(t),U.addTimeline("","#4facfe","stage3"),U.addTimeline("","#f093fb","stage2"),U.addTimeline("","#667eea","stage1"),U.addEvents([{title:"",description:"",startTime:new Date("2026-01-15"),color:"#667eea",timelineId:"stage1"},{title:"",description:"",startTime:new Date("2026-01-25"),color:"#667eea",timelineId:"stage1"},{title:"",description:"",startTime:new Date("2026-02-10"),color:"#667eea",timelineId:"stage1"},{title:"",description:"",startTime:new Date("2026-03-05"),color:"#f093fb",timelineId:"stage2"},{title:"",description:"",startTime:new Date("2026-03-15"),color:"#f093fb",timelineId:"stage2"},{title:"",description:"",startTime:new Date("2026-04-01"),color:"#f093fb",timelineId:"stage2"},{title:"",description:"",startTime:new Date("2026-04-20"),color:"#f093fb",timelineId:"stage2"},{title:"",description:"",startTime:new Date("2026-03-10"),color:"#4facfe",timelineId:"stage3"},{title:"",description:"",startTime:new Date("2026-03-25"),color:"#4facfe",timelineId:"stage3"},{title:"",description:"",startTime:new Date("2026-04-15"),color:"#4facfe",timelineId:"stage3"},{title:"",description:"",startTime:new Date("2026-05-01"),color:"#4facfe",timelineId:"stage3"},{title:"",description:"",startTime:new Date("2026-05-05"),endTime:new Date("2026-05-15"),color:"#4facfe",timelineId:"stage3"}]);const e=document.getElementById("zoomSlider"),n=document.getElementById("zoomValue");e.addEventListener("input",i=>{const r=parseFloat(i.target.value);U.setZoom(r),n.textContent=r.toFixed(1)+"x"}),U.on("zoom.end",({scale:i})=>{e.value=String(i),n.textContent=i.toFixed(1)+"x"}),U.on("click",({data:i})=>{J(`"${i.title}"`,"system")}),J("D3.js","system")}function Zu(){const t=document.getElementById("versions-timeline");gt=new be(t),gt.addTimeline("","#4facfe","beta_line"),gt.addTimeline("","#f093fb","develop_line"),gt.addTimeline("","#667eea","start_line"),gt.addEvents([{title:"()",description:"",startTime:new Date("2026-01-15"),color:"#667eea",timelineId:"start_line",stage:{id:1,index:0}},{title:"()",description:"",startTime:new Date("2026-01-21"),color:"#f093fb",timelineId:"develop_line",stage:{id:1,index:1}},{title:"()",description:"",startTime:new Date("2026-02-25"),color:"#4facfe",timelineId:"beta_line",stage:{id:1,index:2}},{title:"()",description:"",startTime:new Date("2026-02-01"),color:"#667eea",timelineId:"start_line",stage:{id:2,index:0}},{title:"()",description:"",startTime:new Date("2026-02-10"),color:"#f093fb",timelineId:"develop_line",stage:{id:2,index:1}},{title:"()",description:"",startTime:new Date("2026-03-10"),color:"#4facfe",timelineId:"beta_line",stage:{id:2,index:2}},{title:"()",description:"",startTime:new Date("2026-03-15"),color:"#667eea",timelineId:"start_line",stage:{id:3,index:0}},{title:"()",description:"",startTime:new Date("2026-03-21"),color:"#f093fb",timelineId:"develop_line",stage:{id:3,index:1}},{title:"()",description:"",startTime:new Date("2026-04-21"),color:"#4facfe",timelineId:"beta_line",stage:{id:3,index:2}}])}function Ju(){if(U.getTimelines().length===0){J("","warning");return}const t=Math.floor(Math.random()*U.getTimelines().length),e=U.getTimelines()[t],n=new Date("2026-01-01"),i=new Date("2026-12-31"),r=new Date(n.getTime()+Math.random()*(i.getTime()-n.getTime())),a=U.addEvent({title:` ${Math.floor(Math.random()*100)}`,description:"",startTime:r,color:e.color},e.id);J(` "${e.name}" : ${a?.title}`,"point")}function Qu(){if(U.getTimelines().length===0){J("","warning");return}const t=Math.floor(Math.random()*U.getTimelines().length),e=U.getTimelines()[t],n=new Date("2026-01-01"),i=new Date("2026-12-31"),r=new Date(n.getTime()+Math.random()*(i.getTime()-n.getTime())),a=new Date(r.getTime()+Math.random()*30*24*60*60*1e3),o=U.addEvent({title:` ${Math.floor(Math.random()*100)}`,description:"",startTime:r,endTime:a,color:e.color},e.id);J(` "${e.name}" : ${o?.title}`,"range")}function Ku(){const t=["#667eea","#f093fb","#4facfe","#43e97b","#fa709a","#fee140"],e=["","","","","",""],n=t[Math.floor(Math.random()*t.length)],i=e[Math.floor(Math.random()*e.length)]+"",r=U.addTimeline(i,n);J(`: ${r.name}`,"system")}function tl(){if(U.getTimelines().length>0){const t=U.getTimelines()[U.getTimelines().length-1];U.removeTimeline(t.id),J(`: ${t.name}`,"system")}else J("","warning")}function el(){U.resetView();const t=document.getElementById("zoomSlider");t.value="1";const e=document.getElementById("zoomValue");e.textContent="1.0x",J("","system")}function nl(){const t=U.exportDataString(),e=new Blob([t],{type:"application/json"}),n=URL.createObjectURL(e),i=document.createElement("a");i.href=n,i.download="projectTimeline-data.json",i.click(),URL.revokeObjectURL(n),J("","system")}function il(){const t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=e=>{const n=e.target.files[0];if(n){const i=new FileReader;i.onload=r=>{const a=r.target.result;U.importDataString(a)?J("","system"):J("","error")},i.readAsText(n)}},t.click()}function rl(){gt.isStageLineVisible?gt.hideStageLines():gt.showStageLines()}function ol(t){U.changeLocale(t),gt.changeLocale(t)}function J(t,e="info"){const n=new Date().toLocaleTimeString("zh-CN"),i={message:t,type:e,timestamp:n};Xt.unshift(i),Xt.length>20&&(Xt=Xt.slice(0,20)),al()}function al(){const t=document.getElementById("eventLog");t.innerHTML=Xt.map(e=>`
    <div class="event-item ${e.type==="range"?"range":""}">
        <strong>[${e.timestamp}]</strong> ${e.message}
    </div>
`).join("")}document.addEventListener("DOMContentLoaded",ju);window.addRandomEvent=Ju;window.addRandomRangeEvent=Qu;window.addTimeline=Ku;window.removeTimeline=tl;window.resetView=el;window.exportData=nl;window.importData=il;window.toggleStageLines=rl;window.changeLocale=ol;
