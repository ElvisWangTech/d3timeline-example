(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function i(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerPolicy&&(h.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?h.credentials="include":l.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(l){if(l.ep)return;l.ep=!0;const h=i(l);fetch(l.href,h)}})();function mn(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function la(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function _r(t){let e,i,s;t.length!==2?(e=mn,i=(g,x)=>mn(t(g),x),s=(g,x)=>t(g)-x):(e=t===mn||t===la?t:ua,i=t,s=t);function l(g,x,m=0,w=g.length){if(m<w){if(e(x,x)!==0)return w;do{const T=m+w>>>1;i(g[T],x)<0?m=T+1:w=T}while(m<w)}return m}function h(g,x,m=0,w=g.length){if(m<w){if(e(x,x)!==0)return w;do{const T=m+w>>>1;i(g[T],x)<=0?m=T+1:w=T}while(m<w)}return m}function f(g,x,m=0,w=g.length){const T=l(g,x,m,w-1);return T>m&&s(g[T-1],x)>-s(g[T],x)?T-1:T}return{left:l,center:f,right:h}}function ua(){return 0}function ca(t){return t===null?NaN:+t}const ha=_r(mn),fa=ha.right;_r(ca).center;function pa(t,e){let i,s;for(const l of t)l!=null&&(i===void 0?l>=l&&(i=s=l):(i>l&&(i=l),s<l&&(s=l)));return[i,s]}const da=Math.sqrt(50),ga=Math.sqrt(10),ma=Math.sqrt(2);function fo(t,e,i){const s=(e-t)/Math.max(0,i),l=Math.floor(Math.log10(s)),h=s/Math.pow(10,l),f=h>=da?10:h>=ga?5:h>=ma?2:1;let g,x,m;return l<0?(m=Math.pow(10,-l)/f,g=Math.round(t*m),x=Math.round(e*m),g/m<t&&++g,x/m>e&&--x,m=-m):(m=Math.pow(10,l)*f,g=Math.round(t/m),x=Math.round(e/m),g*m<t&&++g,x*m>e&&--x),x<g&&.5<=i&&i<2?fo(t,e,i*2):[g,x,m]}function ki(t,e,i){return e=+e,t=+t,i=+i,fo(t,e,i)[2]}function Di(t,e,i){e=+e,t=+t,i=+i;const s=e<t,l=s?ki(e,t,i):ki(t,e,i);return(s?-1:1)*(l<0?1/-l:l)}function va(t){return t}var ya=3,Pi=1e-6;function xa(t){return"translate("+t+",0)"}function wa(t){return e=>+t(e)}function ba(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),i=>+t(i)+e}function _a(){return!this.__axis}function Ta(t,e){var i=[],s=null,l=null,h=6,f=6,g=3,x=typeof window<"u"&&window.devicePixelRatio>1?0:.5,m=1,w="y",T=xa;function E(k){var F=s??(e.ticks?e.ticks.apply(e,i):e.domain()),H=l??(e.tickFormat?e.tickFormat.apply(e,i):va),L=Math.max(h,0)+g,j=e.range(),et=+j[0]+x,B=+j[j.length-1]+x,nt=(e.bandwidth?ba:wa)(e.copy(),x),it=k.selection?k.selection():k,Y=it.selectAll(".domain").data([null]),S=it.selectAll(".tick").data(F,e).order(),yt=S.exit(),kt=S.enter().append("g").attr("class","tick"),xt=S.select("line"),Ct=S.select("text");Y=Y.merge(Y.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),S=S.merge(kt),xt=xt.merge(kt.append("line").attr("stroke","currentColor").attr(w+"2",m*h)),Ct=Ct.merge(kt.append("text").attr("fill","currentColor").attr(w,m*L).attr("dy","0.71em")),k!==it&&(Y=Y.transition(k),S=S.transition(k),xt=xt.transition(k),Ct=Ct.transition(k),yt=yt.transition(k).attr("opacity",Pi).attr("transform",function(ut){return isFinite(ut=nt(ut))?T(ut+x):this.getAttribute("transform")}),kt.attr("opacity",Pi).attr("transform",function(ut){var Tt=this.parentNode.__axis;return T((Tt&&isFinite(Tt=Tt(ut))?Tt:nt(ut))+x)})),yt.remove(),Y.attr("d",f?"M"+et+","+m*f+"V"+x+"H"+B+"V"+m*f:"M"+et+","+x+"H"+B),S.attr("opacity",1).attr("transform",function(ut){return T(nt(ut)+x)}),xt.attr(w+"2",m*h),Ct.attr(w,m*L).text(H),it.filter(_a).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),it.each(function(){this.__axis=nt})}return E.scale=function(k){return arguments.length?(e=k,E):e},E.ticks=function(){return i=Array.from(arguments),E},E.tickArguments=function(k){return arguments.length?(i=k==null?[]:Array.from(k),E):i.slice()},E.tickValues=function(k){return arguments.length?(s=k==null?null:Array.from(k),E):s&&s.slice()},E.tickFormat=function(k){return arguments.length?(l=k,E):l},E.tickSize=function(k){return arguments.length?(h=f=+k,E):h},E.tickSizeInner=function(k){return arguments.length?(h=+k,E):h},E.tickSizeOuter=function(k){return arguments.length?(f=+k,E):f},E.tickPadding=function(k){return arguments.length?(g=+k,E):g},E.offset=function(k){return arguments.length?(x=+k,E):x},E}function zi(t){return Ta(ya,t)}var Ea={value:()=>{}};function Tr(){for(var t=0,e=arguments.length,i={},s;t<e;++t){if(!(s=arguments[t]+"")||s in i||/[\s.]/.test(s))throw new Error("illegal type: "+s);i[s]=[]}return new vn(i)}function vn(t){this._=t}function Sa(t,e){return t.trim().split(/^|\s+/).map(function(i){var s="",l=i.indexOf(".");if(l>=0&&(s=i.slice(l+1),i=i.slice(0,l)),i&&!e.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:s}})}vn.prototype=Tr.prototype={constructor:vn,on:function(t,e){var i=this._,s=Sa(t+"",i),l,h=-1,f=s.length;if(arguments.length<2){for(;++h<f;)if((l=(t=s[h]).type)&&(l=Ma(i[l],t.name)))return l;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++h<f;)if(l=(t=s[h]).type)i[l]=Ai(i[l],t.name,e);else if(e==null)for(l in i)i[l]=Ai(i[l],t.name,null);return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new vn(t)},call:function(t,e){if((l=arguments.length-2)>0)for(var i=new Array(l),s=0,l,h;s<l;++s)i[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(h=this._[t],s=0,l=h.length;s<l;++s)h[s].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],l=0,h=s.length;l<h;++l)s[l].value.apply(e,i)}};function Ma(t,e){for(var i=0,s=t.length,l;i<s;++i)if((l=t[i]).name===e)return l.value}function Ai(t,e,i){for(var s=0,l=t.length;s<l;++s)if(t[s].name===e){t[s]=Ea,t=t.slice(0,s).concat(t.slice(s+1));break}return i!=null&&t.push({name:e,value:i}),t}var fr="http://www.w3.org/1999/xhtml";const Oi={svg:"http://www.w3.org/2000/svg",xhtml:fr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function An(t){var e=t+="",i=e.indexOf(":");return i>=0&&(e=t.slice(0,i))!=="xmlns"&&(t=t.slice(i+1)),Oi.hasOwnProperty(e)?{space:Oi[e],local:t}:t}function ka(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===fr&&e.documentElement.namespaceURI===fr?e.createElement(t):e.createElementNS(i,t)}}function Da(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function po(t){var e=An(t);return(e.local?Da:ka)(e)}function Pa(){}function Er(t){return t==null?Pa:function(){return this.querySelector(t)}}function za(t){typeof t!="function"&&(t=Er(t));for(var e=this._groups,i=e.length,s=new Array(i),l=0;l<i;++l)for(var h=e[l],f=h.length,g=s[l]=new Array(f),x,m,w=0;w<f;++w)(x=h[w])&&(m=t.call(x,x.__data__,w,h))&&("__data__"in x&&(m.__data__=x.__data__),g[w]=m);return new At(s,this._parents)}function Aa(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Oa(){return[]}function go(t){return t==null?Oa:function(){return this.querySelectorAll(t)}}function Ca(t){return function(){return Aa(t.apply(this,arguments))}}function Ia(t){typeof t=="function"?t=Ca(t):t=go(t);for(var e=this._groups,i=e.length,s=[],l=[],h=0;h<i;++h)for(var f=e[h],g=f.length,x,m=0;m<g;++m)(x=f[m])&&(s.push(t.call(x,x.__data__,m,f)),l.push(x));return new At(s,l)}function mo(t){return function(){return this.matches(t)}}function vo(t){return function(e){return e.matches(t)}}var La=Array.prototype.find;function Ra(t){return function(){return La.call(this.children,t)}}function $a(){return this.firstElementChild}function Fa(t){return this.select(t==null?$a:Ra(typeof t=="function"?t:vo(t)))}var Na=Array.prototype.filter;function ja(){return Array.from(this.children)}function Ua(t){return function(){return Na.call(this.children,t)}}function Ya(t){return this.selectAll(t==null?ja:Ua(typeof t=="function"?t:vo(t)))}function Ga(t){typeof t!="function"&&(t=mo(t));for(var e=this._groups,i=e.length,s=new Array(i),l=0;l<i;++l)for(var h=e[l],f=h.length,g=s[l]=[],x,m=0;m<f;++m)(x=h[m])&&t.call(x,x.__data__,m,h)&&g.push(x);return new At(s,this._parents)}function yo(t){return new Array(t.length)}function Ha(){return new At(this._enter||this._groups.map(yo),this._parents)}function bn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}bn.prototype={constructor:bn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ba(t){return function(){return t}}function Wa(t,e,i,s,l,h){for(var f=0,g,x=e.length,m=h.length;f<m;++f)(g=e[f])?(g.__data__=h[f],s[f]=g):i[f]=new bn(t,h[f]);for(;f<x;++f)(g=e[f])&&(l[f]=g)}function Xa(t,e,i,s,l,h,f){var g,x,m=new Map,w=e.length,T=h.length,E=new Array(w),k;for(g=0;g<w;++g)(x=e[g])&&(E[g]=k=f.call(x,x.__data__,g,e)+"",m.has(k)?l[g]=x:m.set(k,x));for(g=0;g<T;++g)k=f.call(t,h[g],g,h)+"",(x=m.get(k))?(s[g]=x,x.__data__=h[g],m.delete(k)):i[g]=new bn(t,h[g]);for(g=0;g<w;++g)(x=e[g])&&m.get(E[g])===x&&(l[g]=x)}function Va(t){return t.__data__}function qa(t,e){if(!arguments.length)return Array.from(this,Va);var i=e?Xa:Wa,s=this._parents,l=this._groups;typeof t!="function"&&(t=Ba(t));for(var h=l.length,f=new Array(h),g=new Array(h),x=new Array(h),m=0;m<h;++m){var w=s[m],T=l[m],E=T.length,k=Za(t.call(w,w&&w.__data__,m,s)),F=k.length,H=g[m]=new Array(F),L=f[m]=new Array(F),j=x[m]=new Array(E);i(w,T,H,L,j,k,e);for(var et=0,B=0,nt,it;et<F;++et)if(nt=H[et]){for(et>=B&&(B=et+1);!(it=L[B])&&++B<F;);nt._next=it||null}}return f=new At(f,s),f._enter=g,f._exit=x,f}function Za(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ja(){return new At(this._exit||this._groups.map(yo),this._parents)}function Ka(t,e,i){var s=this.enter(),l=this,h=this.exit();return typeof t=="function"?(s=t(s),s&&(s=s.selection())):s=s.append(t+""),e!=null&&(l=e(l),l&&(l=l.selection())),i==null?h.remove():i(h),s&&l?s.merge(l).order():l}function Qa(t){for(var e=t.selection?t.selection():t,i=this._groups,s=e._groups,l=i.length,h=s.length,f=Math.min(l,h),g=new Array(l),x=0;x<f;++x)for(var m=i[x],w=s[x],T=m.length,E=g[x]=new Array(T),k,F=0;F<T;++F)(k=m[F]||w[F])&&(E[F]=k);for(;x<l;++x)g[x]=i[x];return new At(g,this._parents)}function tl(){for(var t=this._groups,e=-1,i=t.length;++e<i;)for(var s=t[e],l=s.length-1,h=s[l],f;--l>=0;)(f=s[l])&&(h&&f.compareDocumentPosition(h)^4&&h.parentNode.insertBefore(f,h),h=f);return this}function el(t){t||(t=nl);function e(T,E){return T&&E?t(T.__data__,E.__data__):!T-!E}for(var i=this._groups,s=i.length,l=new Array(s),h=0;h<s;++h){for(var f=i[h],g=f.length,x=l[h]=new Array(g),m,w=0;w<g;++w)(m=f[w])&&(x[w]=m);x.sort(e)}return new At(l,this._parents).order()}function nl(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function rl(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function il(){return Array.from(this)}function ol(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var s=t[e],l=0,h=s.length;l<h;++l){var f=s[l];if(f)return f}return null}function sl(){let t=0;for(const e of this)++t;return t}function al(){return!this.node()}function ll(t){for(var e=this._groups,i=0,s=e.length;i<s;++i)for(var l=e[i],h=0,f=l.length,g;h<f;++h)(g=l[h])&&t.call(g,g.__data__,h,l);return this}function ul(t){return function(){this.removeAttribute(t)}}function cl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function hl(t,e){return function(){this.setAttribute(t,e)}}function fl(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function pl(t,e){return function(){var i=e.apply(this,arguments);i==null?this.removeAttribute(t):this.setAttribute(t,i)}}function dl(t,e){return function(){var i=e.apply(this,arguments);i==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,i)}}function gl(t,e){var i=An(t);if(arguments.length<2){var s=this.node();return i.local?s.getAttributeNS(i.space,i.local):s.getAttribute(i)}return this.each((e==null?i.local?cl:ul:typeof e=="function"?i.local?dl:pl:i.local?fl:hl)(i,e))}function xo(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ml(t){return function(){this.style.removeProperty(t)}}function vl(t,e,i){return function(){this.style.setProperty(t,e,i)}}function yl(t,e,i){return function(){var s=e.apply(this,arguments);s==null?this.style.removeProperty(t):this.style.setProperty(t,s,i)}}function xl(t,e,i){return arguments.length>1?this.each((e==null?ml:typeof e=="function"?yl:vl)(t,e,i??"")):Te(this.node(),t)}function Te(t,e){return t.style.getPropertyValue(e)||xo(t).getComputedStyle(t,null).getPropertyValue(e)}function wl(t){return function(){delete this[t]}}function bl(t,e){return function(){this[t]=e}}function _l(t,e){return function(){var i=e.apply(this,arguments);i==null?delete this[t]:this[t]=i}}function Tl(t,e){return arguments.length>1?this.each((e==null?wl:typeof e=="function"?_l:bl)(t,e)):this.node()[t]}function wo(t){return t.trim().split(/^|\s+/)}function Sr(t){return t.classList||new bo(t)}function bo(t){this._node=t,this._names=wo(t.getAttribute("class")||"")}bo.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function _o(t,e){for(var i=Sr(t),s=-1,l=e.length;++s<l;)i.add(e[s])}function To(t,e){for(var i=Sr(t),s=-1,l=e.length;++s<l;)i.remove(e[s])}function El(t){return function(){_o(this,t)}}function Sl(t){return function(){To(this,t)}}function Ml(t,e){return function(){(e.apply(this,arguments)?_o:To)(this,t)}}function kl(t,e){var i=wo(t+"");if(arguments.length<2){for(var s=Sr(this.node()),l=-1,h=i.length;++l<h;)if(!s.contains(i[l]))return!1;return!0}return this.each((typeof e=="function"?Ml:e?El:Sl)(i,e))}function Dl(){this.textContent=""}function Pl(t){return function(){this.textContent=t}}function zl(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Al(t){return arguments.length?this.each(t==null?Dl:(typeof t=="function"?zl:Pl)(t)):this.node().textContent}function Ol(){this.innerHTML=""}function Cl(t){return function(){this.innerHTML=t}}function Il(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Ll(t){return arguments.length?this.each(t==null?Ol:(typeof t=="function"?Il:Cl)(t)):this.node().innerHTML}function Rl(){this.nextSibling&&this.parentNode.appendChild(this)}function $l(){return this.each(Rl)}function Fl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Nl(){return this.each(Fl)}function jl(t){var e=typeof t=="function"?t:po(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Ul(){return null}function Yl(t,e){var i=typeof t=="function"?t:po(t),s=e==null?Ul:typeof e=="function"?e:Er(e);return this.select(function(){return this.insertBefore(i.apply(this,arguments),s.apply(this,arguments)||null)})}function Gl(){var t=this.parentNode;t&&t.removeChild(this)}function Hl(){return this.each(Gl)}function Bl(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Wl(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Xl(t){return this.select(t?Wl:Bl)}function Vl(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ql(t){return function(e){t.call(this,e,this.__data__)}}function Zl(t){return t.trim().split(/^|\s+/).map(function(e){var i="",s=e.indexOf(".");return s>=0&&(i=e.slice(s+1),e=e.slice(0,s)),{type:e,name:i}})}function Jl(t){return function(){var e=this.__on;if(e){for(var i=0,s=-1,l=e.length,h;i<l;++i)h=e[i],(!t.type||h.type===t.type)&&h.name===t.name?this.removeEventListener(h.type,h.listener,h.options):e[++s]=h;++s?e.length=s:delete this.__on}}}function Kl(t,e,i){return function(){var s=this.__on,l,h=ql(e);if(s){for(var f=0,g=s.length;f<g;++f)if((l=s[f]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.options),this.addEventListener(l.type,l.listener=h,l.options=i),l.value=e;return}}this.addEventListener(t.type,h,i),l={type:t.type,name:t.name,value:e,listener:h,options:i},s?s.push(l):this.__on=[l]}}function Ql(t,e,i){var s=Zl(t+""),l,h=s.length,f;if(arguments.length<2){var g=this.node().__on;if(g){for(var x=0,m=g.length,w;x<m;++x)for(l=0,w=g[x];l<h;++l)if((f=s[l]).type===w.type&&f.name===w.name)return w.value}return}for(g=e?Kl:Jl,l=0;l<h;++l)this.each(g(s[l],e,i));return this}function Eo(t,e,i){var s=xo(t),l=s.CustomEvent;typeof l=="function"?l=new l(e,i):(l=s.document.createEvent("Event"),i?(l.initEvent(e,i.bubbles,i.cancelable),l.detail=i.detail):l.initEvent(e,!1,!1)),t.dispatchEvent(l)}function tu(t,e){return function(){return Eo(this,t,e)}}function eu(t,e){return function(){return Eo(this,t,e.apply(this,arguments))}}function nu(t,e){return this.each((typeof e=="function"?eu:tu)(t,e))}function*ru(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var s=t[e],l=0,h=s.length,f;l<h;++l)(f=s[l])&&(yield f)}var So=[null];function At(t,e){this._groups=t,this._parents=e}function qe(){return new At([[document.documentElement]],So)}function iu(){return this}At.prototype=qe.prototype={constructor:At,select:za,selectAll:Ia,selectChild:Fa,selectChildren:Ya,filter:Ga,data:qa,enter:Ha,exit:Ja,join:Ka,merge:Qa,selection:iu,order:tl,sort:el,call:rl,nodes:il,node:ol,size:sl,empty:al,each:ll,attr:gl,style:xl,property:Tl,classed:kl,text:Al,html:Ll,raise:$l,lower:Nl,append:jl,insert:Yl,remove:Hl,clone:Xl,datum:Vl,on:Ql,dispatch:nu,[Symbol.iterator]:ru};function $t(t){return typeof t=="string"?new At([[document.querySelector(t)]],[document.documentElement]):new At([[t]],So)}function ou(t){let e;for(;e=t.sourceEvent;)t=e;return t}function se(t,e){if(t=ou(t),e===void 0&&(e=t.currentTarget),e){var i=e.ownerSVGElement||e;if(i.createSVGPoint){var s=i.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,s=s.matrixTransform(e.getScreenCTM().inverse()),[s.x,s.y]}if(e.getBoundingClientRect){var l=e.getBoundingClientRect();return[t.clientX-l.left-e.clientLeft,t.clientY-l.top-e.clientTop]}}return[t.pageX,t.pageY]}const pr={capture:!0,passive:!1};function dr(t){t.preventDefault(),t.stopImmediatePropagation()}function su(t){var e=t.document.documentElement,i=$t(t).on("dragstart.drag",dr,pr);"onselectstart"in e?i.on("selectstart.drag",dr,pr):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function au(t,e){var i=t.document.documentElement,s=$t(t).on("dragstart.drag",null);e&&(s.on("click.drag",dr,pr),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in i?s.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}function Mr(t,e,i){t.prototype=e.prototype=i,i.constructor=t}function Mo(t,e){var i=Object.create(t.prototype);for(var s in e)i[s]=e[s];return i}function Ze(){}var We=.7,_n=1/We,_e="\\s*([+-]?\\d+)\\s*",Xe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lu=/^#([0-9a-f]{3,8})$/,uu=new RegExp(`^rgb\\(${_e},${_e},${_e}\\)$`),cu=new RegExp(`^rgb\\(${Gt},${Gt},${Gt}\\)$`),hu=new RegExp(`^rgba\\(${_e},${_e},${_e},${Xe}\\)$`),fu=new RegExp(`^rgba\\(${Gt},${Gt},${Gt},${Xe}\\)$`),pu=new RegExp(`^hsl\\(${Xe},${Gt},${Gt}\\)$`),du=new RegExp(`^hsla\\(${Xe},${Gt},${Gt},${Xe}\\)$`),Ci={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Mr(Ze,he,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ii,formatHex:Ii,formatHex8:gu,formatHsl:mu,formatRgb:Li,toString:Li});function Ii(){return this.rgb().formatHex()}function gu(){return this.rgb().formatHex8()}function mu(){return ko(this).formatHsl()}function Li(){return this.rgb().formatRgb()}function he(t){var e,i;return t=(t+"").trim().toLowerCase(),(e=lu.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?Ri(e):i===3?new Pt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?fn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?fn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=uu.exec(t))?new Pt(e[1],e[2],e[3],1):(e=cu.exec(t))?new Pt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=hu.exec(t))?fn(e[1],e[2],e[3],e[4]):(e=fu.exec(t))?fn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=pu.exec(t))?Ni(e[1],e[2]/100,e[3]/100,1):(e=du.exec(t))?Ni(e[1],e[2]/100,e[3]/100,e[4]):Ci.hasOwnProperty(t)?Ri(Ci[t]):t==="transparent"?new Pt(NaN,NaN,NaN,0):null}function Ri(t){return new Pt(t>>16&255,t>>8&255,t&255,1)}function fn(t,e,i,s){return s<=0&&(t=e=i=NaN),new Pt(t,e,i,s)}function vu(t){return t instanceof Ze||(t=he(t)),t?(t=t.rgb(),new Pt(t.r,t.g,t.b,t.opacity)):new Pt}function gr(t,e,i,s){return arguments.length===1?vu(t):new Pt(t,e,i,s??1)}function Pt(t,e,i,s){this.r=+t,this.g=+e,this.b=+i,this.opacity=+s}Mr(Pt,gr,Mo(Ze,{brighter(t){return t=t==null?_n:Math.pow(_n,t),new Pt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?We:Math.pow(We,t),new Pt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Pt(ce(this.r),ce(this.g),ce(this.b),Tn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$i,formatHex:$i,formatHex8:yu,formatRgb:Fi,toString:Fi}));function $i(){return`#${ue(this.r)}${ue(this.g)}${ue(this.b)}`}function yu(){return`#${ue(this.r)}${ue(this.g)}${ue(this.b)}${ue((isNaN(this.opacity)?1:this.opacity)*255)}`}function Fi(){const t=Tn(this.opacity);return`${t===1?"rgb(":"rgba("}${ce(this.r)}, ${ce(this.g)}, ${ce(this.b)}${t===1?")":`, ${t})`}`}function Tn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ce(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ue(t){return t=ce(t),(t<16?"0":"")+t.toString(16)}function Ni(t,e,i,s){return s<=0?t=e=i=NaN:i<=0||i>=1?t=e=NaN:e<=0&&(t=NaN),new Ft(t,e,i,s)}function ko(t){if(t instanceof Ft)return new Ft(t.h,t.s,t.l,t.opacity);if(t instanceof Ze||(t=he(t)),!t)return new Ft;if(t instanceof Ft)return t;t=t.rgb();var e=t.r/255,i=t.g/255,s=t.b/255,l=Math.min(e,i,s),h=Math.max(e,i,s),f=NaN,g=h-l,x=(h+l)/2;return g?(e===h?f=(i-s)/g+(i<s)*6:i===h?f=(s-e)/g+2:f=(e-i)/g+4,g/=x<.5?h+l:2-h-l,f*=60):g=x>0&&x<1?0:f,new Ft(f,g,x,t.opacity)}function xu(t,e,i,s){return arguments.length===1?ko(t):new Ft(t,e,i,s??1)}function Ft(t,e,i,s){this.h=+t,this.s=+e,this.l=+i,this.opacity=+s}Mr(Ft,xu,Mo(Ze,{brighter(t){return t=t==null?_n:Math.pow(_n,t),new Ft(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?We:Math.pow(We,t),new Ft(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,s=i+(i<.5?i:1-i)*e,l=2*i-s;return new Pt(rr(t>=240?t-240:t+120,l,s),rr(t,l,s),rr(t<120?t+240:t-120,l,s),this.opacity)},clamp(){return new Ft(ji(this.h),pn(this.s),pn(this.l),Tn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Tn(this.opacity);return`${t===1?"hsl(":"hsla("}${ji(this.h)}, ${pn(this.s)*100}%, ${pn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ji(t){return t=(t||0)%360,t<0?t+360:t}function pn(t){return Math.max(0,Math.min(1,t||0))}function rr(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}const kr=t=>()=>t;function wu(t,e){return function(i){return t+i*e}}function bu(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(s){return Math.pow(t+s*e,i)}}function _u(t){return(t=+t)==1?Do:function(e,i){return i-e?bu(e,i,t):kr(isNaN(e)?i:e)}}function Do(t,e){var i=e-t;return i?wu(t,i):kr(isNaN(t)?e:t)}const En=(function t(e){var i=_u(e);function s(l,h){var f=i((l=gr(l)).r,(h=gr(h)).r),g=i(l.g,h.g),x=i(l.b,h.b),m=Do(l.opacity,h.opacity);return function(w){return l.r=f(w),l.g=g(w),l.b=x(w),l.opacity=m(w),l+""}}return s.gamma=t,s})(1);function Tu(t,e){e||(e=[]);var i=t?Math.min(e.length,t.length):0,s=e.slice(),l;return function(h){for(l=0;l<i;++l)s[l]=t[l]*(1-h)+e[l]*h;return s}}function Eu(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Su(t,e){var i=e?e.length:0,s=t?Math.min(i,t.length):0,l=new Array(s),h=new Array(i),f;for(f=0;f<s;++f)l[f]=Dr(t[f],e[f]);for(;f<i;++f)h[f]=e[f];return function(g){for(f=0;f<s;++f)h[f]=l[f](g);return h}}function Mu(t,e){var i=new Date;return t=+t,e=+e,function(s){return i.setTime(t*(1-s)+e*s),i}}function Rt(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function ku(t,e){var i={},s={},l;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(l in e)l in t?i[l]=Dr(t[l],e[l]):s[l]=e[l];return function(h){for(l in i)s[l]=i[l](h);return s}}var mr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ir=new RegExp(mr.source,"g");function Du(t){return function(){return t}}function Pu(t){return function(e){return t(e)+""}}function Po(t,e){var i=mr.lastIndex=ir.lastIndex=0,s,l,h,f=-1,g=[],x=[];for(t=t+"",e=e+"";(s=mr.exec(t))&&(l=ir.exec(e));)(h=l.index)>i&&(h=e.slice(i,h),g[f]?g[f]+=h:g[++f]=h),(s=s[0])===(l=l[0])?g[f]?g[f]+=l:g[++f]=l:(g[++f]=null,x.push({i:f,x:Rt(s,l)})),i=ir.lastIndex;return i<e.length&&(h=e.slice(i),g[f]?g[f]+=h:g[++f]=h),g.length<2?x[0]?Pu(x[0].x):Du(e):(e=x.length,function(m){for(var w=0,T;w<e;++w)g[(T=x[w]).i]=T.x(m);return g.join("")})}function Dr(t,e){var i=typeof e,s;return e==null||i==="boolean"?kr(e):(i==="number"?Rt:i==="string"?(s=he(e))?(e=s,En):Po:e instanceof he?En:e instanceof Date?Mu:Eu(e)?Tu:Array.isArray(e)?Su:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?ku:Rt)(t,e)}function zu(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}var Ui=180/Math.PI,zo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ao(t,e,i,s,l,h){var f,g,x;return(f=Math.sqrt(t*t+e*e))&&(t/=f,e/=f),(x=t*i+e*s)&&(i-=t*x,s-=e*x),(g=Math.sqrt(i*i+s*s))&&(i/=g,s/=g,x/=g),t*s<e*i&&(t=-t,e=-e,x=-x,f=-f),{translateX:l,translateY:h,rotate:Math.atan2(e,t)*Ui,skewX:Math.atan(x)*Ui,scaleX:f,scaleY:g}}var dn;function Au(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?zo:Ao(e.a,e.b,e.c,e.d,e.e,e.f)}function Ou(t){return t==null||(dn||(dn=document.createElementNS("http://www.w3.org/2000/svg","g")),dn.setAttribute("transform",t),!(t=dn.transform.baseVal.consolidate()))?zo:(t=t.matrix,Ao(t.a,t.b,t.c,t.d,t.e,t.f))}function Oo(t,e,i,s){function l(m){return m.length?m.pop()+" ":""}function h(m,w,T,E,k,F){if(m!==T||w!==E){var H=k.push("translate(",null,e,null,i);F.push({i:H-4,x:Rt(m,T)},{i:H-2,x:Rt(w,E)})}else(T||E)&&k.push("translate("+T+e+E+i)}function f(m,w,T,E){m!==w?(m-w>180?w+=360:w-m>180&&(m+=360),E.push({i:T.push(l(T)+"rotate(",null,s)-2,x:Rt(m,w)})):w&&T.push(l(T)+"rotate("+w+s)}function g(m,w,T,E){m!==w?E.push({i:T.push(l(T)+"skewX(",null,s)-2,x:Rt(m,w)}):w&&T.push(l(T)+"skewX("+w+s)}function x(m,w,T,E,k,F){if(m!==T||w!==E){var H=k.push(l(k)+"scale(",null,",",null,")");F.push({i:H-4,x:Rt(m,T)},{i:H-2,x:Rt(w,E)})}else(T!==1||E!==1)&&k.push(l(k)+"scale("+T+","+E+")")}return function(m,w){var T=[],E=[];return m=t(m),w=t(w),h(m.translateX,m.translateY,w.translateX,w.translateY,T,E),f(m.rotate,w.rotate,T,E),g(m.skewX,w.skewX,T,E),x(m.scaleX,m.scaleY,w.scaleX,w.scaleY,T,E),m=w=null,function(k){for(var F=-1,H=E.length,L;++F<H;)T[(L=E[F]).i]=L.x(k);return T.join("")}}}var Cu=Oo(Au,"px, ","px)","deg)"),Iu=Oo(Ou,", ",")",")"),Lu=1e-12;function Yi(t){return((t=Math.exp(t))+1/t)/2}function Ru(t){return((t=Math.exp(t))-1/t)/2}function $u(t){return((t=Math.exp(2*t))-1)/(t+1)}const Fu=(function t(e,i,s){function l(h,f){var g=h[0],x=h[1],m=h[2],w=f[0],T=f[1],E=f[2],k=w-g,F=T-x,H=k*k+F*F,L,j;if(H<Lu)j=Math.log(E/m)/e,L=function(S){return[g+S*k,x+S*F,m*Math.exp(e*S*j)]};else{var et=Math.sqrt(H),B=(E*E-m*m+s*H)/(2*m*i*et),nt=(E*E-m*m-s*H)/(2*E*i*et),it=Math.log(Math.sqrt(B*B+1)-B),Y=Math.log(Math.sqrt(nt*nt+1)-nt);j=(Y-it)/e,L=function(S){var yt=S*j,kt=Yi(it),xt=m/(i*et)*(kt*$u(e*yt+it)-Ru(it));return[g+xt*k,x+xt*F,m*kt/Yi(e*yt+it)]}}return L.duration=j*1e3*e/Math.SQRT2,L}return l.rho=function(h){var f=Math.max(.001,+h),g=f*f,x=g*g;return t(f,g,x)},l})(Math.SQRT2,2,4);var Ee=0,Ye=0,Re=0,Co=1e3,Sn,Ge,Mn=0,fe=0,On=0,Ve=typeof performance=="object"&&performance.now?performance:Date,Io=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Pr(){return fe||(Io(Nu),fe=Ve.now()+On)}function Nu(){fe=0}function kn(){this._call=this._time=this._next=null}kn.prototype=Lo.prototype={constructor:kn,restart:function(t,e,i){if(typeof t!="function")throw new TypeError("callback is not a function");i=(i==null?Pr():+i)+(e==null?0:+e),!this._next&&Ge!==this&&(Ge?Ge._next=this:Sn=this,Ge=this),this._call=t,this._time=i,vr()},stop:function(){this._call&&(this._call=null,this._time=1/0,vr())}};function Lo(t,e,i){var s=new kn;return s.restart(t,e,i),s}function ju(){Pr(),++Ee;for(var t=Sn,e;t;)(e=fe-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ee}function Gi(){fe=(Mn=Ve.now())+On,Ee=Ye=0;try{ju()}finally{Ee=0,Yu(),fe=0}}function Uu(){var t=Ve.now(),e=t-Mn;e>Co&&(On-=e,Mn=t)}function Yu(){for(var t,e=Sn,i,s=1/0;e;)e._call?(s>e._time&&(s=e._time),t=e,e=e._next):(i=e._next,e._next=null,e=t?t._next=i:Sn=i);Ge=t,vr(s)}function vr(t){if(!Ee){Ye&&(Ye=clearTimeout(Ye));var e=t-fe;e>24?(t<1/0&&(Ye=setTimeout(Gi,t-Ve.now()-On)),Re&&(Re=clearInterval(Re))):(Re||(Mn=Ve.now(),Re=setInterval(Uu,Co)),Ee=1,Io(Gi))}}function Hi(t,e,i){var s=new kn;return e=e==null?0:+e,s.restart(l=>{s.stop(),t(l+e)},e,i),s}var Gu=Tr("start","end","cancel","interrupt"),Hu=[],Ro=0,Bi=1,yr=2,yn=3,Wi=4,xr=5,xn=6;function Cn(t,e,i,s,l,h){var f=t.__transition;if(!f)t.__transition={};else if(i in f)return;Bu(t,i,{name:e,index:s,group:l,on:Gu,tween:Hu,time:h.time,delay:h.delay,duration:h.duration,ease:h.ease,timer:null,state:Ro})}function zr(t,e){var i=jt(t,e);if(i.state>Ro)throw new Error("too late; already scheduled");return i}function Ht(t,e){var i=jt(t,e);if(i.state>yn)throw new Error("too late; already running");return i}function jt(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function Bu(t,e,i){var s=t.__transition,l;s[e]=i,i.timer=Lo(h,0,i.time);function h(m){i.state=Bi,i.timer.restart(f,i.delay,i.time),i.delay<=m&&f(m-i.delay)}function f(m){var w,T,E,k;if(i.state!==Bi)return x();for(w in s)if(k=s[w],k.name===i.name){if(k.state===yn)return Hi(f);k.state===Wi?(k.state=xn,k.timer.stop(),k.on.call("interrupt",t,t.__data__,k.index,k.group),delete s[w]):+w<e&&(k.state=xn,k.timer.stop(),k.on.call("cancel",t,t.__data__,k.index,k.group),delete s[w])}if(Hi(function(){i.state===yn&&(i.state=Wi,i.timer.restart(g,i.delay,i.time),g(m))}),i.state=yr,i.on.call("start",t,t.__data__,i.index,i.group),i.state===yr){for(i.state=yn,l=new Array(E=i.tween.length),w=0,T=-1;w<E;++w)(k=i.tween[w].value.call(t,t.__data__,i.index,i.group))&&(l[++T]=k);l.length=T+1}}function g(m){for(var w=m<i.duration?i.ease.call(null,m/i.duration):(i.timer.restart(x),i.state=xr,1),T=-1,E=l.length;++T<E;)l[T].call(t,w);i.state===xr&&(i.on.call("end",t,t.__data__,i.index,i.group),x())}function x(){i.state=xn,i.timer.stop(),delete s[e];for(var m in s)return;delete t.__transition}}function wn(t,e){var i=t.__transition,s,l,h=!0,f;if(i){e=e==null?null:e+"";for(f in i){if((s=i[f]).name!==e){h=!1;continue}l=s.state>yr&&s.state<xr,s.state=xn,s.timer.stop(),s.on.call(l?"interrupt":"cancel",t,t.__data__,s.index,s.group),delete i[f]}h&&delete t.__transition}}function Wu(t){return this.each(function(){wn(this,t)})}function Xu(t,e){var i,s;return function(){var l=Ht(this,t),h=l.tween;if(h!==i){s=i=h;for(var f=0,g=s.length;f<g;++f)if(s[f].name===e){s=s.slice(),s.splice(f,1);break}}l.tween=s}}function Vu(t,e,i){var s,l;if(typeof i!="function")throw new Error;return function(){var h=Ht(this,t),f=h.tween;if(f!==s){l=(s=f).slice();for(var g={name:e,value:i},x=0,m=l.length;x<m;++x)if(l[x].name===e){l[x]=g;break}x===m&&l.push(g)}h.tween=l}}function qu(t,e){var i=this._id;if(t+="",arguments.length<2){for(var s=jt(this.node(),i).tween,l=0,h=s.length,f;l<h;++l)if((f=s[l]).name===t)return f.value;return null}return this.each((e==null?Xu:Vu)(i,t,e))}function Ar(t,e,i){var s=t._id;return t.each(function(){var l=Ht(this,s);(l.value||(l.value={}))[e]=i.apply(this,arguments)}),function(l){return jt(l,s).value[e]}}function $o(t,e){var i;return(typeof e=="number"?Rt:e instanceof he?En:(i=he(e))?(e=i,En):Po)(t,e)}function Zu(t){return function(){this.removeAttribute(t)}}function Ju(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ku(t,e,i){var s,l=i+"",h;return function(){var f=this.getAttribute(t);return f===l?null:f===s?h:h=e(s=f,i)}}function Qu(t,e,i){var s,l=i+"",h;return function(){var f=this.getAttributeNS(t.space,t.local);return f===l?null:f===s?h:h=e(s=f,i)}}function tc(t,e,i){var s,l,h;return function(){var f,g=i(this),x;return g==null?void this.removeAttribute(t):(f=this.getAttribute(t),x=g+"",f===x?null:f===s&&x===l?h:(l=x,h=e(s=f,g)))}}function ec(t,e,i){var s,l,h;return function(){var f,g=i(this),x;return g==null?void this.removeAttributeNS(t.space,t.local):(f=this.getAttributeNS(t.space,t.local),x=g+"",f===x?null:f===s&&x===l?h:(l=x,h=e(s=f,g)))}}function nc(t,e){var i=An(t),s=i==="transform"?Iu:$o;return this.attrTween(t,typeof e=="function"?(i.local?ec:tc)(i,s,Ar(this,"attr."+t,e)):e==null?(i.local?Ju:Zu)(i):(i.local?Qu:Ku)(i,s,e))}function rc(t,e){return function(i){this.setAttribute(t,e.call(this,i))}}function ic(t,e){return function(i){this.setAttributeNS(t.space,t.local,e.call(this,i))}}function oc(t,e){var i,s;function l(){var h=e.apply(this,arguments);return h!==s&&(i=(s=h)&&ic(t,h)),i}return l._value=e,l}function sc(t,e){var i,s;function l(){var h=e.apply(this,arguments);return h!==s&&(i=(s=h)&&rc(t,h)),i}return l._value=e,l}function ac(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;var s=An(t);return this.tween(i,(s.local?oc:sc)(s,e))}function lc(t,e){return function(){zr(this,t).delay=+e.apply(this,arguments)}}function uc(t,e){return e=+e,function(){zr(this,t).delay=e}}function cc(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?lc:uc)(e,t)):jt(this.node(),e).delay}function hc(t,e){return function(){Ht(this,t).duration=+e.apply(this,arguments)}}function fc(t,e){return e=+e,function(){Ht(this,t).duration=e}}function pc(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?hc:fc)(e,t)):jt(this.node(),e).duration}function dc(t,e){if(typeof e!="function")throw new Error;return function(){Ht(this,t).ease=e}}function gc(t){var e=this._id;return arguments.length?this.each(dc(e,t)):jt(this.node(),e).ease}function mc(t,e){return function(){var i=e.apply(this,arguments);if(typeof i!="function")throw new Error;Ht(this,t).ease=i}}function vc(t){if(typeof t!="function")throw new Error;return this.each(mc(this._id,t))}function yc(t){typeof t!="function"&&(t=mo(t));for(var e=this._groups,i=e.length,s=new Array(i),l=0;l<i;++l)for(var h=e[l],f=h.length,g=s[l]=[],x,m=0;m<f;++m)(x=h[m])&&t.call(x,x.__data__,m,h)&&g.push(x);return new Kt(s,this._parents,this._name,this._id)}function xc(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,s=e.length,l=i.length,h=Math.min(s,l),f=new Array(s),g=0;g<h;++g)for(var x=e[g],m=i[g],w=x.length,T=f[g]=new Array(w),E,k=0;k<w;++k)(E=x[k]||m[k])&&(T[k]=E);for(;g<s;++g)f[g]=e[g];return new Kt(f,this._parents,this._name,this._id)}function wc(t){return(t+"").trim().split(/^|\s+/).every(function(e){var i=e.indexOf(".");return i>=0&&(e=e.slice(0,i)),!e||e==="start"})}function bc(t,e,i){var s,l,h=wc(e)?zr:Ht;return function(){var f=h(this,t),g=f.on;g!==s&&(l=(s=g).copy()).on(e,i),f.on=l}}function _c(t,e){var i=this._id;return arguments.length<2?jt(this.node(),i).on.on(t):this.each(bc(i,t,e))}function Tc(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;e&&e.removeChild(this)}}function Ec(){return this.on("end.remove",Tc(this._id))}function Sc(t){var e=this._name,i=this._id;typeof t!="function"&&(t=Er(t));for(var s=this._groups,l=s.length,h=new Array(l),f=0;f<l;++f)for(var g=s[f],x=g.length,m=h[f]=new Array(x),w,T,E=0;E<x;++E)(w=g[E])&&(T=t.call(w,w.__data__,E,g))&&("__data__"in w&&(T.__data__=w.__data__),m[E]=T,Cn(m[E],e,i,E,m,jt(w,i)));return new Kt(h,this._parents,e,i)}function Mc(t){var e=this._name,i=this._id;typeof t!="function"&&(t=go(t));for(var s=this._groups,l=s.length,h=[],f=[],g=0;g<l;++g)for(var x=s[g],m=x.length,w,T=0;T<m;++T)if(w=x[T]){for(var E=t.call(w,w.__data__,T,x),k,F=jt(w,i),H=0,L=E.length;H<L;++H)(k=E[H])&&Cn(k,e,i,H,E,F);h.push(E),f.push(w)}return new Kt(h,f,e,i)}var kc=qe.prototype.constructor;function Dc(){return new kc(this._groups,this._parents)}function Pc(t,e){var i,s,l;return function(){var h=Te(this,t),f=(this.style.removeProperty(t),Te(this,t));return h===f?null:h===i&&f===s?l:l=e(i=h,s=f)}}function Fo(t){return function(){this.style.removeProperty(t)}}function zc(t,e,i){var s,l=i+"",h;return function(){var f=Te(this,t);return f===l?null:f===s?h:h=e(s=f,i)}}function Ac(t,e,i){var s,l,h;return function(){var f=Te(this,t),g=i(this),x=g+"";return g==null&&(x=g=(this.style.removeProperty(t),Te(this,t))),f===x?null:f===s&&x===l?h:(l=x,h=e(s=f,g))}}function Oc(t,e){var i,s,l,h="style."+e,f="end."+h,g;return function(){var x=Ht(this,t),m=x.on,w=x.value[h]==null?g||(g=Fo(e)):void 0;(m!==i||l!==w)&&(s=(i=m).copy()).on(f,l=w),x.on=s}}function Cc(t,e,i){var s=(t+="")=="transform"?Cu:$o;return e==null?this.styleTween(t,Pc(t,s)).on("end.style."+t,Fo(t)):typeof e=="function"?this.styleTween(t,Ac(t,s,Ar(this,"style."+t,e))).each(Oc(this._id,t)):this.styleTween(t,zc(t,s,e),i).on("end.style."+t,null)}function Ic(t,e,i){return function(s){this.style.setProperty(t,e.call(this,s),i)}}function Lc(t,e,i){var s,l;function h(){var f=e.apply(this,arguments);return f!==l&&(s=(l=f)&&Ic(t,f,i)),s}return h._value=e,h}function Rc(t,e,i){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(e==null)return this.tween(s,null);if(typeof e!="function")throw new Error;return this.tween(s,Lc(t,e,i??""))}function $c(t){return function(){this.textContent=t}}function Fc(t){return function(){var e=t(this);this.textContent=e??""}}function Nc(t){return this.tween("text",typeof t=="function"?Fc(Ar(this,"text",t)):$c(t==null?"":t+""))}function jc(t){return function(e){this.textContent=t.call(this,e)}}function Uc(t){var e,i;function s(){var l=t.apply(this,arguments);return l!==i&&(e=(i=l)&&jc(l)),e}return s._value=t,s}function Yc(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Uc(t))}function Gc(){for(var t=this._name,e=this._id,i=No(),s=this._groups,l=s.length,h=0;h<l;++h)for(var f=s[h],g=f.length,x,m=0;m<g;++m)if(x=f[m]){var w=jt(x,e);Cn(x,t,i,m,f,{time:w.time+w.delay+w.duration,delay:0,duration:w.duration,ease:w.ease})}return new Kt(s,this._parents,t,i)}function Hc(){var t,e,i=this,s=i._id,l=i.size();return new Promise(function(h,f){var g={value:f},x={value:function(){--l===0&&h()}};i.each(function(){var m=Ht(this,s),w=m.on;w!==t&&(e=(t=w).copy(),e._.cancel.push(g),e._.interrupt.push(g),e._.end.push(x)),m.on=e}),l===0&&h()})}var Bc=0;function Kt(t,e,i,s){this._groups=t,this._parents=e,this._name=i,this._id=s}function No(){return++Bc}var Vt=qe.prototype;Kt.prototype={constructor:Kt,select:Sc,selectAll:Mc,selectChild:Vt.selectChild,selectChildren:Vt.selectChildren,filter:yc,merge:xc,selection:Dc,transition:Gc,call:Vt.call,nodes:Vt.nodes,node:Vt.node,size:Vt.size,empty:Vt.empty,each:Vt.each,on:_c,attr:nc,attrTween:ac,style:Cc,styleTween:Rc,text:Nc,textTween:Yc,remove:Ec,tween:qu,delay:cc,duration:pc,ease:gc,easeVarying:vc,end:Hc,[Symbol.iterator]:Vt[Symbol.iterator]};const Wc=t=>+t;function Xc(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Vc={time:null,delay:0,duration:250,ease:Xc};function qc(t,e){for(var i;!(i=t.__transition)||!(i=i[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return i}function Zc(t){var e,i;t instanceof Kt?(e=t._id,t=t._name):(e=No(),(i=Vc).time=Pr(),t=t==null?null:t+"");for(var s=this._groups,l=s.length,h=0;h<l;++h)for(var f=s[h],g=f.length,x,m=0;m<g;++m)(x=f[m])&&Cn(x,t,e,m,f,i||qc(x,e));return new Kt(s,this._parents,t,e)}qe.prototype.interrupt=Wu;qe.prototype.transition=Zc;function Jc(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Kc(t){return function(){return t}}function Qc(t){return+t}var Xi=[0,1];function xe(t){return t}function wr(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:Kc(isNaN(e)?NaN:.5)}function th(t,e){var i;return t>e&&(i=t,t=e,e=i),function(s){return Math.max(t,Math.min(e,s))}}function eh(t,e,i){var s=t[0],l=t[1],h=e[0],f=e[1];return l<s?(s=wr(l,s),h=i(f,h)):(s=wr(s,l),h=i(h,f)),function(g){return h(s(g))}}function nh(t,e,i){var s=Math.min(t.length,e.length)-1,l=new Array(s),h=new Array(s),f=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++f<s;)l[f]=wr(t[f],t[f+1]),h[f]=i(e[f],e[f+1]);return function(g){var x=fa(t,g,1,s)-1;return h[x](l[x](g))}}function rh(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ih(){var t=Xi,e=Xi,i=Dr,s,l,h,f=xe,g,x,m;function w(){var E=Math.min(t.length,e.length);return f!==xe&&(f=th(t[0],t[E-1])),g=E>2?nh:eh,x=m=null,T}function T(E){return E==null||isNaN(E=+E)?h:(x||(x=g(t.map(s),e,i)))(s(f(E)))}return T.invert=function(E){return f(l((m||(m=g(e,t.map(s),Rt)))(E)))},T.domain=function(E){return arguments.length?(t=Array.from(E,Qc),w()):t.slice()},T.range=function(E){return arguments.length?(e=Array.from(E),w()):e.slice()},T.rangeRound=function(E){return e=Array.from(E),i=zu,w()},T.clamp=function(E){return arguments.length?(f=E?!0:xe,w()):f!==xe},T.interpolate=function(E){return arguments.length?(i=E,w()):i},T.unknown=function(E){return arguments.length?(h=E,T):h},function(E,k){return s=E,l=k,w()}}function oh(){return ih()(xe,xe)}function sh(t,e){t=t.slice();var i=0,s=t.length-1,l=t[i],h=t[s],f;return h<l&&(f=i,i=s,s=f,f=l,l=h,h=f),t[i]=e.floor(l),t[s]=e.ceil(h),t}const or=new Date,sr=new Date;function gt(t,e,i,s){function l(h){return t(h=arguments.length===0?new Date:new Date(+h)),h}return l.floor=h=>(t(h=new Date(+h)),h),l.ceil=h=>(t(h=new Date(h-1)),e(h,1),t(h),h),l.round=h=>{const f=l(h),g=l.ceil(h);return h-f<g-h?f:g},l.offset=(h,f)=>(e(h=new Date(+h),f==null?1:Math.floor(f)),h),l.range=(h,f,g)=>{const x=[];if(h=l.ceil(h),g=g==null?1:Math.floor(g),!(h<f)||!(g>0))return x;let m;do x.push(m=new Date(+h)),e(h,g),t(h);while(m<h&&h<f);return x},l.filter=h=>gt(f=>{if(f>=f)for(;t(f),!h(f);)f.setTime(f-1)},(f,g)=>{if(f>=f)if(g<0)for(;++g<=0;)for(;e(f,-1),!h(f););else for(;--g>=0;)for(;e(f,1),!h(f););}),i&&(l.count=(h,f)=>(or.setTime(+h),sr.setTime(+f),t(or),t(sr),Math.floor(i(or,sr))),l.every=h=>(h=Math.floor(h),!isFinite(h)||!(h>0)?null:h>1?l.filter(s?f=>s(f)%h===0:f=>l.count(0,f)%h===0):l)),l}const Dn=gt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Dn.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?gt(e=>{e.setTime(Math.floor(e/t)*t)},(e,i)=>{e.setTime(+e+i*t)},(e,i)=>(i-e)/t):Dn);Dn.range;const Zt=1e3,It=Zt*60,Jt=It*60,Qt=Jt*24,Or=Qt*7,Vi=Qt*30,ar=Qt*365,we=gt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Zt)},(t,e)=>(e-t)/Zt,t=>t.getUTCSeconds());we.range;const Cr=gt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Zt)},(t,e)=>{t.setTime(+t+e*It)},(t,e)=>(e-t)/It,t=>t.getMinutes());Cr.range;const ah=gt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*It)},(t,e)=>(e-t)/It,t=>t.getUTCMinutes());ah.range;const Ir=gt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Zt-t.getMinutes()*It)},(t,e)=>{t.setTime(+t+e*Jt)},(t,e)=>(e-t)/Jt,t=>t.getHours());Ir.range;const lh=gt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Jt)},(t,e)=>(e-t)/Jt,t=>t.getUTCHours());lh.range;const Je=gt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*It)/Qt,t=>t.getDate()-1);Je.range;const Lr=gt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Qt,t=>t.getUTCDate()-1);Lr.range;const uh=gt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Qt,t=>Math.floor(t/Qt));uh.range;function de(t){return gt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,i)=>{e.setDate(e.getDate()+i*7)},(e,i)=>(i-e-(i.getTimezoneOffset()-e.getTimezoneOffset())*It)/Or)}const In=de(0),Pn=de(1),ch=de(2),hh=de(3),Se=de(4),fh=de(5),ph=de(6);In.range;Pn.range;ch.range;hh.range;Se.range;fh.range;ph.range;function ge(t){return gt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,i)=>{e.setUTCDate(e.getUTCDate()+i*7)},(e,i)=>(i-e)/Or)}const jo=ge(0),zn=ge(1),dh=ge(2),gh=ge(3),Me=ge(4),mh=ge(5),vh=ge(6);jo.range;zn.range;dh.range;gh.range;Me.range;mh.range;vh.range;const Rr=gt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Rr.range;const yh=gt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());yh.range;const te=gt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());te.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:gt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,i)=>{e.setFullYear(e.getFullYear()+i*t)});te.range;const pe=gt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());pe.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:gt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,i)=>{e.setUTCFullYear(e.getUTCFullYear()+i*t)});pe.range;function xh(t,e,i,s,l,h){const f=[[we,1,Zt],[we,5,5*Zt],[we,15,15*Zt],[we,30,30*Zt],[h,1,It],[h,5,5*It],[h,15,15*It],[h,30,30*It],[l,1,Jt],[l,3,3*Jt],[l,6,6*Jt],[l,12,12*Jt],[s,1,Qt],[s,2,2*Qt],[i,1,Or],[e,1,Vi],[e,3,3*Vi],[t,1,ar]];function g(m,w,T){const E=w<m;E&&([m,w]=[w,m]);const k=T&&typeof T.range=="function"?T:x(m,w,T),F=k?k.range(m,+w+1):[];return E?F.reverse():F}function x(m,w,T){const E=Math.abs(w-m)/T,k=_r(([,,L])=>L).right(f,E);if(k===f.length)return t.every(Di(m/ar,w/ar,T));if(k===0)return Dn.every(Math.max(Di(m,w,T),1));const[F,H]=f[E/f[k-1][2]<f[k][2]/E?k-1:k];return F.every(H)}return[g,x]}const[wh,bh]=xh(te,Rr,In,Je,Ir,Cr);function lr(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function ur(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function $e(t,e,i){return{y:t,m:e,d:i,H:0,M:0,S:0,L:0}}function _h(t){var e=t.dateTime,i=t.date,s=t.time,l=t.periods,h=t.days,f=t.shortDays,g=t.months,x=t.shortMonths,m=Fe(l),w=Ne(l),T=Fe(h),E=Ne(h),k=Fe(f),F=Ne(f),H=Fe(g),L=Ne(g),j=Fe(x),et=Ne(x),B={a:U,A:Z,b:W,B:q,c:null,d:to,e:to,f:Bh,g:ef,G:rf,H:Yh,I:Gh,j:Hh,L:Uo,m:Wh,M:Xh,p:ot,q:lt,Q:ro,s:io,S:Vh,u:qh,U:Zh,V:Jh,w:Kh,W:Qh,x:null,X:null,y:tf,Y:nf,Z:of,"%":no},nt={a:bt,A:ft,b:wt,B:Et,c:null,d:eo,e:eo,f:uf,g:xf,G:bf,H:sf,I:af,j:lf,L:Go,m:cf,M:hf,p:_t,q:Dt,Q:ro,s:io,S:ff,u:pf,U:df,V:gf,w:mf,W:vf,x:null,X:null,y:yf,Y:wf,Z:_f,"%":no},it={a:xt,A:Ct,b:ut,B:Tt,c:M,d:Ki,e:Ki,f:Fh,g:Ji,G:Zi,H:Qi,I:Qi,j:Ih,L:$h,m:Ch,M:Lh,p:kt,q:Oh,Q:jh,s:Uh,S:Rh,u:kh,U:Dh,V:Ph,w:Mh,W:zh,x:R,X:z,y:Ji,Y:Zi,Z:Ah,"%":Nh};B.x=Y(i,B),B.X=Y(s,B),B.c=Y(e,B),nt.x=Y(i,nt),nt.X=Y(s,nt),nt.c=Y(e,nt);function Y(P,Q){return function(tt){var C=[],mt=-1,at=0,dt=P.length,pt,Ut,ee;for(tt instanceof Date||(tt=new Date(+tt));++mt<dt;)P.charCodeAt(mt)===37&&(C.push(P.slice(at,mt)),(Ut=qi[pt=P.charAt(++mt)])!=null?pt=P.charAt(++mt):Ut=pt==="e"?" ":"0",(ee=Q[pt])&&(pt=ee(tt,Ut)),C.push(pt),at=mt+1);return C.push(P.slice(at,mt)),C.join("")}}function S(P,Q){return function(tt){var C=$e(1900,void 0,1),mt=yt(C,P,tt+="",0),at,dt;if(mt!=tt.length)return null;if("Q"in C)return new Date(C.Q);if("s"in C)return new Date(C.s*1e3+("L"in C?C.L:0));if(Q&&!("Z"in C)&&(C.Z=0),"p"in C&&(C.H=C.H%12+C.p*12),C.m===void 0&&(C.m="q"in C?C.q:0),"V"in C){if(C.V<1||C.V>53)return null;"w"in C||(C.w=1),"Z"in C?(at=ur($e(C.y,0,1)),dt=at.getUTCDay(),at=dt>4||dt===0?zn.ceil(at):zn(at),at=Lr.offset(at,(C.V-1)*7),C.y=at.getUTCFullYear(),C.m=at.getUTCMonth(),C.d=at.getUTCDate()+(C.w+6)%7):(at=lr($e(C.y,0,1)),dt=at.getDay(),at=dt>4||dt===0?Pn.ceil(at):Pn(at),at=Je.offset(at,(C.V-1)*7),C.y=at.getFullYear(),C.m=at.getMonth(),C.d=at.getDate()+(C.w+6)%7)}else("W"in C||"U"in C)&&("w"in C||(C.w="u"in C?C.u%7:"W"in C?1:0),dt="Z"in C?ur($e(C.y,0,1)).getUTCDay():lr($e(C.y,0,1)).getDay(),C.m=0,C.d="W"in C?(C.w+6)%7+C.W*7-(dt+5)%7:C.w+C.U*7-(dt+6)%7);return"Z"in C?(C.H+=C.Z/100|0,C.M+=C.Z%100,ur(C)):lr(C)}}function yt(P,Q,tt,C){for(var mt=0,at=Q.length,dt=tt.length,pt,Ut;mt<at;){if(C>=dt)return-1;if(pt=Q.charCodeAt(mt++),pt===37){if(pt=Q.charAt(mt++),Ut=it[pt in qi?Q.charAt(mt++):pt],!Ut||(C=Ut(P,tt,C))<0)return-1}else if(pt!=tt.charCodeAt(C++))return-1}return C}function kt(P,Q,tt){var C=m.exec(Q.slice(tt));return C?(P.p=w.get(C[0].toLowerCase()),tt+C[0].length):-1}function xt(P,Q,tt){var C=k.exec(Q.slice(tt));return C?(P.w=F.get(C[0].toLowerCase()),tt+C[0].length):-1}function Ct(P,Q,tt){var C=T.exec(Q.slice(tt));return C?(P.w=E.get(C[0].toLowerCase()),tt+C[0].length):-1}function ut(P,Q,tt){var C=j.exec(Q.slice(tt));return C?(P.m=et.get(C[0].toLowerCase()),tt+C[0].length):-1}function Tt(P,Q,tt){var C=H.exec(Q.slice(tt));return C?(P.m=L.get(C[0].toLowerCase()),tt+C[0].length):-1}function M(P,Q,tt){return yt(P,e,Q,tt)}function R(P,Q,tt){return yt(P,i,Q,tt)}function z(P,Q,tt){return yt(P,s,Q,tt)}function U(P){return f[P.getDay()]}function Z(P){return h[P.getDay()]}function W(P){return x[P.getMonth()]}function q(P){return g[P.getMonth()]}function ot(P){return l[+(P.getHours()>=12)]}function lt(P){return 1+~~(P.getMonth()/3)}function bt(P){return f[P.getUTCDay()]}function ft(P){return h[P.getUTCDay()]}function wt(P){return x[P.getUTCMonth()]}function Et(P){return g[P.getUTCMonth()]}function _t(P){return l[+(P.getUTCHours()>=12)]}function Dt(P){return 1+~~(P.getUTCMonth()/3)}return{format:function(P){var Q=Y(P+="",B);return Q.toString=function(){return P},Q},parse:function(P){var Q=S(P+="",!1);return Q.toString=function(){return P},Q},utcFormat:function(P){var Q=Y(P+="",nt);return Q.toString=function(){return P},Q},utcParse:function(P){var Q=S(P+="",!0);return Q.toString=function(){return P},Q}}}var qi={"-":"",_:" ",0:"0"},vt=/^\s*\d+/,Th=/^%/,Eh=/[\\^$*+?|[\]().{}]/g;function st(t,e,i){var s=t<0?"-":"",l=(s?-t:t)+"",h=l.length;return s+(h<i?new Array(i-h+1).join(e)+l:l)}function Sh(t){return t.replace(Eh,"\\$&")}function Fe(t){return new RegExp("^(?:"+t.map(Sh).join("|")+")","i")}function Ne(t){return new Map(t.map((e,i)=>[e.toLowerCase(),i]))}function Mh(t,e,i){var s=vt.exec(e.slice(i,i+1));return s?(t.w=+s[0],i+s[0].length):-1}function kh(t,e,i){var s=vt.exec(e.slice(i,i+1));return s?(t.u=+s[0],i+s[0].length):-1}function Dh(t,e,i){var s=vt.exec(e.slice(i,i+2));return s?(t.U=+s[0],i+s[0].length):-1}function Ph(t,e,i){var s=vt.exec(e.slice(i,i+2));return s?(t.V=+s[0],i+s[0].length):-1}function zh(t,e,i){var s=vt.exec(e.slice(i,i+2));return s?(t.W=+s[0],i+s[0].length):-1}function Zi(t,e,i){var s=vt.exec(e.slice(i,i+4));return s?(t.y=+s[0],i+s[0].length):-1}function Ji(t,e,i){var s=vt.exec(e.slice(i,i+2));return s?(t.y=+s[0]+(+s[0]>68?1900:2e3),i+s[0].length):-1}function Ah(t,e,i){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(i,i+6));return s?(t.Z=s[1]?0:-(s[2]+(s[3]||"00")),i+s[0].length):-1}function Oh(t,e,i){var s=vt.exec(e.slice(i,i+1));return s?(t.q=s[0]*3-3,i+s[0].length):-1}function Ch(t,e,i){var s=vt.exec(e.slice(i,i+2));return s?(t.m=s[0]-1,i+s[0].length):-1}function Ki(t,e,i){var s=vt.exec(e.slice(i,i+2));return s?(t.d=+s[0],i+s[0].length):-1}function Ih(t,e,i){var s=vt.exec(e.slice(i,i+3));return s?(t.m=0,t.d=+s[0],i+s[0].length):-1}function Qi(t,e,i){var s=vt.exec(e.slice(i,i+2));return s?(t.H=+s[0],i+s[0].length):-1}function Lh(t,e,i){var s=vt.exec(e.slice(i,i+2));return s?(t.M=+s[0],i+s[0].length):-1}function Rh(t,e,i){var s=vt.exec(e.slice(i,i+2));return s?(t.S=+s[0],i+s[0].length):-1}function $h(t,e,i){var s=vt.exec(e.slice(i,i+3));return s?(t.L=+s[0],i+s[0].length):-1}function Fh(t,e,i){var s=vt.exec(e.slice(i,i+6));return s?(t.L=Math.floor(s[0]/1e3),i+s[0].length):-1}function Nh(t,e,i){var s=Th.exec(e.slice(i,i+1));return s?i+s[0].length:-1}function jh(t,e,i){var s=vt.exec(e.slice(i));return s?(t.Q=+s[0],i+s[0].length):-1}function Uh(t,e,i){var s=vt.exec(e.slice(i));return s?(t.s=+s[0],i+s[0].length):-1}function to(t,e){return st(t.getDate(),e,2)}function Yh(t,e){return st(t.getHours(),e,2)}function Gh(t,e){return st(t.getHours()%12||12,e,2)}function Hh(t,e){return st(1+Je.count(te(t),t),e,3)}function Uo(t,e){return st(t.getMilliseconds(),e,3)}function Bh(t,e){return Uo(t,e)+"000"}function Wh(t,e){return st(t.getMonth()+1,e,2)}function Xh(t,e){return st(t.getMinutes(),e,2)}function Vh(t,e){return st(t.getSeconds(),e,2)}function qh(t){var e=t.getDay();return e===0?7:e}function Zh(t,e){return st(In.count(te(t)-1,t),e,2)}function Yo(t){var e=t.getDay();return e>=4||e===0?Se(t):Se.ceil(t)}function Jh(t,e){return t=Yo(t),st(Se.count(te(t),t)+(te(t).getDay()===4),e,2)}function Kh(t){return t.getDay()}function Qh(t,e){return st(Pn.count(te(t)-1,t),e,2)}function tf(t,e){return st(t.getFullYear()%100,e,2)}function ef(t,e){return t=Yo(t),st(t.getFullYear()%100,e,2)}function nf(t,e){return st(t.getFullYear()%1e4,e,4)}function rf(t,e){var i=t.getDay();return t=i>=4||i===0?Se(t):Se.ceil(t),st(t.getFullYear()%1e4,e,4)}function of(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+st(e/60|0,"0",2)+st(e%60,"0",2)}function eo(t,e){return st(t.getUTCDate(),e,2)}function sf(t,e){return st(t.getUTCHours(),e,2)}function af(t,e){return st(t.getUTCHours()%12||12,e,2)}function lf(t,e){return st(1+Lr.count(pe(t),t),e,3)}function Go(t,e){return st(t.getUTCMilliseconds(),e,3)}function uf(t,e){return Go(t,e)+"000"}function cf(t,e){return st(t.getUTCMonth()+1,e,2)}function hf(t,e){return st(t.getUTCMinutes(),e,2)}function ff(t,e){return st(t.getUTCSeconds(),e,2)}function pf(t){var e=t.getUTCDay();return e===0?7:e}function df(t,e){return st(jo.count(pe(t)-1,t),e,2)}function Ho(t){var e=t.getUTCDay();return e>=4||e===0?Me(t):Me.ceil(t)}function gf(t,e){return t=Ho(t),st(Me.count(pe(t),t)+(pe(t).getUTCDay()===4),e,2)}function mf(t){return t.getUTCDay()}function vf(t,e){return st(zn.count(pe(t)-1,t),e,2)}function yf(t,e){return st(t.getUTCFullYear()%100,e,2)}function xf(t,e){return t=Ho(t),st(t.getUTCFullYear()%100,e,2)}function wf(t,e){return st(t.getUTCFullYear()%1e4,e,4)}function bf(t,e){var i=t.getUTCDay();return t=i>=4||i===0?Me(t):Me.ceil(t),st(t.getUTCFullYear()%1e4,e,4)}function _f(){return"+0000"}function no(){return"%"}function ro(t){return+t}function io(t){return Math.floor(+t/1e3)}var ye,Bo;br({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function br(t){return ye=_h(t),Bo=ye.format,ye.parse,ye.utcFormat,ye.utcParse,ye}function Tf(t){return new Date(t)}function Ef(t){return t instanceof Date?+t:+new Date(+t)}function Wo(t,e,i,s,l,h,f,g,x,m){var w=oh(),T=w.invert,E=w.domain,k=m(".%L"),F=m(":%S"),H=m("%I:%M"),L=m("%I %p"),j=m("%a %d"),et=m("%b %d"),B=m("%B"),nt=m("%Y");function it(Y){return(x(Y)<Y?k:g(Y)<Y?F:f(Y)<Y?H:h(Y)<Y?L:s(Y)<Y?l(Y)<Y?j:et:i(Y)<Y?B:nt)(Y)}return w.invert=function(Y){return new Date(T(Y))},w.domain=function(Y){return arguments.length?E(Array.from(Y,Ef)):E().map(Tf)},w.ticks=function(Y){var S=E();return t(S[0],S[S.length-1],Y??10)},w.tickFormat=function(Y,S){return S==null?it:m(S)},w.nice=function(Y){var S=E();return(!Y||typeof Y.range!="function")&&(Y=e(S[0],S[S.length-1],Y??10)),Y?E(sh(S,Y)):w},w.copy=function(){return rh(w,Wo(t,e,i,s,l,h,f,g,x,m))},w}function Sf(){return Jc.apply(Wo(wh,bh,te,Rr,In,Je,Ir,Cr,we,Bo).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}const gn=t=>()=>t;function Mf(t,{sourceEvent:e,target:i,transform:s,dispatch:l}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:l}})}function Nt(t,e,i){this.k=t,this.x=e,this.y=i}Nt.prototype={constructor:Nt,scale:function(t){return t===1?this:new Nt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Nt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var $r=new Nt(1,0,0);Nt.prototype;function cr(t){t.stopImmediatePropagation()}function je(t){t.preventDefault(),t.stopImmediatePropagation()}function kf(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Df(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function oo(){return this.__zoom||$r}function Pf(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function zf(){return navigator.maxTouchPoints||"ontouchstart"in this}function Af(t,e,i){var s=t.invertX(e[0][0])-i[0][0],l=t.invertX(e[1][0])-i[1][0],h=t.invertY(e[0][1])-i[0][1],f=t.invertY(e[1][1])-i[1][1];return t.translate(l>s?(s+l)/2:Math.min(0,s)||Math.max(0,l),f>h?(h+f)/2:Math.min(0,h)||Math.max(0,f))}function Of(){var t=kf,e=Df,i=Af,s=Pf,l=zf,h=[0,1/0],f=[[-1/0,-1/0],[1/0,1/0]],g=250,x=Fu,m=Tr("start","zoom","end"),w,T,E,k=500,F=150,H=0,L=10;function j(M){M.property("__zoom",oo).on("wheel.zoom",yt,{passive:!1}).on("mousedown.zoom",kt).on("dblclick.zoom",xt).filter(l).on("touchstart.zoom",Ct).on("touchmove.zoom",ut).on("touchend.zoom touchcancel.zoom",Tt).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}j.transform=function(M,R,z,U){var Z=M.selection?M.selection():M;Z.property("__zoom",oo),M!==Z?it(M,R,z,U):Z.interrupt().each(function(){Y(this,arguments).event(U).start().zoom(null,typeof R=="function"?R.apply(this,arguments):R).end()})},j.scaleBy=function(M,R,z,U){j.scaleTo(M,function(){var Z=this.__zoom.k,W=typeof R=="function"?R.apply(this,arguments):R;return Z*W},z,U)},j.scaleTo=function(M,R,z,U){j.transform(M,function(){var Z=e.apply(this,arguments),W=this.__zoom,q=z==null?nt(Z):typeof z=="function"?z.apply(this,arguments):z,ot=W.invert(q),lt=typeof R=="function"?R.apply(this,arguments):R;return i(B(et(W,lt),q,ot),Z,f)},z,U)},j.translateBy=function(M,R,z,U){j.transform(M,function(){return i(this.__zoom.translate(typeof R=="function"?R.apply(this,arguments):R,typeof z=="function"?z.apply(this,arguments):z),e.apply(this,arguments),f)},null,U)},j.translateTo=function(M,R,z,U,Z){j.transform(M,function(){var W=e.apply(this,arguments),q=this.__zoom,ot=U==null?nt(W):typeof U=="function"?U.apply(this,arguments):U;return i($r.translate(ot[0],ot[1]).scale(q.k).translate(typeof R=="function"?-R.apply(this,arguments):-R,typeof z=="function"?-z.apply(this,arguments):-z),W,f)},U,Z)};function et(M,R){return R=Math.max(h[0],Math.min(h[1],R)),R===M.k?M:new Nt(R,M.x,M.y)}function B(M,R,z){var U=R[0]-z[0]*M.k,Z=R[1]-z[1]*M.k;return U===M.x&&Z===M.y?M:new Nt(M.k,U,Z)}function nt(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function it(M,R,z,U){M.on("start.zoom",function(){Y(this,arguments).event(U).start()}).on("interrupt.zoom end.zoom",function(){Y(this,arguments).event(U).end()}).tween("zoom",function(){var Z=this,W=arguments,q=Y(Z,W).event(U),ot=e.apply(Z,W),lt=z==null?nt(ot):typeof z=="function"?z.apply(Z,W):z,bt=Math.max(ot[1][0]-ot[0][0],ot[1][1]-ot[0][1]),ft=Z.__zoom,wt=typeof R=="function"?R.apply(Z,W):R,Et=x(ft.invert(lt).concat(bt/ft.k),wt.invert(lt).concat(bt/wt.k));return function(_t){if(_t===1)_t=wt;else{var Dt=Et(_t),P=bt/Dt[2];_t=new Nt(P,lt[0]-Dt[0]*P,lt[1]-Dt[1]*P)}q.zoom(null,_t)}})}function Y(M,R,z){return!z&&M.__zooming||new S(M,R)}function S(M,R){this.that=M,this.args=R,this.active=0,this.sourceEvent=null,this.extent=e.apply(M,R),this.taps=0}S.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,R){return this.mouse&&M!=="mouse"&&(this.mouse[1]=R.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=R.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=R.invert(this.touch1[0])),this.that.__zoom=R,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var R=$t(this.that).datum();m.call(M,this.that,new Mf(M,{sourceEvent:this.sourceEvent,target:j,transform:this.that.__zoom,dispatch:m}),R)}};function yt(M,...R){if(!t.apply(this,arguments))return;var z=Y(this,R).event(M),U=this.__zoom,Z=Math.max(h[0],Math.min(h[1],U.k*Math.pow(2,s.apply(this,arguments)))),W=se(M);if(z.wheel)(z.mouse[0][0]!==W[0]||z.mouse[0][1]!==W[1])&&(z.mouse[1]=U.invert(z.mouse[0]=W)),clearTimeout(z.wheel);else{if(U.k===Z)return;z.mouse=[W,U.invert(W)],wn(this),z.start()}je(M),z.wheel=setTimeout(q,F),z.zoom("mouse",i(B(et(U,Z),z.mouse[0],z.mouse[1]),z.extent,f));function q(){z.wheel=null,z.end()}}function kt(M,...R){if(E||!t.apply(this,arguments))return;var z=M.currentTarget,U=Y(this,R,!0).event(M),Z=$t(M.view).on("mousemove.zoom",lt,!0).on("mouseup.zoom",bt,!0),W=se(M,z),q=M.clientX,ot=M.clientY;su(M.view),cr(M),U.mouse=[W,this.__zoom.invert(W)],wn(this),U.start();function lt(ft){if(je(ft),!U.moved){var wt=ft.clientX-q,Et=ft.clientY-ot;U.moved=wt*wt+Et*Et>H}U.event(ft).zoom("mouse",i(B(U.that.__zoom,U.mouse[0]=se(ft,z),U.mouse[1]),U.extent,f))}function bt(ft){Z.on("mousemove.zoom mouseup.zoom",null),au(ft.view,U.moved),je(ft),U.event(ft).end()}}function xt(M,...R){if(t.apply(this,arguments)){var z=this.__zoom,U=se(M.changedTouches?M.changedTouches[0]:M,this),Z=z.invert(U),W=z.k*(M.shiftKey?.5:2),q=i(B(et(z,W),U,Z),e.apply(this,R),f);je(M),g>0?$t(this).transition().duration(g).call(it,q,U,M):$t(this).call(j.transform,q,U,M)}}function Ct(M,...R){if(t.apply(this,arguments)){var z=M.touches,U=z.length,Z=Y(this,R,M.changedTouches.length===U).event(M),W,q,ot,lt;for(cr(M),q=0;q<U;++q)ot=z[q],lt=se(ot,this),lt=[lt,this.__zoom.invert(lt),ot.identifier],Z.touch0?!Z.touch1&&Z.touch0[2]!==lt[2]&&(Z.touch1=lt,Z.taps=0):(Z.touch0=lt,W=!0,Z.taps=1+!!w);w&&(w=clearTimeout(w)),W&&(Z.taps<2&&(T=lt[0],w=setTimeout(function(){w=null},k)),wn(this),Z.start())}}function ut(M,...R){if(this.__zooming){var z=Y(this,R).event(M),U=M.changedTouches,Z=U.length,W,q,ot,lt;for(je(M),W=0;W<Z;++W)q=U[W],ot=se(q,this),z.touch0&&z.touch0[2]===q.identifier?z.touch0[0]=ot:z.touch1&&z.touch1[2]===q.identifier&&(z.touch1[0]=ot);if(q=z.that.__zoom,z.touch1){var bt=z.touch0[0],ft=z.touch0[1],wt=z.touch1[0],Et=z.touch1[1],_t=(_t=wt[0]-bt[0])*_t+(_t=wt[1]-bt[1])*_t,Dt=(Dt=Et[0]-ft[0])*Dt+(Dt=Et[1]-ft[1])*Dt;q=et(q,Math.sqrt(_t/Dt)),ot=[(bt[0]+wt[0])/2,(bt[1]+wt[1])/2],lt=[(ft[0]+Et[0])/2,(ft[1]+Et[1])/2]}else if(z.touch0)ot=z.touch0[0],lt=z.touch0[1];else return;z.zoom("touch",i(B(q,ot,lt),z.extent,f))}}function Tt(M,...R){if(this.__zooming){var z=Y(this,R).event(M),U=M.changedTouches,Z=U.length,W,q;for(cr(M),E&&clearTimeout(E),E=setTimeout(function(){E=null},k),W=0;W<Z;++W)q=U[W],z.touch0&&z.touch0[2]===q.identifier?delete z.touch0:z.touch1&&z.touch1[2]===q.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),z.taps===2&&(q=se(q,this),Math.hypot(T[0]-q[0],T[1]-q[1])<L)){var ot=$t(this).on("dblclick.zoom");ot&&ot.apply(this,arguments)}}}return j.wheelDelta=function(M){return arguments.length?(s=typeof M=="function"?M:gn(+M),j):s},j.filter=function(M){return arguments.length?(t=typeof M=="function"?M:gn(!!M),j):t},j.touchable=function(M){return arguments.length?(l=typeof M=="function"?M:gn(!!M),j):l},j.extent=function(M){return arguments.length?(e=typeof M=="function"?M:gn([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),j):e},j.scaleExtent=function(M){return arguments.length?(h[0]=+M[0],h[1]=+M[1],j):[h[0],h[1]]},j.translateExtent=function(M){return arguments.length?(f[0][0]=+M[0][0],f[1][0]=+M[1][0],f[0][1]=+M[0][1],f[1][1]=+M[1][1],j):[[f[0][0],f[0][1]],[f[1][0],f[1][1]]]},j.constrain=function(M){return arguments.length?(i=M,j):i},j.duration=function(M){return arguments.length?(g=+M,j):g},j.interpolate=function(M){return arguments.length?(x=M,j):x},j.on=function(){var M=m.on.apply(m,arguments);return M===m?j:M},j.clickDistance=function(M){return arguments.length?(H=(M=+M)*M,j):Math.sqrt(H)},j.tapDistance=function(M){return arguments.length?(L=+M,j):L},j}function Ue(t=8){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let i="";const s=e.length;for(let l=0;l<t;l++)i+=e.charAt(Math.floor(Math.random()*s));return i}function so(t,e,i){if(Number.isNaN(t)||Number.isNaN(e)||Number.isNaN(i))throw new Error("Clamp arguments must be valid numbers, got NaN");return Math.min(Math.max(t,e),i)}function Cf(t,e,i=!1){let s=null,l=!1;const h=function(...f){s&&clearTimeout(s),i&&!l?(t.apply(this,f),l=!0):s=setTimeout(()=>{t.apply(this,f),l=!1,s=null},e)};return h.cancel=function(){s&&clearTimeout(s),s=null,l=!1},h}class be{static LEVEL_PRIORITY={debug:0,info:1,warn:2,error:3,fatal:4};static COLORS={debug:"#6b7280",info:"#3b82f6",warn:"#f59e0b",error:"#ef4444",fatal:"#dc2626",logName:"#06b6d4"};currentLevel;logName;constructor(e="APP",i="debug"){this.logName=e,this.currentLevel=i}setLevel(e){this.currentLevel=e}shouldLog(e){return be.LEVEL_PRIORITY[e]>=be.LEVEL_PRIORITY[this.currentLevel]}formatTime(){const e=new Date;return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}`}_log(e,i,s){if(!this.shouldLog(e))return;const l={logName:`color: ${be.COLORS.logName}; font-weight: bold;`,module:"color: #4b5563; font-weight: 600;",level:`color: ${be.COLORS[e]}; font-weight: bold; text-transform: uppercase;`,content:"color: #eeeeee;",time:"color: #9ca3af; font-size: 11px;",sep:"color: #d1d5db;"},h=[`%c[${this.logName}]`,"%c | "],f=[l.logName,l.sep];s&&(h.push(`%c[${s}]`,"%c | "),f.push(l.module,l.sep)),h.push(`%c${e}`,"%c | ","%c"+i,"%c | ",`%c${this.formatTime()}`),f.push(l.level,l.sep,l.content,l.sep,l.time),console.log(h.join(""),...f)}debug(e,i){this._log("debug",e,i)}info(e,i){this._log("info",e,i)}warn(e,i){this._log("warn",e,i)}error(e,i){this._log("error",e,i)}fatal(e,i){this._log("fatal",e,i)}log(e,i,s){this._log(e,i,s)}}class ao{opts;constructor(e={}){this.opts={dateFormat:e.dateFormat??"iso",space:e.space??2}}stringify(e){const i=s=>{switch(this.opts.dateFormat){case"timestamp":return{$type:"Date",$value:s.getTime()};case"formatted":return{$type:"Date",$value:s.toLocaleString("zh-CN"),$iso:s.toISOString()};default:return{$type:"Date",$value:s.toISOString()}}};return JSON.stringify(e,(s,l)=>{if(l&&typeof l=="object")for(const h in l){const f=l[h];f instanceof Date&&(l[h]=i(f))}else if(l instanceof Date)return i(l);return l},this.opts.space)}parse(e){return JSON.parse(e,(i,s)=>s?.$type==="Date"?new Date(this.opts.dateFormat==="formatted"&&s.$iso?s.$iso:s.$value):s)}deepClone(e){return this.parse(this.stringify(e))}deepEqual(e,i){return this.stringify(e)===this.stringify(i)}}const lo={en:{dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},zh:{dateTime:"%x %X",date:"%Y%-m%-d",time:"%H:%M:%S",periods:["",""],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["1","2","3","4","5","6","7","8","9","10","11","12"]}};class Xo{logger=new be("D3Timeline");container;options;timelines=[];events=[];timeRange;eventBindings={click:new Set,zoom:new Set,"zoom.end":new Set};boundResize=Cf(this.resize.bind(this),300);svg;mainGroup;gridGroup;timelineGroup;stageLineGroup;stageLinesVisible=!0;eventGroup;axisGroup;labelGroup;xScale;xAxis;zoom;tooltip;lastTransform;defaultOptions={id:Ue(),width:0,height:0,margin:{top:20,right:20,bottom:20,left:120},timelineHeight:60,timelineSpacing:20,axisHeight:20,zoomMin:11520*60*1e3,zoomMax:365*24*60*60*1e3,maxTimeRange:this.getDefaultMaxTimeRange(),animationDuration:300,stageLineParams:{path:"straight",size:2,color:"#9f86c0",dash:!0,arrow:!0,animation:!1},locale:"en",plugins:[]};constructor(e,i={}){if(this.container=$t(e),this.options={...this.defaultOptions,...i},this.options.width<=0&&e.clientWidth>0&&(this.options.width=e.clientWidth),this.options.height<=0&&e.clientHeight>0&&(this.options.height=e.clientHeight),this.options.width<=0)throw Error("D3Timeline err: width is zero.");this.init()}get isStageLineVisible(){return this.stageLinesVisible}init(){this.setupLocales(),this.setupSVG(),this.setupScales(),this.setupGroups(),this.setupZoom(),this.setupTooltip(),this.setupEventListeners(),this.setupPlugins(),this.render()}getDefaultMaxTimeRange(){const e=new Date,i=new Date(e.getFullYear()-10,e.getMonth(),e.getDate()),s=new Date(e.getFullYear()+10,e.getMonth(),e.getDate());return{start:i,end:s}}setupLocales(){br(lo[this.options.locale])}setupSVG(){this.svg=this.container.append("svg").attr("viewBox",[0,0,this.options.width,this.options.height]).attr("width",this.options.width).attr("height",this.options.height);const e=this.svg.append("defs");e.append("clipPath").attr("id",`main-clip-${this.options.id}`).append("rect").attr("id",`main-clip-rect-${this.options.id}`).attr("x",this.options.margin.left).attr("y",this.options.margin.top).attr("width",this.getTimelineInnerWidth()).attr("height",so(this.getTimelineInnerHeight(),0,1/0));const i=e.append("linearGradient").attr("id",`timelineGradient-${this.options.id}`).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%");i.append("stop").attr("offset","0%").attr("stop-color","#667eea"),i.append("stop").attr("offset","100%").attr("stop-color","#764ba2");const s=e.append("filter").attr("id",`drop-shadow-${this.options.id}`).attr("height","130%");s.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",2).attr("result","blur"),s.append("feOffset").attr("in","blur").attr("dx",0).attr("dy",2).attr("result","offsetBlur");const l=s.append("feMerge");l.append("feMergeNode").attr("in","offsetBlur"),l.append("feMergeNode").attr("in","SourceGraphic")}setupScales(){this.xScale=Sf().domain([this.options.maxTimeRange.start,this.options.maxTimeRange.end]).range([this.options.margin.left,this.options.width-this.options.margin.right]),this.xAxis=zi(this.xScale).ticks(this.options.width/80)}setupGroups(){this.mainGroup=this.svg.append("g").attr("class","main-group"),this.labelGroup=this.mainGroup.append("g").attr("class","d3-labels");const e=this.mainGroup.append("g").attr("clip-path",`url(#main-clip-${this.options.id})`);this.gridGroup=e.append("g").attr("class","d3-grid"),this.timelineGroup=e.append("g").attr("class","timelines"),this.stageLineGroup=e.append("g").attr("class","stage-lines"),this.eventGroup=e.append("g").attr("class","events"),this.axisGroup=e.append("g").attr("class","d3-axis").attr("transform",`translate(0, ${this.options.height-this.options.margin.bottom-this.options.axisHeight})`)}isPointInClipArea(e){const i=se(e,this.timelineGroup.node()),[s,l]=i,h=this.getTimelineInnerWidth(),f=this.getTimelineInnerHeight();return s>=this.options.margin.left&&s<=h+this.options.margin.left&&l>=this.options.margin.top&&l<=f+this.options.margin.top}getTimelineInnerWidth(){return this.options.width-this.options.margin.left-this.options.margin.right}getTimelineInnerHeight(e=!1){return this.options.height-this.options.margin.top-this.options.margin.bottom-(e?this.options.axisHeight:0)}setupZoom(){const e=this.options.maxTimeRange.end.getTime()-this.options.maxTimeRange.start.getTime(),i=this.options.zoomMax/e,s=e/this.options.zoomMin;this.zoom=Of().filter(this.isPointInClipArea.bind(this)).scaleExtent([Math.max(1,i),Math.max(1,s)]).extent([[this.options.margin.left,0],[this.options.width-this.options.margin.right,this.options.height]]).translateExtent([[this.options.margin.left,-1/0],[this.options.width-this.options.margin.right,1/0]])}setupTooltip(){this.tooltip=$t("body").append("div").attr("class","d3-timeline-tooltip").style("position","fixed").style("background","rgba(0, 0, 0, 0.9)").style("color","white").style("padding","12px").style("border-radius","8px").style("font-size","12px").style("pointer-events","none").style("opacity",0).style("z-index","1000").style("max-width","250px").style("box-shadow","0 4px 12px rgba(0,0,0,0.3)")}setupPlugins(){this.options.plugins.forEach(e=>{e.install({instance:this,container:this.container,options:this.options,timeRange:this.timeRange,svg:this.svg})})}detachPlugins(){this.options.plugins.forEach(e=>{e.uninstall()})}setupEventListeners(){this.zoom&&this.zoom.on("zoom",e=>{this.handleZoom(e),this.emit("zoom",{scale:e.transform.k,x:e.transform.x,y:e.transform.y,timeRange:this.timeRange})}).on("zoom.end",e=>{this.handleZoomEnd(e),this.emit("zoom.end",{scale:e.transform.k,x:e.transform.x,y:e.transform.y,timeRange:this.timeRange})}),this.svg&&this.svg.on("click",e=>{const i=e.target.closest(".event");if(i){const s=$t(i).datum();this.emit("click",{data:s})}}),window.addEventListener("resize",this.boundResize)}removeEventListeners(){this.zoom&&this.zoom.on("zoom",null).on("zoom.end",null),this.svg&&this.svg.on("click",null),window.removeEventListener("resize",this.boundResize),this.eventBindings.click.clear(),this.eventBindings.zoom.clear(),this.eventBindings["zoom.end"].clear()}updateTimelinePositions(){this.timelineGroup.selectAll(".timeline").attr("transform",e=>`translate(0, ${this.calculateTimelineOffsetY(e)})`)}calculateTimelineOffsetY(e){return e?(this.timelines.length-this.timelines.indexOf(e)-1)*(this.options.timelineHeight+this.options.timelineSpacing)+this.options.margin.top:0}calculateHeight(){return this.options.margin.top+this.options.margin.bottom+this.options.axisHeight+this.timelines.length*(this.options.timelineSpacing+this.options.timelineHeight)}updateEventPositions(e){this.eventGroup.selectAll(".event").attr("transform",i=>{const s=this.timelines.find(f=>f.id===i.timelineId),l=e(i.startTime),h=s?this.calculateTimelineOffsetY(s)+this.options.timelineHeight/2:0;return`translate(${l}, ${h})`}).select(".d3-event-range").attr("width",i=>{if(i.type==="range"){const s=e(i.endTime),l=e(i.startTime);return Math.max(5,s-l)}return 0}),this.eventGroup.selectAll(".event").filter(i=>i.type==="range").select(".d3-event-text").attr("x",i=>{const s=e(i.endTime),l=e(i.startTime);return(s-l)/2}),this.eventGroup.selectAll(".event").select(".event-text").filter(i=>i.type==="range").attr("x",i=>{if(i.type==="range"){const s=e(i.endTime),l=e(i.startTime);return(s-l)/2}return 0})}emit(e,i){this.eventBindings[e].forEach(s=>{s(i)})}on(e,i){this.eventBindings[e].has(i)||this.eventBindings[e].add(i)}off(e,i){this.eventBindings[e].delete(i)}addTimeline(e,i="#667eea",s,l=!0){const h={id:s??Ue(),name:e,color:i};return this.timelines.push(h),l&&this.resize(),h}addTimelines(e,i=!0){if(!Array.isArray(e)||e.length===0)return[];const s=e.map(l=>({id:l.id??Ue(),name:l.name,color:l.color??"#667eea"}));return this.timelines.push(...s),i&&this.resize(),s}removeTimeline(e){this.timelines=this.timelines.filter(i=>i.id!==e),this.events=this.events.filter(i=>i.timelineId!==e),this.resize()}addEvent(e,i,s=!0){const l=this.timelines.find(f=>f.id===i);if(!l)return null;if(i=i??e.timelineId,!i)throw Error("The timelineId is not specified.");const h={id:e.id??Ue(),timelineId:i,title:e.title||"",description:e.description||"",startTime:e.startTime||new Date,endTime:e.endTime||e.startTime||new Date,color:e.color||l.color,type:e.endTime?"range":"point",stage:e.stage};return this.events.push(h),this.render(),s&&this.fitRange(),h}addEvents(e,i,s=!0){if(!Array.isArray(e)||e.length===0)return null;const l=e.map(h=>{let f=i??h.timelineId;if(!f)throw Error("The timelineId is not specified.");const g=this.timelines.find(x=>x.id===f);if(!g)throw Error("The timeineId is invalid.");return{id:h.id??Ue(),timelineId:f,title:h.title||"",description:h.description||"",startTime:h.startTime||new Date,endTime:h.endTime||h.startTime||new Date,color:h.color||g.color,type:h.endTime?"range":"point",stage:h.stage}});return this.events.push(...l),this.render(),s&&this.fitRange(),l}removeEvent(e){this.events=this.events.filter(i=>i.id!==e),this.render()}changeLocale(e){if(this.options.locale=e,br(lo[e]),this.setupScales(),this.lastTransform){const i=new Nt(this.lastTransform.k,this.lastTransform.x+1,this.lastTransform.y);this.renderAxis(i.rescaleX(this.xScale)),this.renderAxis(this.lastTransform.rescaleX(this.xScale))}}render(e=!1){const i=this.timelineGroup.selectAll(".d3-timeline").size(),s=this.eventGroup.selectAll(".event").size();i!==this.timelines.length||s!==this.events.length||e?(this.renderTimelines(),this.renderEvents(),this.renderStageLines()):(this.updateTimelinePositions(),this.updateEventPositions(this.xScale)),this.renderGrid(this.xScale),this.renderAxis(this.xScale)}renderGrid(e){this.gridGroup.selectAll("*").remove();const i=this.xScale.ticks(20);this.gridGroup.selectAll(".vertical-grid").data(i).enter().append("line").attr("class","vertical-grid").attr("x1",s=>e(s)).attr("y1",this.options.margin.top).attr("x2",s=>e(s)).attr("y2",this.options.height-this.options.margin.bottom-this.options.axisHeight).attr("class","d3-grid")}renderTimelines(){const e=this.timelineGroup.selectAll(".d3-timeline").data(this.timelines,l=>l.id.toString()),i=e.enter().append("g").attr("class","d3-timeline");i.append("rect").attr("class","d3-timeline-bg").attr("x",this.options.margin.left).attr("width",this.getTimelineInnerWidth()).attr("height",this.options.timelineHeight).attr("filter",`url(#drop-shadow-${this.options.id})`),i.append("line").attr("class","d3-timeline-line").attr("x1",this.options.margin.left).attr("x2",this.options.margin.left+this.getTimelineInnerWidth());const s=i.merge(e);s.transition().duration(this.options.animationDuration).attr("transform",l=>`translate(0, ${this.calculateTimelineOffsetY(l)})`),s.select(".d3-timeline-bg").attr("y",0),s.select(".d3-timeline-line").attr("y1",this.options.timelineHeight/2).attr("y2",this.options.timelineHeight/2).attr("stroke",l=>l.color),e.exit().transition().duration(this.options.animationDuration).style("opacity",0).remove(),this.renderTimelineLabels()}renderTimelineLabels(){const e=this.labelGroup.selectAll(".d3-timeline-label").data(this.timelines,i=>i.id.toString());e.enter().append("text").attr("class","d3-timeline-label").attr("x",this.options.margin.left-10).attr("text-anchor","end").attr("dominant-baseline","middle").attr("fill","#333").attr("font-size","14").attr("font-weight","bold").merge(e).transition().duration(this.options.animationDuration).attr("y",i=>this.calculateTimelineOffsetY(i)+this.options.timelineHeight/2).text(i=>i.name),e.exit().transition().duration(this.options.animationDuration).style("opacity",0).remove()}handleZoom(e){const{transform:i}=e,s=i.rescaleX(this.xScale);this.updateTimelinePositions(),this.updateEventPositions(s),this.updateStageLinePositions(s);const l=this.getTimelineInnerWidth();this.timelineGroup.selectAll(".d3-timeline-bg").attr("width",l).attr("fill",`url(#timelineGradient-${this.options.id})`),this.timelineGroup.selectAll(".d3-timeline-line").attr("x2",this.options.margin.left+l),this.renderAxis(s),this.renderGrid(s),this.lastTransform=i;const[h,f]=s.domain();this.timeRange={start:h,end:f}}handleZoomEnd(e){const{transform:i}=e,s=i.rescaleX(this.xScale),[l,h]=s.domain();this.timeRange={start:l,end:h}}renderEvents(){const e=this.eventGroup.selectAll(".event").data(this.events,f=>f.id.toString()),i=e.enter().append("g").attr("class","event"),s=i.filter(f=>f.type==="range");s.append("rect").attr("class","d3-event-range").attr("height",30).attr("y",-15).attr("rx",6).attr("filter",`url(#drop-shadow-${this.options.id})`),s.append("text").attr("class","d3-event-text").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("fill","white").attr("y",0);const l=i.filter(f=>f.type==="point");l.append("circle").attr("class","d3-event-point").attr("r",8).attr("stroke","white").attr("stroke-width",2).attr("filter",`url(#drop-shadow-${this.options.id})`),l.append("text").attr("class","d3-event-text").attr("text-anchor","middle").attr("fill","#333").attr("y",-20);const h=i.merge(e);h.transition().duration(this.options.animationDuration).attr("transform",f=>{const g=this.timelines.find(w=>w.id===f.timelineId),x=this.xScale(f.startTime),m=g?this.calculateTimelineOffsetY(g)+this.options.timelineHeight:0;return`translate(${x}, ${m})`}),h.select(".d3-event-range").attr("x",0).attr("width",f=>{const g=this.xScale(f.endTime),x=this.xScale(f.startTime);return Math.max(5,g-x)}).attr("fill",f=>f.color),h.select(".d3-event-text").filter(f=>f.type==="range").attr("x",f=>{const g=this.xScale(f.endTime),x=this.xScale(f.startTime);return(g-x)/2}).text(f=>f.title),h.select(".d3-event-point").attr("cx",0).attr("cy",0).attr("fill",f=>f.color),h.select(".d3-event-text").filter(f=>f.type==="point").attr("x",0).text(f=>f.title),h.on("mouseover",(f,g)=>{const x=f.currentTarget;this.showTooltip(f,g,x)}).on("mouseout",()=>this.hideTooltip()),e.exit().transition().duration(this.options.animationDuration).style("opacity",0).remove()}generatePathSegment(e,i,s){switch(s){case"arc":const l=(e.x+i.x)/2,h=Math.abs(i.x-e.x)*.2;return` Q ${l} ${Math.min(e.y,i.y)-h} ${i.x} ${i.y}`;case"fluid":const f=e.x+(i.x-e.x)*.5,g=e.y,x=e.x+(i.x-e.x)*.5,m=i.y;return` C ${f} ${g}, ${x} ${m}, ${i.x} ${i.y}`;case"magnet":const w=(e.y+i.y)/2;return` L ${e.x} ${w} L ${i.x} ${w} L ${i.x} ${i.y}`;case"grid":const T=30;return Math.abs(e.y-i.y)<5?` L ${i.x} ${i.y}`:` L ${e.x+T} ${e.y} L ${e.x+T} ${i.y} L ${i.x} ${i.y}`;default:return` L ${i.x} ${i.y}`}}updateStageLinePositions(e){const i=new Map;this.events.forEach(l=>{if(l.stage){const h=l.stage.id;i.has(h)||i.set(h,[]),i.get(h).push(l)}});const s=this.options.stageLineParams;i.forEach((l,h)=>{if(l.sort((m,w)=>(m.stage.index||0)-(w.stage.index||0)),l.length<2)return;const f=this.stageLineGroup.select(`.stage-${h}`);if(f.empty())return;f.selectAll("*").remove();const g=l.map(m=>{const w=this.timelines.find(F=>F.id===m.timelineId),T=e(m.startTime),E=w?this.calculateTimelineOffsetY(w)+this.options.timelineHeight/2:0,k=m.type==="range"?e(m.endTime)-e(m.startTime):0;return{x:T,y:E,event:m,width:k}});let x="";for(let m=0;m<g.length-1;m++){const w=g[m],T=g[m+1],E=this.generatePathSegment(w,T,s.path);m===0&&(x+=`M ${w.x} ${w.y}`),x+=E}if(f.append("path").attr("class","stage-path").attr("d",x).attr("fill","none").attr("stroke",s.color).attr("stroke-width",s.size).attr("stroke-dasharray",s.dash?"5,5":null),s.arrow)for(let m=0;m<g.length-1;m++)this.drawArrowInGroup(f,g[m],g[m+1],s,s.path)})}renderStageLines(){if(!this.stageLinesVisible)return;this.stageLineGroup.selectAll("*").remove();const e=new Map;this.events.forEach(s=>{if(s.stage){const l=s.stage.id;e.has(l)||e.set(l,[]),e.get(l).push(s)}});const i=this.options.stageLineParams;e.forEach((s,l)=>{if(s.sort((m,w)=>(m.stage.index||0)-(w.stage.index||0)),s.length<2)return;const h=this.stageLineGroup.append("g").attr("class",`stage-line-group stage-${l}`),f=s.map(m=>{const w=this.timelines.find(F=>F.id===m.timelineId),T=this.xScale(m.startTime),E=w?this.calculateTimelineOffsetY(w)+this.options.timelineHeight/2:0,k=m.type==="range"?this.xScale(m.endTime)-this.xScale(m.startTime):0;return{x:T,y:E,event:m,width:k}});let g="";for(let m=0;m<f.length-1;m++){const w=f[m],T=f[m+1],E=this.generatePathSegment(w,T,i.path);m===0&&(g+=`M ${w.x} ${w.y}`),g+=E}const x=h.append("path").attr("class","stage-path").attr("d",g).attr("fill","none").attr("stroke",i.color).attr("stroke-width",i.size).attr("stroke-dasharray",i.dash?"5,5":null).style("opacity",0);if(x.transition().duration(this.options.animationDuration).style("opacity",1),i.arrow&&f.length>=2)for(let m=0;m<f.length-1;m++)this.drawArrowInGroup(h,f[m],f[m+1],i,i.path);if(i.animation){const m=x.node()?.getTotalLength()||0;x.attr("stroke-dasharray",`${m} ${m}`).attr("stroke-dashoffset",m).transition().duration(2e3).ease(Wc).attr("stroke-dashoffset",0).on("end",function(){$t(this).attr("stroke-dasharray",i.dash?"5,5":null)})}})}drawArrowInGroup(e,i,s,l,h){let f;switch(h){case"arc":{const H=(i.x+s.x)/2,L=Math.abs(s.x-i.x)*.2,j=Math.min(i.y,s.y)-L;f=Math.atan2(s.y-j,s.x-H);break}case"fluid":{const H=i.x+(s.x-i.x)*.5,L=s.y;f=Math.atan2(s.y-L,s.x-H);break}default:f=Math.atan2(s.y-i.y,s.x-i.x)}let g=s.x,x=s.y;if(s.event.type==="point")g=s.x-8*Math.cos(f),x=s.y-8*Math.sin(f);else if(s.event.type==="range"){const H=i.x<s.x?-1:1,L=s.width/2*H;g=s.x+L,x=s.y}const m=10,w=Math.PI/6,T=g-m*Math.cos(f-w),E=x-m*Math.sin(f-w),k=g-m*Math.cos(f+w),F=x-m*Math.sin(f+w);e.append("path").attr("class","stage-arrow").attr("d",`M ${g} ${x} L ${T} ${E} M ${g} ${x} L ${k} ${F}`).attr("stroke",l.color).attr("stroke-width",l.size).attr("fill","none")}renderAxis(e){this.xAxis=zi(e).ticks(this.options.width/80).tickSizeOuter(0),this.axisGroup.call(this.xAxis)}showTooltip(e,i,s){this.tooltip.transition().duration(200).style("opacity",1);const l=this.timelines.find(E=>E.id===i.timelineId),h=`
            <strong>${i.title}</strong><br>
            ${i.description?i.description+"<br>":""}
            : ${l?l.name:""}<br>
            : ${i.startTime.toLocaleString("zh-CN")}<br>
            ${i.type==="range"?`: ${i.endTime.toLocaleString("zh-CN")}`:""}
        `;this.tooltip.html(h);const f=8,g=s.getBoundingClientRect(),x=this.tooltip.node();if(!x)return;const m=x.getBoundingClientRect();let w=g.left+g.width/2-m.width/2,T=g.top-m.height-f;T<0&&(T=g.bottom+f),w<f?w=f:w+m.width>window.innerWidth-f&&(w=window.innerWidth-m.width-f),this.tooltip.style("left",w+"px").style("top",T+"px")}hideTooltip(){this.tooltip.transition().duration(200).style("opacity",0)}async scaleTo(e){const i=this.options.maxTimeRange.end.getTime()-this.options.maxTimeRange.start.getTime(),s=e.start.getTime(),l=e.end.getTime(),h=l-s,f=1440*60*1e3,g=i/(h+f),x=new Date((s+l)/2);return await this.svg.call(this.zoom).transition().duration(500).call(this.zoom.scaleTo,g,[this.xScale(x),0]).end()}async translateTo(e){const i=e.start.getTime(),s=e.end.getTime(),l=new Date((i+s)/2);return await this.svg.call(this.zoom).transition().duration(500).call(this.zoom.translateTo,this.xScale(l),0).end()}async fitRange(){const e=pa(this.events.flatMap(i=>[i.startTime,i.endTime]));if(e[0]&&e[1]){const i={start:e[0],end:e[1]};this.timeRange=i;try{await this.translateTo(i),await this.scaleTo(i)}catch(s){this.logger.warn("Cautch fitRange error: "+String(s))}}}getTransformByRange(e){const i=this.options.maxTimeRange.end.getTime()-this.options.maxTimeRange.start.getTime(),s=e.start.getTime(),l=e.end.getTime(),h=l-s,f=1440*60*1e3,g=i/(h+f),x=new Date((s+l)/2),m=this.xScale(x);return new Nt(g,m,0)}transformByRange(e){const i=this.getTransformByRange(e);this.svg.call(this.zoom.translateTo,i.x,i.y),this.svg.call(this.zoom.scaleTo,i.k,[i.x,i.y])}showStageLines(){this.stageLinesVisible=!0,this.stageLineGroup.attr("style","display: ''")}hideStageLines(){this.stageLinesVisible=!1,this.stageLineGroup.attr("style","display: none")}setZoom(e){const i=$r.scale(e);this.svg.transition().duration(this.options.animationDuration).call(this.zoom.transform,i)}resetView(){this.fitRange()}async resize(){const e=this.container.node();this.options.width=e.clientWidth||this.options.width,this.options.height=this.calculateHeight(),this.svg.attr("viewBox",[0,0,this.options.width,this.options.height]).attr("width",this.options.width).attr("height",this.options.height),this.svg.select(`#main-clip-rect-${this.options.id}`).attr("width",this.getTimelineInnerWidth()).attr("height",so(this.getTimelineInnerHeight(),0,1/0)),this.setupScales(),this.axisGroup.attr("transform",`translate(0, ${this.options.height-this.options.margin.bottom-this.options.axisHeight})`),this.zoom.extent([[this.options.margin.left,0],[this.options.width-this.options.margin.right,this.options.height]]).translateExtent([[this.options.margin.left,-1/0],[this.options.width-this.options.margin.right,1/0]]),this.gridGroup.attr("y2",this.options.height-this.options.margin.bottom-this.options.axisHeight),this.render(!0),await this.fitRange(),this.options.plugins.forEach(i=>{i.onResize&&i.onResize()})}setTimeRange(e,i){this.timeRange={start:e,end:i},this.render(),this.transformByRange(this.timeRange)}getTimeRange(){return{...this.timeRange}}getTimelines(){return[...this.timelines]}getEvents(){return[...this.events]}exportData(){return{timelines:[...this.timelines],events:[...this.events],timeRange:{...this.timeRange}}}exportDataString(e=!1){return new ao({space:e?2:0}).stringify(this.exportData())}importData(e){try{return this.timelines=[...e.timelines],this.events=[...e.events],this.timeRange={...e.timeRange},this.resize(),!0}catch(i){return this.logger.error(`: ${i.message}`),!1}}importDataString(e){return this.importData(new ao().parse(e))}destroy(){this.removeEventListeners(),this.tooltip.remove(),this.svg.remove(),this.detachPlugins()}}function Vo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var He={exports:{}},If=He.exports,uo;function Lf(){return uo||(uo=1,(function(t,e){(function(i,s){t.exports=s()})(If,(function(){function i(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter((function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),o.push.apply(o,a)}return o}function s(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?i(Object(o),!0).forEach((function(a){x(r,a,o[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))}))}return r}function l(r){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},l(r)}function h(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function f(r,n){for(var o=0;o<n.length;o++){var a=n[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,H(a.key),a)}}function g(r,n,o){return n&&f(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function x(r,n,o){return(n=H(n))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,r}function m(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&T(r,n)}function w(r){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},w(r)}function T(r,n){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,a){return o.__proto__=a,o},T(r,n)}function E(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function k(r){var n=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})();return function(){var o,a=w(r);if(n){var u=w(this).constructor;o=Reflect.construct(a,arguments,u)}else o=a.apply(this,arguments);return(function(c,p){if(p&&(typeof p=="object"||typeof p=="function"))return p;if(p!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E(c)})(this,o)}}function F(){return F=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(r,n,o){var a=(function(c,p){for(;!Object.prototype.hasOwnProperty.call(c,p)&&(c=w(c))!==null;);return c})(r,n);if(a){var u=Object.getOwnPropertyDescriptor(a,n);return u.get?u.get.call(arguments.length<3?r:o):u.value}},F.apply(this,arguments)}function H(r){var n=(function(o,a){if(typeof o!="object"||o===null)return o;var u=o[Symbol.toPrimitive];if(u!==void 0){var c=u.call(o,a);if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)})(r,"string");return typeof n=="symbol"?n:n+""}var L=function(r){return!(!r||!r.Window)&&r instanceof r.Window},j=void 0,et=void 0;function B(r){j=r;var n=r.document.createTextNode("");n.ownerDocument!==r.document&&typeof r.wrap=="function"&&r.wrap(n)===n&&(r=r.wrap(r)),et=r}function nt(r){return L(r)?r:(r.ownerDocument||r).defaultView||et.window}typeof window<"u"&&window&&B(window);var it=function(r){return!!r&&l(r)==="object"},Y=function(r){return typeof r=="function"},S={window:function(r){return r===et||L(r)},docFrag:function(r){return it(r)&&r.nodeType===11},object:it,func:Y,number:function(r){return typeof r=="number"},bool:function(r){return typeof r=="boolean"},string:function(r){return typeof r=="string"},element:function(r){if(!r||l(r)!=="object")return!1;var n=nt(r)||et;return/object|function/.test(typeof Element>"u"?"undefined":l(Element))?r instanceof Element||r instanceof n.Element:r.nodeType===1&&typeof r.nodeName=="string"},plainObject:function(r){return it(r)&&!!r.constructor&&/function Object\b/.test(r.constructor.toString())},array:function(r){return it(r)&&r.length!==void 0&&Y(r.splice)}};function yt(r){var n=r.interaction;if(n.prepared.name==="drag"){var o=n.prepared.axis;o==="x"?(n.coords.cur.page.y=n.coords.start.page.y,n.coords.cur.client.y=n.coords.start.client.y,n.coords.velocity.client.y=0,n.coords.velocity.page.y=0):o==="y"&&(n.coords.cur.page.x=n.coords.start.page.x,n.coords.cur.client.x=n.coords.start.client.x,n.coords.velocity.client.x=0,n.coords.velocity.page.x=0)}}function kt(r){var n=r.iEvent,o=r.interaction;if(o.prepared.name==="drag"){var a=o.prepared.axis;if(a==="x"||a==="y"){var u=a==="x"?"y":"x";n.page[u]=o.coords.start.page[u],n.client[u]=o.coords.start.client[u],n.delta[u]=0}}}var xt={id:"actions/drag",install:function(r){var n=r.actions,o=r.Interactable,a=r.defaults;o.prototype.draggable=xt.draggable,n.map.drag=xt,n.methodDict.drag="draggable",a.actions.drag=xt.defaults},listeners:{"interactions:before-action-move":yt,"interactions:action-resume":yt,"interactions:action-move":kt,"auto-start:check":function(r){var n=r.interaction,o=r.interactable,a=r.buttons,u=o.options.drag;if(u&&u.enabled&&(!n.pointerIsDown||!/mouse|pointer/.test(n.pointerType)||(a&o.options.drag.mouseButtons)!=0))return r.action={name:"drag",axis:u.lockAxis==="start"?u.startAxis:u.lockAxis},!1}},draggable:function(r){return S.object(r)?(this.options.drag.enabled=r.enabled!==!1,this.setPerAction("drag",r),this.setOnEvents("drag",r),/^(xy|x|y|start)$/.test(r.lockAxis)&&(this.options.drag.lockAxis=r.lockAxis),/^(xy|x|y)$/.test(r.startAxis)&&(this.options.drag.startAxis=r.startAxis),this):S.bool(r)?(this.options.drag.enabled=r,this):this.options.drag},beforeMove:yt,move:kt,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(r){return r.search("drag")===0}},Ct=xt,ut={init:function(r){var n=r;ut.document=n.document,ut.DocumentFragment=n.DocumentFragment||Tt,ut.SVGElement=n.SVGElement||Tt,ut.SVGSVGElement=n.SVGSVGElement||Tt,ut.SVGElementInstance=n.SVGElementInstance||Tt,ut.Element=n.Element||Tt,ut.HTMLElement=n.HTMLElement||ut.Element,ut.Event=n.Event,ut.Touch=n.Touch||Tt,ut.PointerEvent=n.PointerEvent||n.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function Tt(){}var M=ut,R={init:function(r){var n=M.Element,o=r.navigator||{};R.supportsTouch="ontouchstart"in r||S.func(r.DocumentTouch)&&M.document instanceof r.DocumentTouch,R.supportsPointerEvent=o.pointerEnabled!==!1&&!!M.PointerEvent,R.isIOS=/iP(hone|od|ad)/.test(o.platform),R.isIOS7=/iP(hone|od|ad)/.test(o.platform)&&/OS 7[^\d]/.test(o.appVersion),R.isIe9=/MSIE 9/.test(o.userAgent),R.isOperaMobile=o.appName==="Opera"&&R.supportsTouch&&/Presto/.test(o.userAgent),R.prefixedMatchesSelector="matches"in n.prototype?"matches":"webkitMatchesSelector"in n.prototype?"webkitMatchesSelector":"mozMatchesSelector"in n.prototype?"mozMatchesSelector":"oMatchesSelector"in n.prototype?"oMatchesSelector":"msMatchesSelector",R.pEventTypes=R.supportsPointerEvent?M.PointerEvent===r.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,R.wheelEvent=M.document&&"onmousewheel"in M.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},z=R;function U(r,n){if(r.contains)return r.contains(n);for(;n;){if(n===r)return!0;n=n.parentNode}return!1}function Z(r,n){for(;S.element(r);){if(q(r,n))return r;r=W(r)}return null}function W(r){var n=r.parentNode;if(S.docFrag(n)){for(;(n=n.host)&&S.docFrag(n););return n}return n}function q(r,n){return et!==j&&(n=n.replace(/\/deep\//g," ")),r[z.prefixedMatchesSelector](n)}var ot=function(r){return r.parentNode||r.host};function lt(r,n){for(var o,a=[],u=r;(o=ot(u))&&u!==n&&o!==u.ownerDocument;)a.unshift(u),u=o;return a}function bt(r,n,o){for(;S.element(r);){if(q(r,n))return!0;if((r=W(r))===o)return q(r,n)}return!1}function ft(r){return r.correspondingUseElement||r}function wt(r){var n=r instanceof M.SVGElement?r.getBoundingClientRect():r.getClientRects()[0];return n&&{left:n.left,right:n.right,top:n.top,bottom:n.bottom,width:n.width||n.right-n.left,height:n.height||n.bottom-n.top}}function Et(r){var n,o=wt(r);if(!z.isIOS7&&o){var a={x:(n=(n=nt(r))||et).scrollX||n.document.documentElement.scrollLeft,y:n.scrollY||n.document.documentElement.scrollTop};o.left+=a.x,o.right+=a.x,o.top+=a.y,o.bottom+=a.y}return o}function _t(r){for(var n=[];r;)n.push(r),r=W(r);return n}function Dt(r){return!!S.string(r)&&(M.document.querySelector(r),!0)}function P(r,n){for(var o in n)r[o]=n[o];return r}function Q(r,n,o){return r==="parent"?W(o):r==="self"?n.getRect(o):Z(o,r)}function tt(r,n,o,a){var u=r;return S.string(u)?u=Q(u,n,o):S.func(u)&&(u=u.apply(void 0,a)),S.element(u)&&(u=Et(u)),u}function C(r){return r&&{x:"x"in r?r.x:r.left,y:"y"in r?r.y:r.top}}function mt(r){return!r||"x"in r&&"y"in r||((r=P({},r)).x=r.left||0,r.y=r.top||0,r.width=r.width||(r.right||0)-r.x,r.height=r.height||(r.bottom||0)-r.y),r}function at(r,n,o){r.left&&(n.left+=o.x),r.right&&(n.right+=o.x),r.top&&(n.top+=o.y),r.bottom&&(n.bottom+=o.y),n.width=n.right-n.left,n.height=n.bottom-n.top}function dt(r,n,o){var a=o&&r.options[o];return C(tt(a&&a.origin||r.options.origin,r,n,[r&&n]))||{x:0,y:0}}function pt(r,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(v){return!0},a=arguments.length>3?arguments[3]:void 0;if(a=a||{},S.string(r)&&r.search(" ")!==-1&&(r=Ut(r)),S.array(r))return r.forEach((function(v){return pt(v,n,o,a)})),a;if(S.object(r)&&(n=r,r=""),S.func(n)&&o(r))a[r]=a[r]||[],a[r].push(n);else if(S.array(n))for(var u=0,c=n;u<c.length;u++){var p=c[u];pt(r,p,o,a)}else if(S.object(n))for(var d in n)pt(Ut(d).map((function(v){return"".concat(r).concat(v)})),n[d],o,a);return a}function Ut(r){return r.trim().split(/ +/)}var ee=function(r,n){return Math.sqrt(r*r+n*n)},qo=["webkit","moz"];function Ke(r,n){r.__set||(r.__set={});var o=function(u){if(qo.some((function(c){return u.indexOf(c)===0})))return 1;typeof r[u]!="function"&&u!=="__set"&&Object.defineProperty(r,u,{get:function(){return u in r.__set?r.__set[u]:r.__set[u]=n[u]},set:function(c){r.__set[u]=c},configurable:!0})};for(var a in n)o(a);return r}function Qe(r,n){r.page=r.page||{},r.page.x=n.page.x,r.page.y=n.page.y,r.client=r.client||{},r.client.x=n.client.x,r.client.y=n.client.y,r.timeStamp=n.timeStamp}function Fr(r){r.page.x=0,r.page.y=0,r.client.x=0,r.client.y=0}function Nr(r){return r instanceof M.Event||r instanceof M.Touch}function tn(r,n,o){return r=r||"page",(o=o||{}).x=n[r+"X"],o.y=n[r+"Y"],o}function jr(r,n){return n=n||{x:0,y:0},z.isOperaMobile&&Nr(r)?(tn("screen",r,n),n.x+=window.scrollX,n.y+=window.scrollY):tn("page",r,n),n}function ke(r){return S.number(r.pointerId)?r.pointerId:r.identifier}function Zo(r,n,o){var a=n.length>1?Ur(n):n[0];jr(a,r.page),(function(u,c){c=c||{},z.isOperaMobile&&Nr(u)?tn("screen",u,c):tn("client",u,c)})(a,r.client),r.timeStamp=o}function Ln(r){var n=[];return S.array(r)?(n[0]=r[0],n[1]=r[1]):r.type==="touchend"?r.touches.length===1?(n[0]=r.touches[0],n[1]=r.changedTouches[0]):r.touches.length===0&&(n[0]=r.changedTouches[0],n[1]=r.changedTouches[1]):(n[0]=r.touches[0],n[1]=r.touches[1]),n}function Ur(r){for(var n={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},o=0;o<r.length;o++){var a=r[o];for(var u in n)n[u]+=a[u]}for(var c in n)n[c]/=r.length;return n}function Rn(r){if(!r.length)return null;var n=Ln(r),o=Math.min(n[0].pageX,n[1].pageX),a=Math.min(n[0].pageY,n[1].pageY),u=Math.max(n[0].pageX,n[1].pageX),c=Math.max(n[0].pageY,n[1].pageY);return{x:o,y:a,left:o,top:a,right:u,bottom:c,width:u-o,height:c-a}}function $n(r,n){var o=n+"X",a=n+"Y",u=Ln(r),c=u[0][o]-u[1][o],p=u[0][a]-u[1][a];return ee(c,p)}function Fn(r,n){var o=n+"X",a=n+"Y",u=Ln(r),c=u[1][o]-u[0][o],p=u[1][a]-u[0][a];return 180*Math.atan2(p,c)/Math.PI}function Yr(r){return S.string(r.pointerType)?r.pointerType:S.number(r.pointerType)?[void 0,void 0,"touch","pen","mouse"][r.pointerType]:/touch/.test(r.type||"")||r instanceof M.Touch?"touch":"mouse"}function Gr(r){var n=S.func(r.composedPath)?r.composedPath():r.path;return[ft(n?n[0]:r.target),ft(r.currentTarget)]}var en=(function(){function r(n){h(this,r),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=n}return g(r,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),r})();Object.defineProperty(en.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var Hr=function(r,n){for(var o=0;o<n.length;o++){var a=n[o];r.push(a)}return r},Br=function(r){return Hr([],r)},De=function(r,n){for(var o=0;o<r.length;o++)if(n(r[o],o,r))return o;return-1},Pe=function(r,n){return r[De(r,n)]},me=(function(r){m(o,r);var n=k(o);function o(a,u,c){var p;h(this,o),(p=n.call(this,u._interaction)).dropzone=void 0,p.dragEvent=void 0,p.relatedTarget=void 0,p.draggable=void 0,p.propagationStopped=!1,p.immediatePropagationStopped=!1;var d=c==="dragleave"?a.prev:a.cur,v=d.element,b=d.dropzone;return p.type=c,p.target=v,p.currentTarget=v,p.dropzone=b,p.dragEvent=u,p.relatedTarget=u.target,p.draggable=u.interactable,p.timeStamp=u.timeStamp,p}return g(o,[{key:"reject",value:function(){var a=this,u=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&u.cur.dropzone===this.dropzone&&u.cur.element===this.target)if(u.prev.dropzone=this.dropzone,u.prev.element=this.target,u.rejected=!0,u.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var c=u.activeDrops,p=De(c,(function(v){var b=v.dropzone,y=v.element;return b===a.dropzone&&y===a.target}));u.activeDrops.splice(p,1);var d=new o(u,this.dragEvent,"dropdeactivate");d.dropzone=this.dropzone,d.target=this.target,this.dropzone.fire(d)}else this.dropzone.fire(new o(u,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),o})(en);function Wr(r,n){for(var o=0,a=r.slice();o<a.length;o++){var u=a[o],c=u.dropzone,p=u.element;n.dropzone=c,n.target=p,c.fire(n),n.propagationStopped=n.immediatePropagationStopped=!1}}function Nn(r,n){for(var o=(function(c,p){for(var d=[],v=0,b=c.interactables.list;v<b.length;v++){var y=b[v];if(y.options.drop.enabled){var _=y.options.drop.accept;if(!(S.element(_)&&_!==p||S.string(_)&&!q(p,_)||S.func(_)&&!_({dropzone:y,draggableElement:p})))for(var D=0,O=y.getAllElements();D<O.length;D++){var A=O[D];A!==p&&d.push({dropzone:y,element:A,rect:y.getRect(A)})}}}return d})(r,n),a=0;a<o.length;a++){var u=o[a];u.rect=u.dropzone.getRect(u.element)}return o}function Xr(r,n,o){for(var a=r.dropState,u=r.interactable,c=r.element,p=[],d=0,v=a.activeDrops;d<v.length;d++){var b=v[d],y=b.dropzone,_=b.element,D=b.rect,O=y.dropCheck(n,o,u,c,_,D);p.push(O?_:null)}var A=(function(I){for(var N,$,G,J=[],rt=0;rt<I.length;rt++){var X=I[rt],K=I[N];if(X&&rt!==N)if(K){var Mt=ot(X),ht=ot(K);if(Mt!==X.ownerDocument)if(ht!==X.ownerDocument)if(Mt!==ht){J=J.length?J:lt(K);var zt=void 0;if(K instanceof M.HTMLElement&&X instanceof M.SVGElement&&!(X instanceof M.SVGSVGElement)){if(X===ht)continue;zt=X.ownerSVGElement}else zt=X;for(var Lt=lt(zt,K.ownerDocument),Xt=0;Lt[Xt]&&Lt[Xt]===J[Xt];)Xt++;var hn=[Lt[Xt-1],Lt[Xt],J[Xt]];if(hn[0])for(var Le=hn[0].lastChild;Le;){if(Le===hn[1]){N=rt,J=Lt;break}if(Le===hn[2])break;Le=Le.previousSibling}}else G=K,(parseInt(nt($=X).getComputedStyle($).zIndex,10)||0)>=(parseInt(nt(G).getComputedStyle(G).zIndex,10)||0)&&(N=rt);else N=rt}else N=rt}return N})(p);return a.activeDrops[A]||null}function jn(r,n,o){var a=r.dropState,u={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return o.type==="dragstart"&&(u.activate=new me(a,o,"dropactivate"),u.activate.target=null,u.activate.dropzone=null),o.type==="dragend"&&(u.deactivate=new me(a,o,"dropdeactivate"),u.deactivate.target=null,u.deactivate.dropzone=null),a.rejected||(a.cur.element!==a.prev.element&&(a.prev.dropzone&&(u.leave=new me(a,o,"dragleave"),o.dragLeave=u.leave.target=a.prev.element,o.prevDropzone=u.leave.dropzone=a.prev.dropzone),a.cur.dropzone&&(u.enter=new me(a,o,"dragenter"),o.dragEnter=a.cur.element,o.dropzone=a.cur.dropzone)),o.type==="dragend"&&a.cur.dropzone&&(u.drop=new me(a,o,"drop"),o.dropzone=a.cur.dropzone,o.relatedTarget=a.cur.element),o.type==="dragmove"&&a.cur.dropzone&&(u.move=new me(a,o,"dropmove"),o.dropzone=a.cur.dropzone)),u}function Un(r,n){var o=r.dropState,a=o.activeDrops,u=o.cur,c=o.prev;n.leave&&c.dropzone.fire(n.leave),n.enter&&u.dropzone.fire(n.enter),n.move&&u.dropzone.fire(n.move),n.drop&&u.dropzone.fire(n.drop),n.deactivate&&Wr(a,n.deactivate),o.prev.dropzone=u.dropzone,o.prev.element=u.element}function Vr(r,n){var o=r.interaction,a=r.iEvent,u=r.event;if(a.type==="dragmove"||a.type==="dragend"){var c=o.dropState;n.dynamicDrop&&(c.activeDrops=Nn(n,o.element));var p=a,d=Xr(o,p,u);c.rejected=c.rejected&&!!d&&d.dropzone===c.cur.dropzone&&d.element===c.cur.element,c.cur.dropzone=d&&d.dropzone,c.cur.element=d&&d.element,c.events=jn(o,0,p)}}var qr={id:"actions/drop",install:function(r){var n=r.actions,o=r.interactStatic,a=r.Interactable,u=r.defaults;r.usePlugin(Ct),a.prototype.dropzone=function(c){return(function(p,d){if(S.object(d)){if(p.options.drop.enabled=d.enabled!==!1,d.listeners){var v=pt(d.listeners),b=Object.keys(v).reduce((function(_,D){return _[/^(enter|leave)/.test(D)?"drag".concat(D):/^(activate|deactivate|move)/.test(D)?"drop".concat(D):D]=v[D],_}),{}),y=p.options.drop.listeners;y&&p.off(y),p.on(b),p.options.drop.listeners=b}return S.func(d.ondrop)&&p.on("drop",d.ondrop),S.func(d.ondropactivate)&&p.on("dropactivate",d.ondropactivate),S.func(d.ondropdeactivate)&&p.on("dropdeactivate",d.ondropdeactivate),S.func(d.ondragenter)&&p.on("dragenter",d.ondragenter),S.func(d.ondragleave)&&p.on("dragleave",d.ondragleave),S.func(d.ondropmove)&&p.on("dropmove",d.ondropmove),/^(pointer|center)$/.test(d.overlap)?p.options.drop.overlap=d.overlap:S.number(d.overlap)&&(p.options.drop.overlap=Math.max(Math.min(1,d.overlap),0)),"accept"in d&&(p.options.drop.accept=d.accept),"checker"in d&&(p.options.drop.checker=d.checker),p}return S.bool(d)?(p.options.drop.enabled=d,p):p.options.drop})(this,c)},a.prototype.dropCheck=function(c,p,d,v,b,y){return(function(_,D,O,A,I,N,$){var G=!1;if(!($=$||_.getRect(N)))return!!_.options.drop.checker&&_.options.drop.checker(D,O,G,_,N,A,I);var J=_.options.drop.overlap;if(J==="pointer"){var rt=dt(A,I,"drag"),X=jr(D);X.x+=rt.x,X.y+=rt.y;var K=X.x>$.left&&X.x<$.right,Mt=X.y>$.top&&X.y<$.bottom;G=K&&Mt}var ht=A.getRect(I);if(ht&&J==="center"){var zt=ht.left+ht.width/2,Lt=ht.top+ht.height/2;G=zt>=$.left&&zt<=$.right&&Lt>=$.top&&Lt<=$.bottom}return ht&&S.number(J)&&(G=Math.max(0,Math.min($.right,ht.right)-Math.max($.left,ht.left))*Math.max(0,Math.min($.bottom,ht.bottom)-Math.max($.top,ht.top))/(ht.width*ht.height)>=J),_.options.drop.checker&&(G=_.options.drop.checker(D,O,G,_,N,A,I)),G})(this,c,p,d,v,b,y)},o.dynamicDrop=function(c){return S.bool(c)?(r.dynamicDrop=c,o):r.dynamicDrop},P(n.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),n.methodDict.drop="dropzone",r.dynamicDrop=!1,u.actions.drop=qr.defaults},listeners:{"interactions:before-action-start":function(r){var n=r.interaction;n.prepared.name==="drag"&&(n.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(r,n){var o=r.interaction,a=(r.event,r.iEvent);if(o.prepared.name==="drag"){var u=o.dropState;u.activeDrops=[],u.events={},u.activeDrops=Nn(n,o.element),u.events=jn(o,0,a),u.events.activate&&(Wr(u.activeDrops,u.events.activate),n.fire("actions/drop:start",{interaction:o,dragEvent:a}))}},"interactions:action-move":Vr,"interactions:after-action-move":function(r,n){var o=r.interaction,a=r.iEvent;if(o.prepared.name==="drag"){var u=o.dropState;Un(o,u.events),n.fire("actions/drop:move",{interaction:o,dragEvent:a}),u.events={}}},"interactions:action-end":function(r,n){if(r.interaction.prepared.name==="drag"){var o=r.interaction,a=r.iEvent;Vr(r,n),Un(o,o.dropState.events),n.fire("actions/drop:end",{interaction:o,dragEvent:a})}},"interactions:stop":function(r){var n=r.interaction;if(n.prepared.name==="drag"){var o=n.dropState;o&&(o.activeDrops=null,o.events=null,o.cur.dropzone=null,o.cur.element=null,o.prev.dropzone=null,o.prev.element=null,o.rejected=!1)}}},getActiveDrops:Nn,getDrop:Xr,getDropEvents:jn,fireDropEvents:Un,filterEventType:function(r){return r.search("drag")===0||r.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},Jo=qr;function Yn(r){var n=r.interaction,o=r.iEvent,a=r.phase;if(n.prepared.name==="gesture"){var u=n.pointers.map((function(b){return b.pointer})),c=a==="start",p=a==="end",d=n.interactable.options.deltaSource;if(o.touches=[u[0],u[1]],c)o.distance=$n(u,d),o.box=Rn(u),o.scale=1,o.ds=0,o.angle=Fn(u,d),o.da=0,n.gesture.startDistance=o.distance,n.gesture.startAngle=o.angle;else if(p||n.pointers.length<2){var v=n.prevEvent;o.distance=v.distance,o.box=v.box,o.scale=v.scale,o.ds=0,o.angle=v.angle,o.da=0}else o.distance=$n(u,d),o.box=Rn(u),o.scale=o.distance/n.gesture.startDistance,o.angle=Fn(u,d),o.ds=o.scale-n.gesture.scale,o.da=o.angle-n.gesture.angle;n.gesture.distance=o.distance,n.gesture.angle=o.angle,S.number(o.scale)&&o.scale!==1/0&&!isNaN(o.scale)&&(n.gesture.scale=o.scale)}}var Gn={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(r){var n=r.actions,o=r.Interactable,a=r.defaults;o.prototype.gesturable=function(u){return S.object(u)?(this.options.gesture.enabled=u.enabled!==!1,this.setPerAction("gesture",u),this.setOnEvents("gesture",u),this):S.bool(u)?(this.options.gesture.enabled=u,this):this.options.gesture},n.map.gesture=Gn,n.methodDict.gesture="gesturable",a.actions.gesture=Gn.defaults},listeners:{"interactions:action-start":Yn,"interactions:action-move":Yn,"interactions:action-end":Yn,"interactions:new":function(r){r.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(r){if(!(r.interaction.pointers.length<2)){var n=r.interactable.options.gesture;if(n&&n.enabled)return r.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(r){return r.search("gesture")===0}},Ko=Gn;function Qo(r,n,o,a,u,c,p){if(!n)return!1;if(n===!0){var d=S.number(c.width)?c.width:c.right-c.left,v=S.number(c.height)?c.height:c.bottom-c.top;if(p=Math.min(p,Math.abs((r==="left"||r==="right"?d:v)/2)),d<0&&(r==="left"?r="right":r==="right"&&(r="left")),v<0&&(r==="top"?r="bottom":r==="bottom"&&(r="top")),r==="left"){var b=d>=0?c.left:c.right;return o.x<b+p}if(r==="top"){var y=v>=0?c.top:c.bottom;return o.y<y+p}if(r==="right")return o.x>(d>=0?c.right:c.left)-p;if(r==="bottom")return o.y>(v>=0?c.bottom:c.top)-p}return!!S.element(a)&&(S.element(n)?n===a:bt(a,n,u))}function Zr(r){var n=r.iEvent,o=r.interaction;if(o.prepared.name==="resize"&&o.resizeAxes){var a=n;o.interactable.options.resize.square?(o.resizeAxes==="y"?a.delta.x=a.delta.y:a.delta.y=a.delta.x,a.axes="xy"):(a.axes=o.resizeAxes,o.resizeAxes==="x"?a.delta.y=0:o.resizeAxes==="y"&&(a.delta.x=0))}}var Bt,ae,Wt={id:"actions/resize",before:["actions/drag"],install:function(r){var n=r.actions,o=r.browser,a=r.Interactable,u=r.defaults;Wt.cursors=(function(c){return c.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}})(o),Wt.defaultMargin=o.supportsTouch||o.supportsPointerEvent?20:10,a.prototype.resizable=function(c){return(function(p,d,v){return S.object(d)?(p.options.resize.enabled=d.enabled!==!1,p.setPerAction("resize",d),p.setOnEvents("resize",d),S.string(d.axis)&&/^x$|^y$|^xy$/.test(d.axis)?p.options.resize.axis=d.axis:d.axis===null&&(p.options.resize.axis=v.defaults.actions.resize.axis),S.bool(d.preserveAspectRatio)?p.options.resize.preserveAspectRatio=d.preserveAspectRatio:S.bool(d.square)&&(p.options.resize.square=d.square),p):S.bool(d)?(p.options.resize.enabled=d,p):p.options.resize})(this,c,r)},n.map.resize=Wt,n.methodDict.resize="resizable",u.actions.resize=Wt.defaults},listeners:{"interactions:new":function(r){r.interaction.resizeAxes="xy"},"interactions:action-start":function(r){(function(n){var o=n.iEvent,a=n.interaction;if(a.prepared.name==="resize"&&a.prepared.edges){var u=o,c=a.rect;a._rects={start:P({},c),corrected:P({},c),previous:P({},c),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},u.edges=a.prepared.edges,u.rect=a._rects.corrected,u.deltaRect=a._rects.delta}})(r),Zr(r)},"interactions:action-move":function(r){(function(n){var o=n.iEvent,a=n.interaction;if(a.prepared.name==="resize"&&a.prepared.edges){var u=o,c=a.interactable.options.resize.invert,p=c==="reposition"||c==="negate",d=a.rect,v=a._rects,b=v.start,y=v.corrected,_=v.delta,D=v.previous;if(P(D,y),p){if(P(y,d),c==="reposition"){if(y.top>y.bottom){var O=y.top;y.top=y.bottom,y.bottom=O}if(y.left>y.right){var A=y.left;y.left=y.right,y.right=A}}}else y.top=Math.min(d.top,b.bottom),y.bottom=Math.max(d.bottom,b.top),y.left=Math.min(d.left,b.right),y.right=Math.max(d.right,b.left);for(var I in y.width=y.right-y.left,y.height=y.bottom-y.top,y)_[I]=y[I]-D[I];u.edges=a.prepared.edges,u.rect=y,u.deltaRect=_}})(r),Zr(r)},"interactions:action-end":function(r){var n=r.iEvent,o=r.interaction;if(o.prepared.name==="resize"&&o.prepared.edges){var a=n;a.edges=o.prepared.edges,a.rect=o._rects.corrected,a.deltaRect=o._rects.delta}},"auto-start:check":function(r){var n=r.interaction,o=r.interactable,a=r.element,u=r.rect,c=r.buttons;if(u){var p=P({},n.coords.cur.page),d=o.options.resize;if(d&&d.enabled&&(!n.pointerIsDown||!/mouse|pointer/.test(n.pointerType)||(c&d.mouseButtons)!=0)){if(S.object(d.edges)){var v={left:!1,right:!1,top:!1,bottom:!1};for(var b in v)v[b]=Qo(b,d.edges[b],p,n._latestPointer.eventTarget,a,u,d.margin||Wt.defaultMargin);v.left=v.left&&!v.right,v.top=v.top&&!v.bottom,(v.left||v.right||v.top||v.bottom)&&(r.action={name:"resize",edges:v})}else{var y=d.axis!=="y"&&p.x>u.right-Wt.defaultMargin,_=d.axis!=="x"&&p.y>u.bottom-Wt.defaultMargin;(y||_)&&(r.action={name:"resize",axes:(y?"x":"")+(_?"y":"")})}return!r.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(r){var n=r.edges,o=r.axis,a=r.name,u=Wt.cursors,c=null;if(o)c=u[a+o];else if(n){for(var p="",d=0,v=["top","bottom","left","right"];d<v.length;d++){var b=v[d];n[b]&&(p+=b)}c=u[p]}return c},filterEventType:function(r){return r.search("resize")===0},defaultMargin:null},ts=Wt,es={id:"actions",install:function(r){r.usePlugin(Ko),r.usePlugin(ts),r.usePlugin(Ct),r.usePlugin(Jo)}},Jr=0,ne={request:function(r){return Bt(r)},cancel:function(r){return ae(r)},init:function(r){if(Bt=r.requestAnimationFrame,ae=r.cancelAnimationFrame,!Bt)for(var n=["ms","moz","webkit","o"],o=0;o<n.length;o++){var a=n[o];Bt=r["".concat(a,"RequestAnimationFrame")],ae=r["".concat(a,"CancelAnimationFrame")]||r["".concat(a,"CancelRequestAnimationFrame")]}Bt=Bt&&Bt.bind(r),ae=ae&&ae.bind(r),Bt||(Bt=function(u){var c=Date.now(),p=Math.max(0,16-(c-Jr)),d=r.setTimeout((function(){u(c+p)}),p);return Jr=c+p,d},ae=function(u){return clearTimeout(u)})}},V={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(r){V.isScrolling=!0,ne.cancel(V.i),r.autoScroll=V,V.interaction=r,V.prevTime=V.now(),V.i=ne.request(V.scroll)},stop:function(){V.isScrolling=!1,V.interaction&&(V.interaction.autoScroll=null),ne.cancel(V.i)},scroll:function(){var r=V.interaction,n=r.interactable,o=r.element,a=r.prepared.name,u=n.options[a].autoScroll,c=Kr(u.container,n,o),p=V.now(),d=(p-V.prevTime)/1e3,v=u.speed*d;if(v>=1){var b={x:V.x*v,y:V.y*v};if(b.x||b.y){var y=Qr(c);S.window(c)?c.scrollBy(b.x,b.y):c&&(c.scrollLeft+=b.x,c.scrollTop+=b.y);var _=Qr(c),D={x:_.x-y.x,y:_.y-y.y};(D.x||D.y)&&n.fire({type:"autoscroll",target:o,interactable:n,delta:D,interaction:r,container:c})}V.prevTime=p}V.isScrolling&&(ne.cancel(V.i),V.i=ne.request(V.scroll))},check:function(r,n){var o;return(o=r.options[n].autoScroll)==null?void 0:o.enabled},onInteractionMove:function(r){var n=r.interaction,o=r.pointer;if(n.interacting()&&V.check(n.interactable,n.prepared.name))if(n.simulation)V.x=V.y=0;else{var a,u,c,p,d=n.interactable,v=n.element,b=n.prepared.name,y=d.options[b].autoScroll,_=Kr(y.container,d,v);if(S.window(_))p=o.clientX<V.margin,a=o.clientY<V.margin,u=o.clientX>_.innerWidth-V.margin,c=o.clientY>_.innerHeight-V.margin;else{var D=wt(_);p=o.clientX<D.left+V.margin,a=o.clientY<D.top+V.margin,u=o.clientX>D.right-V.margin,c=o.clientY>D.bottom-V.margin}V.x=u?1:p?-1:0,V.y=c?1:a?-1:0,V.isScrolling||(V.margin=y.margin,V.speed=y.speed,V.start(n))}}};function Kr(r,n,o){return(S.string(r)?Q(r,n,o):r)||nt(o)}function Qr(r){return S.window(r)&&(r=window.document.body),{x:r.scrollLeft,y:r.scrollTop}}var ns={id:"auto-scroll",install:function(r){var n=r.defaults,o=r.actions;r.autoScroll=V,V.now=function(){return r.now()},o.phaselessTypes.autoscroll=!0,n.perAction.autoScroll=V.defaults},listeners:{"interactions:new":function(r){r.interaction.autoScroll=null},"interactions:destroy":function(r){r.interaction.autoScroll=null,V.stop(),V.interaction&&(V.interaction=null)},"interactions:stop":V.stop,"interactions:action-move":function(r){return V.onInteractionMove(r)}}},rs=ns;function ze(r,n){var o=!1;return function(){return o||(et.console.warn(n),o=!0),r.apply(this,arguments)}}function Hn(r,n){return r.name=n.name,r.axis=n.axis,r.edges=n.edges,r}function is(r){return S.bool(r)?(this.options.styleCursor=r,this):r===null?(delete this.options.styleCursor,this):this.options.styleCursor}function os(r){return S.func(r)?(this.options.actionChecker=r,this):r===null?(delete this.options.actionChecker,this):this.options.actionChecker}var ss={id:"auto-start/interactableMethods",install:function(r){var n=r.Interactable;n.prototype.getAction=function(o,a,u,c){var p=(function(d,v,b,y,_){var D=d.getRect(y),O=v.buttons||{0:1,1:4,3:8,4:16}[v.button],A={action:null,interactable:d,interaction:b,element:y,rect:D,buttons:O};return _.fire("auto-start:check",A),A.action})(this,a,u,c,r);return this.options.actionChecker?this.options.actionChecker(o,a,p,this,c,u):p},n.prototype.ignoreFrom=ze((function(o){return this._backCompatOption("ignoreFrom",o)}),"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),n.prototype.allowFrom=ze((function(o){return this._backCompatOption("allowFrom",o)}),"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),n.prototype.actionChecker=os,n.prototype.styleCursor=is}};function ti(r,n,o,a,u){return n.testIgnoreAllow(n.options[r.name],o,a)&&n.options[r.name].enabled&&nn(n,o,r,u)?r:null}function as(r,n,o,a,u,c,p){for(var d=0,v=a.length;d<v;d++){var b=a[d],y=u[d],_=b.getAction(n,o,r,y);if(_){var D=ti(_,b,y,c,p);if(D)return{action:D,interactable:b,element:y}}}return{action:null,interactable:null,element:null}}function ei(r,n,o,a,u){var c=[],p=[],d=a;function v(y){c.push(y),p.push(d)}for(;S.element(d);){c=[],p=[],u.interactables.forEachMatch(d,v);var b=as(r,n,o,c,p,a,u);if(b.action&&!b.interactable.options[b.action.name].manualStart)return b;d=W(d)}return{action:null,interactable:null,element:null}}function ni(r,n,o){var a=n.action,u=n.interactable,c=n.element;a=a||{name:null},r.interactable=u,r.element=c,Hn(r.prepared,a),r.rect=u&&a.name?u.getRect(c):null,ii(r,o),o.fire("autoStart:prepared",{interaction:r})}function nn(r,n,o,a){var u=r.options,c=u[o.name].max,p=u[o.name].maxPerElement,d=a.autoStart.maxInteractions,v=0,b=0,y=0;if(!(c&&p&&d))return!1;for(var _=0,D=a.interactions.list;_<D.length;_++){var O=D[_],A=O.prepared.name;if(O.interacting()&&(++v>=d||O.interactable===r&&((b+=A===o.name?1:0)>=c||O.element===n&&(y++,A===o.name&&y>=p))))return!1}return d>0}function ri(r,n){return S.number(r)?(n.autoStart.maxInteractions=r,this):n.autoStart.maxInteractions}function Bn(r,n,o){var a=o.autoStart.cursorElement;a&&a!==r&&(a.style.cursor=""),r.ownerDocument.documentElement.style.cursor=n,r.style.cursor=n,o.autoStart.cursorElement=n?r:null}function ii(r,n){var o=r.interactable,a=r.element,u=r.prepared;if(r.pointerType==="mouse"&&o&&o.options.styleCursor){var c="";if(u.name){var p=o.options[u.name].cursorChecker;c=S.func(p)?p(u,o,a,r._interacting):n.actions.map[u.name].getCursor(u)}Bn(r.element,c||"",n)}else n.autoStart.cursorElement&&Bn(n.autoStart.cursorElement,"",n)}var ls={id:"auto-start/base",before:["actions"],install:function(r){var n=r.interactStatic,o=r.defaults;r.usePlugin(ss),o.base.actionChecker=null,o.base.styleCursor=!0,P(o.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),n.maxInteractions=function(a){return ri(a,r)},r.autoStart={maxInteractions:1/0,withinInteractionLimit:nn,cursorElement:null}},listeners:{"interactions:down":function(r,n){var o=r.interaction,a=r.pointer,u=r.event,c=r.eventTarget;o.interacting()||ni(o,ei(o,a,u,c,n),n)},"interactions:move":function(r,n){(function(o,a){var u=o.interaction,c=o.pointer,p=o.event,d=o.eventTarget;u.pointerType!=="mouse"||u.pointerIsDown||u.interacting()||ni(u,ei(u,c,p,d,a),a)})(r,n),(function(o,a){var u=o.interaction;if(u.pointerIsDown&&!u.interacting()&&u.pointerWasMoved&&u.prepared.name){a.fire("autoStart:before-start",o);var c=u.interactable,p=u.prepared.name;p&&c&&(c.options[p].manualStart||!nn(c,u.element,u.prepared,a)?u.stop():(u.start(u.prepared,c,u.element),ii(u,a)))}})(r,n)},"interactions:stop":function(r,n){var o=r.interaction,a=o.interactable;a&&a.options.styleCursor&&Bn(o.element,"",n)}},maxInteractions:ri,withinInteractionLimit:nn,validateAction:ti},Wn=ls,us={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(r,n){var o=r.interaction,a=r.eventTarget,u=r.dx,c=r.dy;if(o.prepared.name==="drag"){var p=Math.abs(u),d=Math.abs(c),v=o.interactable.options.drag,b=v.startAxis,y=p>d?"x":p<d?"y":"xy";if(o.prepared.axis=v.lockAxis==="start"?y[0]:v.lockAxis,y!=="xy"&&b!=="xy"&&b!==y){o.prepared.name=null;for(var _=a,D=function(A){if(A!==o.interactable){var I=o.interactable.options.drag;if(!I.manualStart&&A.testIgnoreAllow(I,_,a)){var N=A.getAction(o.downPointer,o.downEvent,o,_);if(N&&N.name==="drag"&&(function($,G){if(!G)return!1;var J=G.options.drag.startAxis;return $==="xy"||J==="xy"||J===$})(y,A)&&Wn.validateAction(N,A,_,a,n))return A}}};S.element(_);){var O=n.interactables.forEachMatch(_,D);if(O){o.prepared.name="drag",o.interactable=O,o.element=_;break}_=W(_)}}}}}};function Xn(r){var n=r.prepared&&r.prepared.name;if(!n)return null;var o=r.interactable.options;return o[n].hold||o[n].delay}var cs={id:"auto-start/hold",install:function(r){var n=r.defaults;r.usePlugin(Wn),n.perAction.hold=0,n.perAction.delay=0},listeners:{"interactions:new":function(r){r.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(r){var n=r.interaction,o=Xn(n);o>0&&(n.autoStartHoldTimer=setTimeout((function(){n.start(n.prepared,n.interactable,n.element)}),o))},"interactions:move":function(r){var n=r.interaction,o=r.duplicate;n.autoStartHoldTimer&&n.pointerWasMoved&&!o&&(clearTimeout(n.autoStartHoldTimer),n.autoStartHoldTimer=null)},"autoStart:before-start":function(r){var n=r.interaction;Xn(n)>0&&(n.prepared.name=null)}},getHoldDuration:Xn},hs=cs,fs={id:"auto-start",install:function(r){r.usePlugin(Wn),r.usePlugin(hs),r.usePlugin(us)}},ps=function(r){return/^(always|never|auto)$/.test(r)?(this.options.preventDefault=r,this):S.bool(r)?(this.options.preventDefault=r?"always":"never",this):this.options.preventDefault};function ds(r){var n=r.interaction,o=r.event;n.interactable&&n.interactable.checkAndPreventDefault(o)}var oi={id:"core/interactablePreventDefault",install:function(r){var n=r.Interactable;n.prototype.preventDefault=ps,n.prototype.checkAndPreventDefault=function(o){return(function(a,u,c){var p=a.options.preventDefault;if(p!=="never")if(p!=="always"){if(u.events.supportsPassive&&/^touch(start|move)$/.test(c.type)){var d=nt(c.target).document,v=u.getDocOptions(d);if(!v||!v.events||v.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(c.type)||S.element(c.target)&&q(c.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||c.preventDefault()}else c.preventDefault()})(this,r,o)},r.interactions.docEvents.push({type:"dragstart",listener:function(o){for(var a=0,u=r.interactions.list;a<u.length;a++){var c=u[a];if(c.element&&(c.element===o.target||U(c.element,o.target)))return void c.interactable.checkAndPreventDefault(o)}}})},listeners:["down","move","up","cancel"].reduce((function(r,n){return r["interactions:".concat(n)]=ds,r}),{})};function rn(r,n){if(n.phaselessTypes[r])return!0;for(var o in n.map)if(r.indexOf(o)===0&&r.substr(o.length)in n.phases)return!0;return!1}function ve(r){var n={};for(var o in r){var a=r[o];S.plainObject(a)?n[o]=ve(a):S.array(a)?n[o]=Br(a):n[o]=a}return n}var Vn=(function(){function r(n){h(this,r),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=n,this.result=on(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return g(r,[{key:"start",value:function(n,o){var a,u,c=n.phase,p=this.interaction,d=(function(b){var y=b.interactable.options[b.prepared.name],_=y.modifiers;return _&&_.length?_:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map((function(D){var O=y[D];return O&&O.enabled&&{options:O,methods:O._methods}})).filter((function(D){return!!D}))})(p);this.prepareStates(d),this.startEdges=P({},p.edges),this.edges=P({},this.startEdges),this.startOffset=(a=p.rect,u=o,a?{left:u.x-a.left,top:u.y-a.top,right:a.right-u.x,bottom:a.bottom-u.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var v=this.fillArg({phase:c,pageCoords:o,preEnd:!1});return this.result=on(),this.startAll(v),this.result=this.setAll(v)}},{key:"fillArg",value:function(n){var o=this.interaction;return n.interaction=o,n.interactable=o.interactable,n.element=o.element,n.rect||(n.rect=o.rect),n.edges||(n.edges=this.startEdges),n.startOffset=this.startOffset,n}},{key:"startAll",value:function(n){for(var o=0,a=this.states;o<a.length;o++){var u=a[o];u.methods.start&&(n.state=u,u.methods.start(n))}}},{key:"setAll",value:function(n){var o=n.phase,a=n.preEnd,u=n.skipModifiers,c=n.rect,p=n.edges;n.coords=P({},n.pageCoords),n.rect=P({},c),n.edges=P({},p);for(var d=u?this.states.slice(u):this.states,v=on(n.coords,n.rect),b=0;b<d.length;b++){var y,_=d[b],D=_.options,O=P({},n.coords),A=null;(y=_.methods)!=null&&y.set&&this.shouldDo(D,a,o)&&(n.state=_,A=_.methods.set(n),at(n.edges,n.rect,{x:n.coords.x-O.x,y:n.coords.y-O.y})),v.eventProps.push(A)}P(this.edges,n.edges),v.delta.x=n.coords.x-n.pageCoords.x,v.delta.y=n.coords.y-n.pageCoords.y,v.rectDelta.left=n.rect.left-c.left,v.rectDelta.right=n.rect.right-c.right,v.rectDelta.top=n.rect.top-c.top,v.rectDelta.bottom=n.rect.bottom-c.bottom;var I=this.result.coords,N=this.result.rect;if(I&&N){var $=v.rect.left!==N.left||v.rect.right!==N.right||v.rect.top!==N.top||v.rect.bottom!==N.bottom;v.changed=$||I.x!==v.coords.x||I.y!==v.coords.y}return v}},{key:"applyToInteraction",value:function(n){var o=this.interaction,a=n.phase,u=o.coords.cur,c=o.coords.start,p=this.result,d=this.startDelta,v=p.delta;a==="start"&&P(this.startDelta,p.delta);for(var b=0,y=[[c,d],[u,v]];b<y.length;b++){var _=y[b],D=_[0],O=_[1];D.page.x+=O.x,D.page.y+=O.y,D.client.x+=O.x,D.client.y+=O.y}var A=this.result.rectDelta,I=n.rect||o.rect;I.left+=A.left,I.right+=A.right,I.top+=A.top,I.bottom+=A.bottom,I.width=I.right-I.left,I.height=I.bottom-I.top}},{key:"setAndApply",value:function(n){var o=this.interaction,a=n.phase,u=n.preEnd,c=n.skipModifiers,p=this.setAll(this.fillArg({preEnd:u,phase:a,pageCoords:n.modifiedCoords||o.coords.cur.page}));if(this.result=p,!p.changed&&(!c||c<this.states.length)&&o.interacting())return!1;if(n.modifiedCoords){var d=o.coords.cur.page,v={x:n.modifiedCoords.x-d.x,y:n.modifiedCoords.y-d.y};p.coords.x+=v.x,p.coords.y+=v.y,p.delta.x+=v.x,p.delta.y+=v.y}this.applyToInteraction(n)}},{key:"beforeEnd",value:function(n){var o=n.interaction,a=n.event,u=this.states;if(u&&u.length){for(var c=!1,p=0;p<u.length;p++){var d=u[p];n.state=d;var v=d.options,b=d.methods,y=b.beforeEnd&&b.beforeEnd(n);if(y)return this.endResult=y,!1;c=c||!c&&this.shouldDo(v,!0,n.phase,!0)}c&&o.move({event:a,preEnd:!0})}}},{key:"stop",value:function(n){var o=n.interaction;if(this.states&&this.states.length){var a=P({states:this.states,interactable:o.interactable,element:o.element,rect:null},n);this.fillArg(a);for(var u=0,c=this.states;u<c.length;u++){var p=c[u];a.state=p,p.methods.stop&&p.methods.stop(a)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(n){this.states=[];for(var o=0;o<n.length;o++){var a=n[o],u=a.options,c=a.methods,p=a.name;this.states.push({options:u,methods:c,index:o,name:p})}return this.states}},{key:"restoreInteractionCoords",value:function(n){var o=n.interaction,a=o.coords,u=o.rect,c=o.modification;if(c.result){for(var p=c.startDelta,d=c.result,v=d.delta,b=d.rectDelta,y=0,_=[[a.start,p],[a.cur,v]];y<_.length;y++){var D=_[y],O=D[0],A=D[1];O.page.x-=A.x,O.page.y-=A.y,O.client.x-=A.x,O.client.y-=A.y}u.left-=b.left,u.right-=b.right,u.top-=b.top,u.bottom-=b.bottom}}},{key:"shouldDo",value:function(n,o,a,u){return!(!n||n.enabled===!1||u&&!n.endOnly||n.endOnly&&!o||a==="start"&&!n.setStart)}},{key:"copyFrom",value:function(n){this.startOffset=n.startOffset,this.startDelta=n.startDelta,this.startEdges=n.startEdges,this.edges=n.edges,this.states=n.states.map((function(o){return ve(o)})),this.result=on(P({},n.result.coords),P({},n.result.rect))}},{key:"destroy",value:function(){for(var n in this)this[n]=null}}]),r})();function on(r,n){return{rect:n,coords:r,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function re(r,n){var o=r.defaults,a={start:r.start,set:r.set,beforeEnd:r.beforeEnd,stop:r.stop},u=function(c){var p=c||{};for(var d in p.enabled=p.enabled!==!1,o)d in p||(p[d]=o[d]);var v={options:p,methods:a,name:n,enable:function(){return p.enabled=!0,v},disable:function(){return p.enabled=!1,v}};return v};return n&&typeof n=="string"&&(u._defaults=o,u._methods=a),u}function Ae(r){var n=r.iEvent,o=r.interaction.modification.result;o&&(n.modifiers=o.eventProps)}var gs={id:"modifiers/base",before:["actions"],install:function(r){r.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(r){var n=r.interaction;n.modification=new Vn(n)},"interactions:before-action-start":function(r){var n=r.interaction,o=r.interaction.modification;o.start(r,n.coords.start.page),n.edges=o.edges,o.applyToInteraction(r)},"interactions:before-action-move":function(r){var n=r.interaction,o=n.modification,a=o.setAndApply(r);return n.edges=o.edges,a},"interactions:before-action-end":function(r){var n=r.interaction,o=n.modification,a=o.beforeEnd(r);return n.edges=o.startEdges,a},"interactions:action-start":Ae,"interactions:action-move":Ae,"interactions:action-end":Ae,"interactions:after-action-start":function(r){return r.interaction.modification.restoreInteractionCoords(r)},"interactions:after-action-move":function(r){return r.interaction.modification.restoreInteractionCoords(r)},"interactions:stop":function(r){return r.interaction.modification.stop(r)}}},si=gs,ai={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},qn=(function(r){m(o,r);var n=k(o);function o(a,u,c,p,d,v,b){var y;h(this,o),(y=n.call(this,a)).relatedTarget=null,y.screenX=void 0,y.screenY=void 0,y.button=void 0,y.buttons=void 0,y.ctrlKey=void 0,y.shiftKey=void 0,y.altKey=void 0,y.metaKey=void 0,y.page=void 0,y.client=void 0,y.delta=void 0,y.rect=void 0,y.x0=void 0,y.y0=void 0,y.t0=void 0,y.dt=void 0,y.duration=void 0,y.clientX0=void 0,y.clientY0=void 0,y.velocity=void 0,y.speed=void 0,y.swipe=void 0,y.axes=void 0,y.preEnd=void 0,d=d||a.element;var _=a.interactable,D=(_&&_.options||ai).deltaSource,O=dt(_,d,c),A=p==="start",I=p==="end",N=A?E(y):a.prevEvent,$=A?a.coords.start:I?{page:N.page,client:N.client,timeStamp:a.coords.cur.timeStamp}:a.coords.cur;return y.page=P({},$.page),y.client=P({},$.client),y.rect=P({},a.rect),y.timeStamp=$.timeStamp,I||(y.page.x-=O.x,y.page.y-=O.y,y.client.x-=O.x,y.client.y-=O.y),y.ctrlKey=u.ctrlKey,y.altKey=u.altKey,y.shiftKey=u.shiftKey,y.metaKey=u.metaKey,y.button=u.button,y.buttons=u.buttons,y.target=d,y.currentTarget=d,y.preEnd=v,y.type=b||c+(p||""),y.interactable=_,y.t0=A?a.pointers[a.pointers.length-1].downTime:N.t0,y.x0=a.coords.start.page.x-O.x,y.y0=a.coords.start.page.y-O.y,y.clientX0=a.coords.start.client.x-O.x,y.clientY0=a.coords.start.client.y-O.y,y.delta=A||I?{x:0,y:0}:{x:y[D].x-N[D].x,y:y[D].y-N[D].y},y.dt=a.coords.delta.timeStamp,y.duration=y.timeStamp-y.t0,y.velocity=P({},a.coords.velocity[D]),y.speed=ee(y.velocity.x,y.velocity.y),y.swipe=I||p==="inertiastart"?y.getSwipe():null,y}return g(o,[{key:"getSwipe",value:function(){var a=this._interaction;if(a.prevEvent.speed<600||this.timeStamp-a.prevEvent.timeStamp>150)return null;var u=180*Math.atan2(a.prevEvent.velocityY,a.prevEvent.velocityX)/Math.PI;u<0&&(u+=360);var c=112.5<=u&&u<247.5,p=202.5<=u&&u<337.5;return{up:p,down:!p&&22.5<=u&&u<157.5,left:c,right:!c&&(292.5<=u||u<67.5),angle:u,speed:a.prevEvent.speed,velocity:{x:a.prevEvent.velocityX,y:a.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),o})(en);Object.defineProperties(qn.prototype,{pageX:{get:function(){return this.page.x},set:function(r){this.page.x=r}},pageY:{get:function(){return this.page.y},set:function(r){this.page.y=r}},clientX:{get:function(){return this.client.x},set:function(r){this.client.x=r}},clientY:{get:function(){return this.client.y},set:function(r){this.client.y=r}},dx:{get:function(){return this.delta.x},set:function(r){this.delta.x=r}},dy:{get:function(){return this.delta.y},set:function(r){this.delta.y=r}},velocityX:{get:function(){return this.velocity.x},set:function(r){this.velocity.x=r}},velocityY:{get:function(){return this.velocity.y},set:function(r){this.velocity.y=r}}});var ms=g((function r(n,o,a,u,c){h(this,r),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=n,this.pointer=o,this.event=a,this.downTime=u,this.downTarget=c})),vs=(function(r){return r.interactable="",r.element="",r.prepared="",r.pointerIsDown="",r.pointerWasMoved="",r._proxy="",r})({}),li=(function(r){return r.start="",r.move="",r.end="",r.stop="",r.interacting="",r})({}),ys=0,xs=(function(){function r(n){var o=this,a=n.pointerType,u=n.scopeFire;h(this,r),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=ze((function(y){this.move(y)}),"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=ys++,this._scopeFire=u,this.pointerType=a;var c=this;this._proxy={};var p=function(y){Object.defineProperty(o._proxy,y,{get:function(){return c[y]}})};for(var d in vs)p(d);var v=function(y){Object.defineProperty(o._proxy,y,{value:function(){return c[y].apply(c,arguments)}})};for(var b in li)v(b);this._scopeFire("interactions:new",{interaction:this})}return g(r,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(n,o,a){var u=this.updatePointer(n,o,a,!0),c=this.pointers[u];this._scopeFire("interactions:down",{pointer:n,event:o,eventTarget:a,pointerIndex:u,pointerInfo:c,type:"down",interaction:this})}},{key:"start",value:function(n,o,a){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(n.name==="gesture"?2:1)||!o.options[n.name].enabled)&&(Hn(this.prepared,n),this.interactable=o,this.element=a,this.rect=o.getRect(a),this.edges=this.prepared.edges?P({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(n,o,a){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(n,o,a,!1);var u,c,p=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(u=this.coords.cur.client.x-this.coords.start.client.x,c=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=ee(u,c)>this.pointerMoveTolerance);var d,v,b,y=this.getPointerIndex(n),_={pointer:n,pointerIndex:y,pointerInfo:this.pointers[y],event:o,type:"move",eventTarget:a,dx:u,dy:c,duplicate:p,interaction:this};p||(d=this.coords.velocity,v=this.coords.delta,b=Math.max(v.timeStamp/1e3,.001),d.page.x=v.page.x/b,d.page.y=v.page.y/b,d.client.x=v.client.x/b,d.client.y=v.client.y/b,d.timeStamp=b),this._scopeFire("interactions:move",_),p||this.simulation||(this.interacting()&&(_.type=null,this.move(_)),this.pointerWasMoved&&Qe(this.coords.prev,this.coords.cur))}},{key:"move",value:function(n){n&&n.event||Fr(this.coords.delta),(n=P({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},n||{})).phase="move",this._doPhase(n)}},{key:"pointerUp",value:function(n,o,a,u){var c=this.getPointerIndex(n);c===-1&&(c=this.updatePointer(n,o,a,!1));var p=/cancel$/i.test(o.type)?"cancel":"up";this._scopeFire("interactions:".concat(p),{pointer:n,pointerIndex:c,pointerInfo:this.pointers[c],event:o,eventTarget:a,type:p,curEventTarget:u,interaction:this}),this.simulation||this.end(o),this.removePointer(n,o)}},{key:"documentBlur",value:function(n){this.end(n),this._scopeFire("interactions:blur",{event:n,type:"blur",interaction:this})}},{key:"end",value:function(n){var o;this._ending=!0,n=n||this._latestPointer.event,this.interacting()&&(o=this._doPhase({event:n,interaction:this,phase:"end"})),this._ending=!1,o===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(n){var o=ke(n);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:De(this.pointers,(function(a){return a.id===o}))}},{key:"getPointerInfo",value:function(n){return this.pointers[this.getPointerIndex(n)]}},{key:"updatePointer",value:function(n,o,a,u){var c,p,d,v=ke(n),b=this.getPointerIndex(n),y=this.pointers[b];return u=u!==!1&&(u||/(down|start)$/i.test(o.type)),y?y.pointer=n:(y=new ms(v,n,o,null,null),b=this.pointers.length,this.pointers.push(y)),Zo(this.coords.cur,this.pointers.map((function(_){return _.pointer})),this._now()),c=this.coords.delta,p=this.coords.prev,d=this.coords.cur,c.page.x=d.page.x-p.page.x,c.page.y=d.page.y-p.page.y,c.client.x=d.client.x-p.client.x,c.client.y=d.client.y-p.client.y,c.timeStamp=d.timeStamp-p.timeStamp,u&&(this.pointerIsDown=!0,y.downTime=this.coords.cur.timeStamp,y.downTarget=a,Ke(this.downPointer,n),this.interacting()||(Qe(this.coords.start,this.coords.cur),Qe(this.coords.prev,this.coords.cur),this.downEvent=o,this.pointerWasMoved=!1)),this._updateLatestPointer(n,o,a),this._scopeFire("interactions:update-pointer",{pointer:n,event:o,eventTarget:a,down:u,pointerInfo:y,pointerIndex:b,interaction:this}),b}},{key:"removePointer",value:function(n,o){var a=this.getPointerIndex(n);if(a!==-1){var u=this.pointers[a];this._scopeFire("interactions:remove-pointer",{pointer:n,event:o,eventTarget:null,pointerIndex:a,pointerInfo:u,interaction:this}),this.pointers.splice(a,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(n,o,a){this._latestPointer.pointer=n,this._latestPointer.event=o,this._latestPointer.eventTarget=a}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(n,o,a,u){return new qn(this,n,this.prepared.name,o,this.element,a,u)}},{key:"_fireEvent",value:function(n){var o;(o=this.interactable)==null||o.fire(n),(!this.prevEvent||n.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=n)}},{key:"_doPhase",value:function(n){var o=n.event,a=n.phase,u=n.preEnd,c=n.type,p=this.rect;if(p&&a==="move"&&(at(this.edges,p,this.coords.delta[this.interactable.options.deltaSource]),p.width=p.right-p.left,p.height=p.bottom-p.top),this._scopeFire("interactions:before-action-".concat(a),n)===!1)return!1;var d=n.iEvent=this._createPreparedEvent(o,a,u,c);return this._scopeFire("interactions:action-".concat(a),n),a==="start"&&(this.prevEvent=d),this._fireEvent(d),this._scopeFire("interactions:after-action-".concat(a),n),!0}},{key:"_now",value:function(){return Date.now()}}]),r})();function ui(r){ci(r.interaction)}function ci(r){if(!(function(o){return!(!o.offset.pending.x&&!o.offset.pending.y)})(r))return!1;var n=r.offset.pending;return Zn(r.coords.cur,n),Zn(r.coords.delta,n),at(r.edges,r.rect,n),n.x=0,n.y=0,!0}function ws(r){var n=r.x,o=r.y;this.offset.pending.x+=n,this.offset.pending.y+=o,this.offset.total.x+=n,this.offset.total.y+=o}function Zn(r,n){var o=r.page,a=r.client,u=n.x,c=n.y;o.x+=u,o.y+=c,a.x+=u,a.y+=c}li.offsetBy="";var bs={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(r){r.Interaction.prototype.offsetBy=ws},listeners:{"interactions:new":function(r){r.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(r){return(function(n){n.pointerIsDown&&(Zn(n.coords.cur,n.offset.total),n.offset.pending.x=0,n.offset.pending.y=0)})(r.interaction)},"interactions:before-action-start":ui,"interactions:before-action-move":ui,"interactions:before-action-end":function(r){var n=r.interaction;if(ci(n))return n.move({offset:!0}),n.end(),!1},"interactions:stop":function(r){var n=r.interaction;n.offset.total.x=0,n.offset.total.y=0,n.offset.pending.x=0,n.offset.pending.y=0}}},hi=bs,_s=(function(){function r(n){h(this,r),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=n}return g(r,[{key:"start",value:function(n){var o=this.interaction,a=sn(o);if(!a||!a.enabled)return!1;var u=o.coords.velocity.client,c=ee(u.x,u.y),p=this.modification||(this.modification=new Vn(o));if(p.copyFrom(o.modification),this.t0=o._now(),this.allowResume=a.allowResume,this.v0=c,this.currentOffset={x:0,y:0},this.startCoords=o.coords.cur.page,this.modifierArg=p.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-o.coords.cur.timeStamp<50&&c>a.minSpeed&&c>a.endSpeed)this.startInertia();else{if(p.result=p.setAll(this.modifierArg),!p.result.changed)return!1;this.startSmoothEnd()}return o.modification.result.rect=null,o.offsetBy(this.targetOffset),o._doPhase({interaction:o,event:n,phase:"inertiastart"}),o.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),o.modification.result.rect=null,this.active=!0,o.simulation=this,!0}},{key:"startInertia",value:function(){var n=this,o=this.interaction.coords.velocity.client,a=sn(this.interaction),u=a.resistance,c=-Math.log(a.endSpeed/this.v0)/u;this.targetOffset={x:(o.x-c)/u,y:(o.y-c)/u},this.te=c,this.lambda_v0=u/this.v0,this.one_ve_v0=1-a.endSpeed/this.v0;var p=this.modification,d=this.modifierArg;d.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},p.result=p.setAll(d),p.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+p.result.delta.x,y:this.targetOffset.y+p.result.delta.y}),this.onNextFrame((function(){return n.inertiaTick()}))}},{key:"startSmoothEnd",value:function(){var n=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame((function(){return n.smoothEndTick()}))}},{key:"onNextFrame",value:function(n){var o=this;this.timeout=ne.request((function(){o.active&&n()}))}},{key:"inertiaTick",value:function(){var n,o,a,u,c,p,d,v=this,b=this.interaction,y=sn(b).resistance,_=(b._now()-this.t0)/1e3;if(_<this.te){var D,O=1-(Math.exp(-y*_)-this.lambda_v0)/this.one_ve_v0;this.isModified?(n=0,o=0,a=this.targetOffset.x,u=this.targetOffset.y,c=this.modifiedOffset.x,p=this.modifiedOffset.y,D={x:fi(d=O,n,a,c),y:fi(d,o,u,p)}):D={x:this.targetOffset.x*O,y:this.targetOffset.y*O};var A={x:D.x-this.currentOffset.x,y:D.y-this.currentOffset.y};this.currentOffset.x+=A.x,this.currentOffset.y+=A.y,b.offsetBy(A),b.move(),this.onNextFrame((function(){return v.inertiaTick()}))}else b.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var n=this,o=this.interaction,a=o._now()-this.t0,u=sn(o).smoothEndDuration;if(a<u){var c={x:pi(a,0,this.targetOffset.x,u),y:pi(a,0,this.targetOffset.y,u)},p={x:c.x-this.currentOffset.x,y:c.y-this.currentOffset.y};this.currentOffset.x+=p.x,this.currentOffset.y+=p.y,o.offsetBy(p),o.move({skipModifiers:this.modifierCount}),this.onNextFrame((function(){return n.smoothEndTick()}))}else o.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(n){var o=n.pointer,a=n.event,u=n.eventTarget,c=this.interaction;c.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),c.updatePointer(o,a,u,!0),c._doPhase({interaction:c,event:a,phase:"resume"}),Qe(c.coords.prev,c.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,ne.cancel(this.timeout)}}]),r})();function sn(r){var n=r.interactable,o=r.prepared;return n&&n.options&&o.name&&n.options[o.name].inertia}var Ts={id:"inertia",before:["modifiers","actions"],install:function(r){var n=r.defaults;r.usePlugin(hi),r.usePlugin(si),r.actions.phases.inertiastart=!0,r.actions.phases.resume=!0,n.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(r){var n=r.interaction;n.inertia=new _s(n)},"interactions:before-action-end":function(r){var n=r.interaction,o=r.event;return(!n._interacting||n.simulation||!n.inertia.start(o))&&null},"interactions:down":function(r){var n=r.interaction,o=r.eventTarget,a=n.inertia;if(a.active)for(var u=o;S.element(u);){if(u===n.element){a.resume(r);break}u=W(u)}},"interactions:stop":function(r){var n=r.interaction.inertia;n.active&&n.stop()},"interactions:before-action-resume":function(r){var n=r.interaction.modification;n.stop(r),n.start(r,r.interaction.coords.cur.page),n.applyToInteraction(r)},"interactions:before-action-inertiastart":function(r){return r.interaction.modification.setAndApply(r)},"interactions:action-resume":Ae,"interactions:action-inertiastart":Ae,"interactions:after-action-inertiastart":function(r){return r.interaction.modification.restoreInteractionCoords(r)},"interactions:after-action-resume":function(r){return r.interaction.modification.restoreInteractionCoords(r)}}};function fi(r,n,o,a){var u=1-r;return u*u*n+2*u*r*o+r*r*a}function pi(r,n,o,a){return-o*(r/=a)*(r-2)+n}var Es=Ts;function di(r,n){for(var o=0;o<n.length;o++){var a=n[o];if(r.immediatePropagationStopped)break;a(r)}}var gi=(function(){function r(n){h(this,r),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=P({},n||{})}return g(r,[{key:"fire",value:function(n){var o,a=this.global;(o=this.types[n.type])&&di(n,o),!n.propagationStopped&&a&&(o=a[n.type])&&di(n,o)}},{key:"on",value:function(n,o){var a=pt(n,o);for(n in a)this.types[n]=Hr(this.types[n]||[],a[n])}},{key:"off",value:function(n,o){var a=pt(n,o);for(n in a){var u=this.types[n];if(u&&u.length)for(var c=0,p=a[n];c<p.length;c++){var d=p[c],v=u.indexOf(d);v!==-1&&u.splice(v,1)}}}},{key:"getRect",value:function(n){return null}}]),r})(),Ss=(function(){function r(n){h(this,r),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=n,Ke(this,n)}return g(r,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),r})();function Oe(r){return S.object(r)?{capture:!!r.capture,passive:!!r.passive}:{capture:!!r,passive:!1}}function an(r,n){return r===n||(typeof r=="boolean"?!!n.capture===r&&!n.passive:!!r.capture==!!n.capture&&!!r.passive==!!n.passive)}var Ms={id:"events",install:function(r){var n,o=[],a={},u=[],c={add:p,remove:d,addDelegate:function(y,_,D,O,A){var I=Oe(A);if(!a[D]){a[D]=[];for(var N=0;N<u.length;N++){var $=u[N];p($,D,v),p($,D,b,!0)}}var G=a[D],J=Pe(G,(function(rt){return rt.selector===y&&rt.context===_}));J||(J={selector:y,context:_,listeners:[]},G.push(J)),J.listeners.push({func:O,options:I})},removeDelegate:function(y,_,D,O,A){var I,N=Oe(A),$=a[D],G=!1;if($)for(I=$.length-1;I>=0;I--){var J=$[I];if(J.selector===y&&J.context===_){for(var rt=J.listeners,X=rt.length-1;X>=0;X--){var K=rt[X];if(K.func===O&&an(K.options,N)){rt.splice(X,1),rt.length||($.splice(I,1),d(_,D,v),d(_,D,b,!0)),G=!0;break}}if(G)break}}},delegateListener:v,delegateUseCapture:b,delegatedEvents:a,documents:u,targets:o,supportsOptions:!1,supportsPassive:!1};function p(y,_,D,O){if(y.addEventListener){var A=Oe(O),I=Pe(o,(function(N){return N.eventTarget===y}));I||(I={eventTarget:y,events:{}},o.push(I)),I.events[_]||(I.events[_]=[]),Pe(I.events[_],(function(N){return N.func===D&&an(N.options,A)}))||(y.addEventListener(_,D,c.supportsOptions?A:A.capture),I.events[_].push({func:D,options:A}))}}function d(y,_,D,O){if(y.addEventListener&&y.removeEventListener){var A=De(o,(function(Mt){return Mt.eventTarget===y})),I=o[A];if(I&&I.events)if(_!=="all"){var N=!1,$=I.events[_];if($){if(D==="all"){for(var G=$.length-1;G>=0;G--){var J=$[G];d(y,_,J.func,J.options)}return}for(var rt=Oe(O),X=0;X<$.length;X++){var K=$[X];if(K.func===D&&an(K.options,rt)){y.removeEventListener(_,D,c.supportsOptions?rt:rt.capture),$.splice(X,1),$.length===0&&(delete I.events[_],N=!0);break}}}N&&!Object.keys(I.events).length&&o.splice(A,1)}else for(_ in I.events)I.events.hasOwnProperty(_)&&d(y,_,"all")}}function v(y,_){for(var D=Oe(_),O=new Ss(y),A=a[y.type],I=Gr(y)[0],N=I;S.element(N);){for(var $=0;$<A.length;$++){var G=A[$],J=G.selector,rt=G.context;if(q(N,J)&&U(rt,I)&&U(rt,N)){var X=G.listeners;O.currentTarget=N;for(var K=0;K<X.length;K++){var Mt=X[K];an(Mt.options,D)&&Mt.func(O)}}}N=W(N)}}function b(y){return v(y,!0)}return(n=r.document)==null||n.createElement("div").addEventListener("test",null,{get capture(){return c.supportsOptions=!0},get passive(){return c.supportsPassive=!0}}),r.events=c,c}},Jn={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(r){for(var n=0,o=Jn.methodOrder;n<o.length;n++){var a=o[n],u=Jn[a](r);if(u)return u}return null},simulationResume:function(r){var n=r.pointerType,o=r.eventType,a=r.eventTarget,u=r.scope;if(!/down|start/i.test(o))return null;for(var c=0,p=u.interactions.list;c<p.length;c++){var d=p[c],v=a;if(d.simulation&&d.simulation.allowResume&&d.pointerType===n)for(;v;){if(v===d.element)return d;v=W(v)}}return null},mouseOrPen:function(r){var n,o=r.pointerId,a=r.pointerType,u=r.eventType,c=r.scope;if(a!=="mouse"&&a!=="pen")return null;for(var p=0,d=c.interactions.list;p<d.length;p++){var v=d[p];if(v.pointerType===a){if(v.simulation&&!mi(v,o))continue;if(v.interacting())return v;n||(n=v)}}if(n)return n;for(var b=0,y=c.interactions.list;b<y.length;b++){var _=y[b];if(!(_.pointerType!==a||/down/i.test(u)&&_.simulation))return _}return null},hasPointer:function(r){for(var n=r.pointerId,o=0,a=r.scope.interactions.list;o<a.length;o++){var u=a[o];if(mi(u,n))return u}return null},idle:function(r){for(var n=r.pointerType,o=0,a=r.scope.interactions.list;o<a.length;o++){var u=a[o];if(u.pointers.length===1){var c=u.interactable;if(c&&(!c.options.gesture||!c.options.gesture.enabled))continue}else if(u.pointers.length>=2)continue;if(!u.interacting()&&n===u.pointerType)return u}return null}};function mi(r,n){return r.pointers.some((function(o){return o.id===n}))}var ks=Jn,Kn=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function vi(r,n){return function(o){var a=n.interactions.list,u=Yr(o),c=Gr(o),p=c[0],d=c[1],v=[];if(/^touch/.test(o.type)){n.prevTouchTime=n.now();for(var b=0,y=o.changedTouches;b<y.length;b++){var _=y[b],D={pointer:_,pointerId:ke(_),pointerType:u,eventType:o.type,eventTarget:p,curEventTarget:d,scope:n},O=yi(D);v.push([D.pointer,D.eventTarget,D.curEventTarget,O])}}else{var A=!1;if(!z.supportsPointerEvent&&/mouse/.test(o.type)){for(var I=0;I<a.length&&!A;I++)A=a[I].pointerType!=="mouse"&&a[I].pointerIsDown;A=A||n.now()-n.prevTouchTime<500||o.timeStamp===0}if(!A){var N={pointer:o,pointerId:ke(o),pointerType:u,eventType:o.type,curEventTarget:d,eventTarget:p,scope:n},$=yi(N);v.push([N.pointer,N.eventTarget,N.curEventTarget,$])}}for(var G=0;G<v.length;G++){var J=v[G],rt=J[0],X=J[1],K=J[2];J[3][r](rt,o,X,K)}}}function yi(r){var n=r.pointerType,o=r.scope,a={interaction:ks.search(r),searchDetails:r};return o.fire("interactions:find",a),a.interaction||o.interactions.new({pointerType:n})}function Qn(r,n){var o=r.doc,a=r.scope,u=r.options,c=a.interactions.docEvents,p=a.events,d=p[n];for(var v in a.browser.isIOS&&!u.events&&(u.events={passive:!1}),p.delegatedEvents)d(o,v,p.delegateListener),d(o,v,p.delegateUseCapture,!0);for(var b=u&&u.events,y=0;y<c.length;y++){var _=c[y];d(o,_.type,_.listener,b)}}var Ds={id:"core/interactions",install:function(r){for(var n={},o=0;o<Kn.length;o++){var a=Kn[o];n[a]=vi(a,r)}var u,c=z.pEventTypes;function p(){for(var d=0,v=r.interactions.list;d<v.length;d++){var b=v[d];if(b.pointerIsDown&&b.pointerType==="touch"&&!b._interacting)for(var y=function(){var O=D[_];r.documents.some((function(A){return U(A.doc,O.downTarget)}))||b.removePointer(O.pointer,O.event)},_=0,D=b.pointers;_<D.length;_++)y()}}(u=M.PointerEvent?[{type:c.down,listener:p},{type:c.down,listener:n.pointerDown},{type:c.move,listener:n.pointerMove},{type:c.up,listener:n.pointerUp},{type:c.cancel,listener:n.pointerUp}]:[{type:"mousedown",listener:n.pointerDown},{type:"mousemove",listener:n.pointerMove},{type:"mouseup",listener:n.pointerUp},{type:"touchstart",listener:p},{type:"touchstart",listener:n.pointerDown},{type:"touchmove",listener:n.pointerMove},{type:"touchend",listener:n.pointerUp},{type:"touchcancel",listener:n.pointerUp}]).push({type:"blur",listener:function(d){for(var v=0,b=r.interactions.list;v<b.length;v++)b[v].documentBlur(d)}}),r.prevTouchTime=0,r.Interaction=(function(d){m(b,d);var v=k(b);function b(){return h(this,b),v.apply(this,arguments)}return g(b,[{key:"pointerMoveTolerance",get:function(){return r.interactions.pointerMoveTolerance},set:function(y){r.interactions.pointerMoveTolerance=y}},{key:"_now",value:function(){return r.now()}}]),b})(xs),r.interactions={list:[],new:function(d){d.scopeFire=function(b,y){return r.fire(b,y)};var v=new r.Interaction(d);return r.interactions.list.push(v),v},listeners:n,docEvents:u,pointerMoveTolerance:1},r.usePlugin(oi)},listeners:{"scope:add-document":function(r){return Qn(r,"add")},"scope:remove-document":function(r){return Qn(r,"remove")},"interactable:unset":function(r,n){for(var o=r.interactable,a=n.interactions.list.length-1;a>=0;a--){var u=n.interactions.list[a];u.interactable===o&&(u.stop(),n.fire("interactions:destroy",{interaction:u}),u.destroy(),n.interactions.list.length>2&&n.interactions.list.splice(a,1))}}},onDocSignal:Qn,doOnInteractions:vi,methodNames:Kn},Ps=Ds,ie=(function(r){return r[r.On=0]="On",r[r.Off=1]="Off",r})(ie||{}),zs=(function(){function r(n,o,a,u){h(this,r),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new gi,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=o.actions,this.target=n,this._context=o.context||a,this._win=nt(Dt(n)?this._context:n),this._doc=this._win.document,this._scopeEvents=u,this.set(o)}return g(r,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(n,o){return S.func(o.onstart)&&this.on("".concat(n,"start"),o.onstart),S.func(o.onmove)&&this.on("".concat(n,"move"),o.onmove),S.func(o.onend)&&this.on("".concat(n,"end"),o.onend),S.func(o.oninertiastart)&&this.on("".concat(n,"inertiastart"),o.oninertiastart),this}},{key:"updatePerActionListeners",value:function(n,o,a){var u,c=this,p=(u=this._actions.map[n])==null?void 0:u.filterEventType,d=function(v){return(p==null||p(v))&&rn(v,c._actions)};(S.array(o)||S.object(o))&&this._onOff(ie.Off,n,o,void 0,d),(S.array(a)||S.object(a))&&this._onOff(ie.On,n,a,void 0,d)}},{key:"setPerAction",value:function(n,o){var a=this._defaults;for(var u in o){var c=u,p=this.options[n],d=o[c];c==="listeners"&&this.updatePerActionListeners(n,p.listeners,d),S.array(d)?p[c]=Br(d):S.plainObject(d)?(p[c]=P(p[c]||{},ve(d)),S.object(a.perAction[c])&&"enabled"in a.perAction[c]&&(p[c].enabled=d.enabled!==!1)):S.bool(d)&&S.object(a.perAction[c])?p[c].enabled=d:p[c]=d}}},{key:"getRect",value:function(n){return n=n||(S.element(this.target)?this.target:null),S.string(this.target)&&(n=n||this._context.querySelector(this.target)),Et(n)}},{key:"rectChecker",value:function(n){var o=this;return S.func(n)?(this.getRect=function(a){var u=P({},n.apply(o,a));return"width"in u||(u.width=u.right-u.left,u.height=u.bottom-u.top),u},this):n===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(n,o){if(Dt(o)||S.object(o)){for(var a in this.options[n]=o,this._actions.map)this.options[a][n]=o;return this}return this.options[n]}},{key:"origin",value:function(n){return this._backCompatOption("origin",n)}},{key:"deltaSource",value:function(n){return n==="page"||n==="client"?(this.options.deltaSource=n,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var n=this.target;return S.string(n)?Array.from(this._context.querySelectorAll(n)):S.func(n)&&n.getAllElements?n.getAllElements():S.element(n)?[n]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(n){return this._context===n.ownerDocument||U(this._context,n)}},{key:"testIgnoreAllow",value:function(n,o,a){return!this.testIgnore(n.ignoreFrom,o,a)&&this.testAllow(n.allowFrom,o,a)}},{key:"testAllow",value:function(n,o,a){return!n||!!S.element(a)&&(S.string(n)?bt(a,n,o):!!S.element(n)&&U(n,a))}},{key:"testIgnore",value:function(n,o,a){return!(!n||!S.element(a))&&(S.string(n)?bt(a,n,o):!!S.element(n)&&U(n,a))}},{key:"fire",value:function(n){return this.events.fire(n),this}},{key:"_onOff",value:function(n,o,a,u,c){S.object(o)&&!S.array(o)&&(u=a,a=null);var p=pt(o,a,c);for(var d in p){d==="wheel"&&(d=z.wheelEvent);for(var v=0,b=p[d];v<b.length;v++){var y=b[v];rn(d,this._actions)?this.events[n===ie.On?"on":"off"](d,y):S.string(this.target)?this._scopeEvents[n===ie.On?"addDelegate":"removeDelegate"](this.target,this._context,d,y,u):this._scopeEvents[n===ie.On?"add":"remove"](this.target,d,y,u)}}return this}},{key:"on",value:function(n,o,a){return this._onOff(ie.On,n,o,a)}},{key:"off",value:function(n,o,a){return this._onOff(ie.Off,n,o,a)}},{key:"set",value:function(n){var o=this._defaults;for(var a in S.object(n)||(n={}),this.options=ve(o.base),this._actions.methodDict){var u=a,c=this._actions.methodDict[u];this.options[u]={},this.setPerAction(u,P(P({},o.perAction),o.actions[u])),this[c](n[u])}for(var p in n)p!=="getRect"?S.func(this[p])&&this[p](n[p]):this.rectChecker(n.getRect);return this}},{key:"unset",value:function(){if(S.string(this.target))for(var n in this._scopeEvents.delegatedEvents)for(var o=this._scopeEvents.delegatedEvents[n],a=o.length-1;a>=0;a--){var u=o[a],c=u.selector,p=u.context,d=u.listeners;c===this.target&&p===this._context&&o.splice(a,1);for(var v=d.length-1;v>=0;v--)this._scopeEvents.removeDelegate(this.target,this._context,n,d[v][0],d[v][1])}else this._scopeEvents.remove(this.target,"all")}}]),r})(),As=(function(){function r(n){var o=this;h(this,r),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=n,n.addListeners({"interactable:unset":function(a){var u=a.interactable,c=u.target,p=S.string(c)?o.selectorMap[c]:c[o.scope.id],d=De(p,(function(v){return v===u}));p.splice(d,1)}})}return g(r,[{key:"new",value:function(n,o){o=P(o||{},{actions:this.scope.actions});var a=new this.scope.Interactable(n,o,this.scope.document,this.scope.events);return this.scope.addDocument(a._doc),this.list.push(a),S.string(n)?(this.selectorMap[n]||(this.selectorMap[n]=[]),this.selectorMap[n].push(a)):(a.target[this.scope.id]||Object.defineProperty(n,this.scope.id,{value:[],configurable:!0}),n[this.scope.id].push(a)),this.scope.fire("interactable:new",{target:n,options:o,interactable:a,win:this.scope._win}),a}},{key:"getExisting",value:function(n,o){var a=o&&o.context||this.scope.document,u=S.string(n),c=u?this.selectorMap[n]:n[this.scope.id];if(c)return Pe(c,(function(p){return p._context===a&&(u||p.inContext(n))}))}},{key:"forEachMatch",value:function(n,o){for(var a=0,u=this.list;a<u.length;a++){var c=u[a],p=void 0;if((S.string(c.target)?S.element(n)&&q(n,c.target):n===c.target)&&c.inContext(n)&&(p=o(c)),p!==void 0)return p}}}]),r})(),Os=(function(){function r(){var n=this;h(this,r),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=z,this.defaults=ve(ai),this.Eventable=gi,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=(function(a){var u=function c(p,d){var v=a.interactables.getExisting(p,d);return v||((v=a.interactables.new(p,d)).events.global=c.globalEvents),v};return u.getPointerAverage=Ur,u.getTouchBBox=Rn,u.getTouchDistance=$n,u.getTouchAngle=Fn,u.getElementRect=Et,u.getElementClientRect=wt,u.matchesSelector=q,u.closest=Z,u.globalEvents={},u.version="1.10.27",u.scope=a,u.use=function(c,p){return this.scope.usePlugin(c,p),this},u.isSet=function(c,p){return!!this.scope.interactables.get(c,p&&p.context)},u.on=ze((function(c,p,d){if(S.string(c)&&c.search(" ")!==-1&&(c=c.trim().split(/ +/)),S.array(c)){for(var v=0,b=c;v<b.length;v++){var y=b[v];this.on(y,p,d)}return this}if(S.object(c)){for(var _ in c)this.on(_,c[_],p);return this}return rn(c,this.scope.actions)?this.globalEvents[c]?this.globalEvents[c].push(p):this.globalEvents[c]=[p]:this.scope.events.add(this.scope.document,c,p,{options:d}),this}),"The interact.on() method is being deprecated"),u.off=ze((function(c,p,d){if(S.string(c)&&c.search(" ")!==-1&&(c=c.trim().split(/ +/)),S.array(c)){for(var v=0,b=c;v<b.length;v++){var y=b[v];this.off(y,p,d)}return this}if(S.object(c)){for(var _ in c)this.off(_,c[_],p);return this}var D;return rn(c,this.scope.actions)?c in this.globalEvents&&(D=this.globalEvents[c].indexOf(p))!==-1&&this.globalEvents[c].splice(D,1):this.scope.events.remove(this.scope.document,c,p,d),this}),"The interact.off() method is being deprecated"),u.debug=function(){return this.scope},u.supportsTouch=function(){return z.supportsTouch},u.supportsPointerEvent=function(){return z.supportsPointerEvent},u.stop=function(){for(var c=0,p=this.scope.interactions.list;c<p.length;c++)p[c].stop();return this},u.pointerMoveTolerance=function(c){return S.number(c)?(this.scope.interactions.pointerMoveTolerance=c,this):this.scope.interactions.pointerMoveTolerance},u.addDocument=function(c,p){this.scope.addDocument(c,p)},u.removeDocument=function(c){this.scope.removeDocument(c)},u})(this),this.InteractEvent=qn,this.Interactable=void 0,this.interactables=new As(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(a){return n.removeDocument(a.target)};var o=this;this.Interactable=(function(a){m(c,a);var u=k(c);function c(){return h(this,c),u.apply(this,arguments)}return g(c,[{key:"_defaults",get:function(){return o.defaults}},{key:"set",value:function(p){return F(w(c.prototype),"set",this).call(this,p),o.fire("interactable:set",{options:p,interactable:this}),this}},{key:"unset",value:function(){F(w(c.prototype),"unset",this).call(this);var p=o.interactables.list.indexOf(this);p<0||(o.interactables.list.splice(p,1),o.fire("interactable:unset",{interactable:this}))}}]),c})(zs)}return g(r,[{key:"addListeners",value:function(n,o){this.listenerMaps.push({id:o,map:n})}},{key:"fire",value:function(n,o){for(var a=0,u=this.listenerMaps;a<u.length;a++){var c=u[a].map[n];if(c&&c(o,this,n)===!1)return!1}}},{key:"init",value:function(n){return this.isInitialized?this:(function(o,a){return o.isInitialized=!0,S.window(a)&&B(a),M.init(a),z.init(a),ne.init(a),o.window=a,o.document=a.document,o.usePlugin(Ps),o.usePlugin(Ms),o})(this,n)}},{key:"pluginIsInstalled",value:function(n){var o=n.id;return o?!!this._plugins.map[o]:this._plugins.list.indexOf(n)!==-1}},{key:"usePlugin",value:function(n,o){if(!this.isInitialized)return this;if(this.pluginIsInstalled(n))return this;if(n.id&&(this._plugins.map[n.id]=n),this._plugins.list.push(n),n.install&&n.install(this,o),n.listeners&&n.before){for(var a=0,u=this.listenerMaps.length,c=n.before.reduce((function(d,v){return d[v]=!0,d[xi(v)]=!0,d}),{});a<u;a++){var p=this.listenerMaps[a].id;if(p&&(c[p]||c[xi(p)]))break}this.listenerMaps.splice(a,0,{id:n.id,map:n.listeners})}else n.listeners&&this.listenerMaps.push({id:n.id,map:n.listeners});return this}},{key:"addDocument",value:function(n,o){if(this.getDocIndex(n)!==-1)return!1;var a=nt(n);o=o?P({},o):{},this.documents.push({doc:n,options:o}),this.events.documents.push(n),n!==this.document&&this.events.add(a,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:n,window:a,scope:this,options:o})}},{key:"removeDocument",value:function(n){var o=this.getDocIndex(n),a=nt(n),u=this.documents[o].options;this.events.remove(a,"unload",this.onWindowUnload),this.documents.splice(o,1),this.events.documents.splice(o,1),this.fire("scope:remove-document",{doc:n,window:a,scope:this,options:u})}},{key:"getDocIndex",value:function(n){for(var o=0;o<this.documents.length;o++)if(this.documents[o].doc===n)return o;return-1}},{key:"getDocOptions",value:function(n){var o=this.getDocIndex(n);return o===-1?null:this.documents[o].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),r})();function xi(r){return r&&r.replace(/\/.*$/,"")}var wi=new Os,St=wi.interactStatic,Cs=typeof globalThis<"u"?globalThis:window;wi.init(Cs);var Is=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(r){var n=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter((function(a){var u=a[0],c=a[1];return u in r||c in r})),o=function(a,u){for(var c=r.range,p=r.limits,d=p===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:p,v=r.offset,b=v===void 0?{x:0,y:0}:v,y={range:c,grid:r,x:null,y:null},_=0;_<n.length;_++){var D=n[_],O=D[0],A=D[1],I=Math.round((a-b.x)/r[O]),N=Math.round((u-b.y)/r[A]);y[O]=Math.max(d.left,Math.min(d.right,I*r[O]+b.x)),y[A]=Math.max(d.top,Math.min(d.bottom,N*r[A]+b.y))}return y};return o.grid=r,o.coordFields=n,o}}),Ls={id:"snappers",install:function(r){var n=r.interactStatic;n.snappers=P(n.snappers||{},Is),n.createSnapGrid=n.snappers.grid}},Rs=Ls,$s={start:function(r){var n=r.state,o=r.rect,a=r.edges,u=r.pageCoords,c=n.options,p=c.ratio,d=c.enabled,v=n.options,b=v.equalDelta,y=v.modifiers;p==="preserve"&&(p=o.width/o.height),n.startCoords=P({},u),n.startRect=P({},o),n.ratio=p,n.equalDelta=b;var _=n.linkedEdges={top:a.top||a.left&&!a.bottom,left:a.left||a.top&&!a.right,bottom:a.bottom||a.right&&!a.top,right:a.right||a.bottom&&!a.left};if(n.xIsPrimaryAxis=!(!a.left&&!a.right),n.equalDelta){var D=(_.left?1:-1)*(_.top?1:-1);n.edgeSign={x:D,y:D}}else n.edgeSign={x:_.left?-1:1,y:_.top?-1:1};if(d!==!1&&P(a,_),y!=null&&y.length){var O=new Vn(r.interaction);O.copyFrom(r.interaction.modification),O.prepareStates(y),n.subModification=O,O.startAll(s({},r))}},set:function(r){var n=r.state,o=r.rect,a=r.coords,u=n.linkedEdges,c=P({},a),p=n.equalDelta?Fs:Ns;if(P(r.edges,u),p(n,n.xIsPrimaryAxis,a,o),!n.subModification)return null;var d=P({},o);at(u,d,{x:a.x-c.x,y:a.y-c.y});var v=n.subModification.setAll(s(s({},r),{},{rect:d,edges:u,pageCoords:a,prevCoords:a,prevRect:d})),b=v.delta;return v.changed&&(p(n,Math.abs(b.x)>Math.abs(b.y),v.coords,v.rect),P(a,v.coords)),v.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function Fs(r,n,o){var a=r.startCoords,u=r.edgeSign;n?o.y=a.y+(o.x-a.x)*u.y:o.x=a.x+(o.y-a.y)*u.x}function Ns(r,n,o,a){var u=r.startRect,c=r.startCoords,p=r.ratio,d=r.edgeSign;if(n){var v=a.width/p;o.y=c.y+(v-u.height)*d.y}else{var b=a.height*p;o.x=c.x+(b-u.width)*d.x}}var js=re($s,"aspectRatio"),bi=function(){};bi._defaults={};var ln=bi;function le(r,n,o){return S.func(r)?tt(r,n.interactable,n.element,[o.x,o.y,n]):tt(r,n.interactable,n.element)}var un={start:function(r){var n=r.rect,o=r.startOffset,a=r.state,u=r.interaction,c=r.pageCoords,p=a.options,d=p.elementRect,v=P({left:0,top:0,right:0,bottom:0},p.offset||{});if(n&&d){var b=le(p.restriction,u,c);if(b){var y=b.right-b.left-n.width,_=b.bottom-b.top-n.height;y<0&&(v.left+=y,v.right+=y),_<0&&(v.top+=_,v.bottom+=_)}v.left+=o.left-n.width*d.left,v.top+=o.top-n.height*d.top,v.right+=o.right-n.width*(1-d.right),v.bottom+=o.bottom-n.height*(1-d.bottom)}a.offset=v},set:function(r){var n=r.coords,o=r.interaction,a=r.state,u=a.options,c=a.offset,p=le(u.restriction,o,n);if(p){var d=(function(v){return!v||"left"in v&&"top"in v||((v=P({},v)).left=v.x||0,v.top=v.y||0,v.right=v.right||v.left+v.width,v.bottom=v.bottom||v.top+v.height),v})(p);n.x=Math.max(Math.min(d.right-c.right,n.x),d.left+c.left),n.y=Math.max(Math.min(d.bottom-c.bottom,n.y),d.top+c.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},Us=re(un,"restrict"),_i={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Ti={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Ei(r,n){for(var o=0,a=["top","left","bottom","right"];o<a.length;o++){var u=a[o];u in r||(r[u]=n[u])}return r}var Ce={noInner:_i,noOuter:Ti,start:function(r){var n,o=r.interaction,a=r.startOffset,u=r.state,c=u.options;c&&(n=C(le(c.offset,o,o.coords.start.page))),n=n||{x:0,y:0},u.offset={top:n.y+a.top,left:n.x+a.left,bottom:n.y-a.bottom,right:n.x-a.right}},set:function(r){var n=r.coords,o=r.edges,a=r.interaction,u=r.state,c=u.offset,p=u.options;if(o){var d=P({},n),v=le(p.inner,a,d)||{},b=le(p.outer,a,d)||{};Ei(v,_i),Ei(b,Ti),o.top?n.y=Math.min(Math.max(b.top+c.top,d.y),v.top+c.top):o.bottom&&(n.y=Math.max(Math.min(b.bottom+c.bottom,d.y),v.bottom+c.bottom)),o.left?n.x=Math.min(Math.max(b.left+c.left,d.x),v.left+c.left):o.right&&(n.x=Math.max(Math.min(b.right+c.right,d.x),v.right+c.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},Ys=re(Ce,"restrictEdges"),Gs=P({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(r){}},un.defaults),Hs=re({start:un.start,set:un.set,defaults:Gs},"restrictRect"),Bs={width:-1/0,height:-1/0},Ws={width:1/0,height:1/0},Xs=re({start:function(r){return Ce.start(r)},set:function(r){var n=r.interaction,o=r.state,a=r.rect,u=r.edges,c=o.options;if(u){var p=mt(le(c.min,n,r.coords))||Bs,d=mt(le(c.max,n,r.coords))||Ws;o.options={endOnly:c.endOnly,inner:P({},Ce.noInner),outer:P({},Ce.noOuter)},u.top?(o.options.inner.top=a.bottom-p.height,o.options.outer.top=a.bottom-d.height):u.bottom&&(o.options.inner.bottom=a.top+p.height,o.options.outer.bottom=a.top+d.height),u.left?(o.options.inner.left=a.right-p.width,o.options.outer.left=a.right-d.width):u.right&&(o.options.inner.right=a.left+p.width,o.options.outer.right=a.left+d.width),Ce.set(r),o.options=c}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),tr={start:function(r){var n,o=r.interaction,a=r.interactable,u=r.element,c=r.rect,p=r.state,d=r.startOffset,v=p.options,b=v.offsetWithOrigin?(function(D){var O=D.interaction.element,A=C(tt(D.state.options.origin,null,null,[O])),I=A||dt(D.interactable,O,D.interaction.prepared.name);return I})(r):{x:0,y:0};if(v.offset==="startCoords")n={x:o.coords.start.page.x,y:o.coords.start.page.y};else{var y=tt(v.offset,a,u,[o]);(n=C(y)||{x:0,y:0}).x+=b.x,n.y+=b.y}var _=v.relativePoints;p.offsets=c&&_&&_.length?_.map((function(D,O){return{index:O,relativePoint:D,x:d.left-c.width*D.x+n.x,y:d.top-c.height*D.y+n.y}})):[{index:0,relativePoint:null,x:n.x,y:n.y}]},set:function(r){var n=r.interaction,o=r.coords,a=r.state,u=a.options,c=a.offsets,p=dt(n.interactable,n.element,n.prepared.name),d=P({},o),v=[];u.offsetWithOrigin||(d.x-=p.x,d.y-=p.y);for(var b=0,y=c;b<y.length;b++)for(var _=y[b],D=d.x-_.x,O=d.y-_.y,A=0,I=u.targets.length;A<I;A++){var N=u.targets[A],$=void 0;($=S.func(N)?N(D,O,n._proxy,_,A):N)&&v.push({x:(S.number($.x)?$.x:D)+_.x,y:(S.number($.y)?$.y:O)+_.y,range:S.number($.range)?$.range:u.range,source:N,index:A,offset:_})}for(var G={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},J=0;J<v.length;J++){var rt=v[J],X=rt.range,K=rt.x-d.x,Mt=rt.y-d.y,ht=ee(K,Mt),zt=ht<=X;X===1/0&&G.inRange&&G.range!==1/0&&(zt=!1),G.target&&!(zt?G.inRange&&X!==1/0?ht/X<G.distance/G.range:X===1/0&&G.range!==1/0||ht<G.distance:!G.inRange&&ht<G.distance)||(G.target=rt,G.distance=ht,G.range=X,G.inRange=zt,G.delta.x=K,G.delta.y=Mt)}return G.inRange&&(o.x=G.target.x,o.y=G.target.y),a.closest=G,G},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},Vs=re(tr,"snap"),cn={start:function(r){var n=r.state,o=r.edges,a=n.options;if(!o)return null;r.state={options:{targets:null,relativePoints:[{x:o.left?0:1,y:o.top?0:1}],offset:a.offset||"self",origin:{x:0,y:0},range:a.range}},n.targetFields=n.targetFields||[["width","height"],["x","y"]],tr.start(r),n.offsets=r.state.offsets,r.state=n},set:function(r){var n=r.interaction,o=r.state,a=r.coords,u=o.options,c=o.offsets,p={x:a.x-c[0].x,y:a.y-c[0].y};o.options=P({},u),o.options.targets=[];for(var d=0,v=u.targets||[];d<v.length;d++){var b=v[d],y=void 0;if(y=S.func(b)?b(p.x,p.y,n):b){for(var _=0,D=o.targetFields;_<D.length;_++){var O=D[_],A=O[0],I=O[1];if(A in y||I in y){y.x=y[A],y.y=y[I];break}}o.options.targets.push(y)}}var N=tr.set(r);return o.options=u,N},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},qs=re(cn,"snapSize"),er={aspectRatio:js,restrictEdges:Ys,restrict:Us,restrictRect:Hs,restrictSize:Xs,snapEdges:re({start:function(r){var n=r.edges;return n?(r.state.targetFields=r.state.targetFields||[[n.left?"left":"right",n.top?"top":"bottom"]],cn.start(r)):null},set:cn.set,defaults:P(ve(cn.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:Vs,snapSize:qs,spring:ln,avoid:ln,transform:ln,rubberband:ln},Zs={id:"modifiers",install:function(r){var n=r.interactStatic;for(var o in r.usePlugin(si),r.usePlugin(Rs),n.modifiers=er,er){var a=er[o],u=a._defaults,c=a._methods;u._methods=c,r.defaults.perAction[o]=u}}},Js=Zs,Si=(function(r){m(o,r);var n=k(o);function o(a,u,c,p,d,v){var b;if(h(this,o),Ke(E(b=n.call(this,d)),c),c!==u&&Ke(E(b),u),b.timeStamp=v,b.originalEvent=c,b.type=a,b.pointerId=ke(u),b.pointerType=Yr(u),b.target=p,b.currentTarget=null,a==="tap"){var y=d.getPointerIndex(u);b.dt=b.timeStamp-d.pointers[y].downTime;var _=b.timeStamp-d.tapTime;b.double=!!d.prevTap&&d.prevTap.type!=="doubletap"&&d.prevTap.target===b.target&&_<500}else a==="doubletap"&&(b.dt=u.timeStamp-d.tapTime,b.double=!0);return b}return g(o,[{key:"_subtractOrigin",value:function(a){var u=a.x,c=a.y;return this.pageX-=u,this.pageY-=c,this.clientX-=u,this.clientY-=c,this}},{key:"_addOrigin",value:function(a){var u=a.x,c=a.y;return this.pageX+=u,this.pageY+=c,this.clientX+=u,this.clientY+=c,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),o})(en),Ie={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(r){r.pointerEvents=Ie,r.defaults.actions.pointerEvents=Ie.defaults,P(r.actions.phaselessTypes,Ie.types)},listeners:{"interactions:new":function(r){var n=r.interaction;n.prevTap=null,n.tapTime=0},"interactions:update-pointer":function(r){var n=r.down,o=r.pointerInfo;!n&&o.hold||(o.hold={duration:1/0,timeout:null})},"interactions:move":function(r,n){var o=r.interaction,a=r.pointer,u=r.event,c=r.eventTarget;r.duplicate||o.pointerIsDown&&!o.pointerWasMoved||(o.pointerIsDown&&nr(r),oe({interaction:o,pointer:a,event:u,eventTarget:c,type:"move"},n))},"interactions:down":function(r,n){(function(o,a){for(var u=o.interaction,c=o.pointer,p=o.event,d=o.eventTarget,v=o.pointerIndex,b=u.pointers[v].hold,y=_t(d),_={interaction:u,pointer:c,event:p,eventTarget:d,type:"hold",targets:[],path:y,node:null},D=0;D<y.length;D++){var O=y[D];_.node=O,a.fire("pointerEvents:collect-targets",_)}if(_.targets.length){for(var A=1/0,I=0,N=_.targets;I<N.length;I++){var $=N[I].eventable.options.holdDuration;$<A&&(A=$)}b.duration=A,b.timeout=setTimeout((function(){oe({interaction:u,eventTarget:d,pointer:c,event:p,type:"hold"},a)}),A)}})(r,n),oe(r,n)},"interactions:up":function(r,n){nr(r),oe(r,n),(function(o,a){var u=o.interaction,c=o.pointer,p=o.event,d=o.eventTarget;u.pointerWasMoved||oe({interaction:u,eventTarget:d,pointer:c,event:p,type:"tap"},a)})(r,n)},"interactions:cancel":function(r,n){nr(r),oe(r,n)}},PointerEvent:Si,fire:oe,collectEventTargets:Mi,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function oe(r,n){var o=r.interaction,a=r.pointer,u=r.event,c=r.eventTarget,p=r.type,d=r.targets,v=d===void 0?Mi(r,n):d,b=new Si(p,a,u,c,o,n.now());n.fire("pointerEvents:new",{pointerEvent:b});for(var y={interaction:o,pointer:a,event:u,eventTarget:c,targets:v,type:p,pointerEvent:b},_=0;_<v.length;_++){var D=v[_];for(var O in D.props||{})b[O]=D.props[O];var A=dt(D.eventable,D.node);if(b._subtractOrigin(A),b.eventable=D.eventable,b.currentTarget=D.node,D.eventable.fire(b),b._addOrigin(A),b.immediatePropagationStopped||b.propagationStopped&&_+1<v.length&&v[_+1].node!==b.currentTarget)break}if(n.fire("pointerEvents:fired",y),p==="tap"){var I=b.double?oe({interaction:o,pointer:a,event:u,eventTarget:c,type:"doubletap"},n):b;o.prevTap=I,o.tapTime=I.timeStamp}return b}function Mi(r,n){var o=r.interaction,a=r.pointer,u=r.event,c=r.eventTarget,p=r.type,d=o.getPointerIndex(a),v=o.pointers[d];if(p==="tap"&&(o.pointerWasMoved||!v||v.downTarget!==c))return[];for(var b=_t(c),y={interaction:o,pointer:a,event:u,eventTarget:c,type:p,path:b,targets:[],node:null},_=0;_<b.length;_++){var D=b[_];y.node=D,n.fire("pointerEvents:collect-targets",y)}return p==="hold"&&(y.targets=y.targets.filter((function(O){var A,I;return O.eventable.options.holdDuration===((A=o.pointers[d])==null||(I=A.hold)==null?void 0:I.duration)}))),y.targets}function nr(r){var n=r.interaction,o=r.pointerIndex,a=n.pointers[o].hold;a&&a.timeout&&(clearTimeout(a.timeout),a.timeout=null)}var Ks=Object.freeze({__proto__:null,default:Ie});function Qs(r){var n=r.interaction;n.holdIntervalHandle&&(clearInterval(n.holdIntervalHandle),n.holdIntervalHandle=null)}var ta={id:"pointer-events/holdRepeat",install:function(r){r.usePlugin(Ie);var n=r.pointerEvents;n.defaults.holdRepeatInterval=0,n.types.holdrepeat=r.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce((function(r,n){return r["pointerEvents:".concat(n)]=Qs,r}),{"pointerEvents:new":function(r){var n=r.pointerEvent;n.type==="hold"&&(n.count=(n.count||0)+1)},"pointerEvents:fired":function(r,n){var o=r.interaction,a=r.pointerEvent,u=r.eventTarget,c=r.targets;if(a.type==="hold"&&c.length){var p=c[0].eventable.options.holdRepeatInterval;p<=0||(o.holdIntervalHandle=setTimeout((function(){n.pointerEvents.fire({interaction:o,eventTarget:u,type:"hold",pointer:a,event:a},n)}),p))}}})},ea=ta,na={id:"pointer-events/interactableTargets",install:function(r){var n=r.Interactable;n.prototype.pointerEvents=function(a){return P(this.events.options,a),this};var o=n.prototype._backCompatOption;n.prototype._backCompatOption=function(a,u){var c=o.call(this,a,u);return c===this&&(this.events.options[a]=u),c}},listeners:{"pointerEvents:collect-targets":function(r,n){var o=r.targets,a=r.node,u=r.type,c=r.eventTarget;n.interactables.forEachMatch(a,(function(p){var d=p.events,v=d.options;d.types[u]&&d.types[u].length&&p.testIgnoreAllow(v,a,c)&&o.push({node:a,eventable:d,props:{interactable:p}})}))},"interactable:new":function(r){var n=r.interactable;n.events.getRect=function(o){return n.getRect(o)}},"interactable:set":function(r,n){var o=r.interactable,a=r.options;P(o.events.options,n.pointerEvents.defaults),P(o.events.options,a.pointerEvents||{})}}},ra=na,ia={id:"pointer-events",install:function(r){r.usePlugin(Ks),r.usePlugin(ea),r.usePlugin(ra)}},oa=ia,sa={id:"reflow",install:function(r){var n=r.Interactable;r.actions.phases.reflow=!0,n.prototype.reflow=function(o){return(function(a,u,c){for(var p=a.getAllElements(),d=c.window.Promise,v=d?[]:null,b=function(){var _=p[y],D=a.getRect(_);if(!D)return 1;var O,A=Pe(c.interactions.list,(function($){return $.interacting()&&$.interactable===a&&$.element===_&&$.prepared.name===u.name}));if(A)A.move(),v&&(O=A._reflowPromise||new d((function($){A._reflowResolve=$})));else{var I=mt(D),N=(function($){return{coords:$,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}})({page:{x:I.x,y:I.y},client:{x:I.x,y:I.y},timeStamp:c.now()});O=(function($,G,J,rt,X){var K=$.interactions.new({pointerType:"reflow"}),Mt={interaction:K,event:X,pointer:X,eventTarget:J,phase:"reflow"};K.interactable=G,K.element=J,K.prevEvent=X,K.updatePointer(X,X,J,!0),Fr(K.coords.delta),Hn(K.prepared,rt),K._doPhase(Mt);var ht=$.window,zt=ht.Promise,Lt=zt?new zt((function(Xt){K._reflowResolve=Xt})):void 0;return K._reflowPromise=Lt,K.start(rt,G,J),K._interacting?(K.move(Mt),K.end(X)):(K.stop(),K._reflowResolve()),K.removePointer(X,X),Lt})(c,a,_,u,N)}v&&v.push(O)},y=0;y<p.length&&!b();y++);return v&&d.all(v).then((function(){return a}))})(this,o,r)}},listeners:{"interactions:stop":function(r,n){var o=r.interaction;o.pointerType==="reflow"&&(o._reflowResolve&&o._reflowResolve(),(function(a,u){a.splice(a.indexOf(u),1)})(n.interactions.list,o))}}},aa=sa;if(St.use(oi),St.use(hi),St.use(oa),St.use(Es),St.use(Js),St.use(fs),St.use(es),St.use(rs),St.use(aa),St.default=St,l(t)==="object"&&t)try{t.exports=St}catch{}return St.default=St,St}))})(He,He.exports)),He.exports}var Rf=Lf();const Yt=Vo(Rf);var hr={exports:{}},co;function $f(){return co||(co=1,(function(t){var e=Object.prototype.hasOwnProperty,i="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(i=!1));function l(x,m,w){this.fn=x,this.context=m,this.once=w||!1}function h(x,m,w,T,E){if(typeof w!="function")throw new TypeError("The listener must be a function");var k=new l(w,T||x,E),F=i?i+m:m;return x._events[F]?x._events[F].fn?x._events[F]=[x._events[F],k]:x._events[F].push(k):(x._events[F]=k,x._eventsCount++),x}function f(x,m){--x._eventsCount===0?x._events=new s:delete x._events[m]}function g(){this._events=new s,this._eventsCount=0}g.prototype.eventNames=function(){var m=[],w,T;if(this._eventsCount===0)return m;for(T in w=this._events)e.call(w,T)&&m.push(i?T.slice(1):T);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(w)):m},g.prototype.listeners=function(m){var w=i?i+m:m,T=this._events[w];if(!T)return[];if(T.fn)return[T.fn];for(var E=0,k=T.length,F=new Array(k);E<k;E++)F[E]=T[E].fn;return F},g.prototype.listenerCount=function(m){var w=i?i+m:m,T=this._events[w];return T?T.fn?1:T.length:0},g.prototype.emit=function(m,w,T,E,k,F){var H=i?i+m:m;if(!this._events[H])return!1;var L=this._events[H],j=arguments.length,et,B;if(L.fn){switch(L.once&&this.removeListener(m,L.fn,void 0,!0),j){case 1:return L.fn.call(L.context),!0;case 2:return L.fn.call(L.context,w),!0;case 3:return L.fn.call(L.context,w,T),!0;case 4:return L.fn.call(L.context,w,T,E),!0;case 5:return L.fn.call(L.context,w,T,E,k),!0;case 6:return L.fn.call(L.context,w,T,E,k,F),!0}for(B=1,et=new Array(j-1);B<j;B++)et[B-1]=arguments[B];L.fn.apply(L.context,et)}else{var nt=L.length,it;for(B=0;B<nt;B++)switch(L[B].once&&this.removeListener(m,L[B].fn,void 0,!0),j){case 1:L[B].fn.call(L[B].context);break;case 2:L[B].fn.call(L[B].context,w);break;case 3:L[B].fn.call(L[B].context,w,T);break;case 4:L[B].fn.call(L[B].context,w,T,E);break;default:if(!et)for(it=1,et=new Array(j-1);it<j;it++)et[it-1]=arguments[it];L[B].fn.apply(L[B].context,et)}}return!0},g.prototype.on=function(m,w,T){return h(this,m,w,T,!1)},g.prototype.once=function(m,w,T){return h(this,m,w,T,!0)},g.prototype.removeListener=function(m,w,T,E){var k=i?i+m:m;if(!this._events[k])return this;if(!w)return f(this,k),this;var F=this._events[k];if(F.fn)F.fn===w&&(!E||F.once)&&(!T||F.context===T)&&f(this,k);else{for(var H=0,L=[],j=F.length;H<j;H++)(F[H].fn!==w||E&&!F[H].once||T&&F[H].context!==T)&&L.push(F[H]);L.length?this._events[k]=L.length===1?L[0]:L:f(this,k)}return this},g.prototype.removeAllListeners=function(m){var w;return m?(w=i?i+m:m,this._events[w]&&f(this,w)):(this._events=new s,this._eventsCount=0),this},g.prototype.off=g.prototype.removeListener,g.prototype.addListener=g.prototype.on,g.prefixed=i,g.EventEmitter=g,t.exports=g})(hr)),hr.exports}var Ff=$f();const Nf=Vo(Ff);class jf extends Nf{#t;#n;#e;#r=!1;range;edgeLabelConverter;get el(){return this.#t}get moveEl(){return this.#n}get showEdgeLabels(){return this.#r}set showEdgeLabels(e){this.#r=e,this.#e?.forEach(i=>{const s=i.querySelector(".edge-label");s&&(s.style.display=e?"":"none")})}get edgeLeftLabel(){return this.edgeLabelConverter?this.edgeLabelConverter(this.leftPercent):""}get edgeRightLabel(){return this.edgeLabelConverter?this.edgeLabelConverter(this.rightPercent):""}get leftPercent(){if(!this.#t)return 0;let e=Math.round(parseFloat(this.#t.getAttribute("data-x")??"0")||0),i=Math.round(this.#t.parentElement?.offsetWidth??1);return parseFloat((e/i).toFixed(2))}get rightPercent(){if(!this.#t)return 0;let e=Math.round(parseFloat(this.#t.getAttribute("data-x")??"0")||0),i=Math.round(parseFloat(this.#t.getAttribute("data-width")??"0")||0),s=Math.round(this.#t.parentElement?.offsetWidth??1);return parseFloat(((e+i)/s).toFixed(2))}init(e,i){this.range=e,this.edgeLabelConverter=i,this.showEdgeLabels=!1;const s=document.createElement("div");return s.classList.add("slider"),this.#t=s,this.initMoveDragger(),this.initResizeDragger(),this}remove(){this.#e&&this.#e.forEach(e=>{e.remove()}),this.#n&&(Yt(this.#n).unset(),this.#n.remove()),this.#t&&(Yt(this.#t).unset(),this.#t.remove()),this.#t=void 0,this.#n=void 0,this.#e=void 0}initMoveDragger(){const e=document.createElement("div");e.classList.add("move-dragger"),this.#n=e,this.#t?.appendChild(e)}initResizeDragger(){const e=document.createElement("div");e.classList.add("resize-dragger"),e.classList.add("left");const i=document.createElement("label");i.classList.add("edge-label"),i.style.display=this.showEdgeLabels?"":"none",i.textContent=this.edgeLeftLabel,e.appendChild(i),this.#t?.appendChild(e);const s=document.createElement("div");s.classList.add("resize-dragger"),s.classList.add("right");const l=document.createElement("label");l.classList.add("edge-label"),l.style.display=this.showEdgeLabels?"":"none",l.textContent=this.edgeRightLabel,s.appendChild(l),this.#t?.appendChild(s),this.#e=[e,s]}updateEdgeLabels(){if(!this.#e)return;const[e,i]=this.#e,s=e.querySelector(".edge-label"),l=i.querySelector(".edge-label");s.textContent=this.edgeLeftLabel,l.textContent=this.edgeRightLabel}updateByRange(e){e=e??this.range??[];const[i,s]=e,l=this.#t;if(l&&l.parentElement&&Number.isFinite(i)&&Number.isFinite(s)){const h=l.parentElement,f=h.offsetWidth*i,g=h.offsetWidth*s-f;l.style.width=g+"px",l.style.transform=`translateX(${f}px)`,l.setAttribute("data-x",String(f)),l.setAttribute("data-width",String(g)),this.range=[i,s]}}updateByRectData(e){return this.el&&(this.el.style.width=e.width+"px",this.el.style.transform="translateX("+e.x+"px)",this.el.setAttribute("data-x",String(e.x)),this.el.setAttribute("data-width",String(e.width))),{leftPercent:this.leftPercent,rightPercent:this.rightPercent}}handleMouseEnter=()=>{this.updateEdgeLabels(),this.showEdgeLabels=!0};handleMouseLeave=()=>{this.showEdgeLabels=!1};onSliderUpdated(){console.log("slider updated:",{leftPercent:this.leftPercent,rightPercent:this.rightPercent}),this.emit("slider:updated",{leftPercent:this.leftPercent,rightPercent:this.rightPercent})}bindEvents(){if(!this.moveEl)return;const e=this;Yt(this.moveEl).draggable({inertia:!0,modifiers:[Yt.modifiers.restrictRect({restriction:".slider-window"})],listeners:{start(){e.showEdgeLabels=!0},move(i){let s=i.target.parentElement,l=parseFloat(s.getAttribute("data-x")??"0")+i.dx;s.style.transform="translateX("+l+"px)",s.setAttribute("data-x",l),e.updateEdgeLabels()},end(){e.showEdgeLabels=!1,e.onSliderUpdated.call(e)}}}),this.el&&(this.el.addEventListener("mouseenter",this.handleMouseEnter,!1),this.el.addEventListener("mouseleave",this.handleMouseLeave,!1),Yt(this.el).resizable({modifiers:[Yt.modifiers.restrictRect({restriction:".slider-window"})],edges:{left:!0,right:!0},listeners:{start(){e.showEdgeLabels=!0},move(i){let s=i.target,l=parseFloat(s.getAttribute("data-x")??"0");s.style.width=i.rect.width+"px",l+=i.deltaRect.left,s.style.transform="translateX("+l+"px)",s.setAttribute("data-x",String(l)),s.setAttribute("data-width",i.rect.width),e.updateEdgeLabels()},end(){e.showEdgeLabels=!1,e.onSliderUpdated.call(e)}}}))}unbindEvents(){this.moveEl&&(this.moveEl&&Yt(this.moveEl).unset(),this.el&&(Yt(this.el).unset(),this.el.removeEventListener("mouseenter",this.handleMouseEnter,!1),this.el.removeEventListener("mouseleave",this.handleMouseLeave,!1)))}}class Uf{#t;containerWidth=0;get el(){return this.#t}init(e,i){this.containerWidth=i;const s=document.createElement("div");return s.classList.add("spark-group"),this.#t=s,this.updateSparks(e),this}remove(){this.#t&&(this.#t.remove(),this.#t=void 0)}updateSparks(e){this.#t&&(this.#t.innerHTML="",this.containerWidth=this.#t.parentElement?.offsetWidth??0,e.forEach(i=>{const s=document.createElement("div");s.classList.add("spark"),i.class&&s.classList.add(i.class);const l=this.calcSparkStyle(i);for(const h of Object.keys(l))s.style[h]=l[h];this.#t?.appendChild(s)}))}calcSparkStyle(e){let i=0,s=0;const l={};return Number.isFinite(e.pos[0])&&(i=this.containerWidth*e.pos[0],Number.isFinite(e.pos[1])?(s=this.containerWidth*e.pos[1],l.borderLeft="1px solid skyblue",l.borderRight="1px solid skyblue"):(l.borderLeft=`1px solid ${e.color}`,l.borderRight=`1px solid ${e.color}`)),{background:e.color,transform:`translateX(${i}px)`,width:`${s>0?s-i:0}px`,...l}}}class Yf{container;options;context;observer;sliderWindow;slider;sparkGroup;constructor(e,i){this.container=e,this.options=i}install(e){this.context=e,this.observer=new ResizeObserver(i=>{i[0].contentRect.height>0&&this.slider?.updateByRange(this.options.range)}),this.drawSliderWindow(),this.drawSparks(),this.drawSlider(),this.bindEvents()}uninstall(){this.observer?.disconnect(),this.unbindEvents(),this.observer=void 0,this.context=void 0,this.sliderWindow?.remove(),this.slider?.remove(),this.sparkGroup?.remove(),this.slider=void 0,this.sparkGroup=void 0}onResize=()=>{this.slider?.updateByRange(),this.sparkGroup?.updateSparks(this.options.sparks)};bindEvents(){if(!this.sliderWindow)return;let e=this,i=!1,s=null,l=null,h=null;Yt(this.sliderWindow).draggable({cursorChecker:()=>"crosshair",listeners:{start(f){if(i=!0,h=f.target,!h)return;const g=h.getBoundingClientRect();s={x:f.clientX-g.left,y:0},l=document.createElement("div"),l.className="select-rect",l.style.left=s.x+"px",l.style.top=s.y+"px",l.style.width="0px",l.style.height="100%",l.style.position="absolute",l.style.zIndex="1000",l.style.background="rgba(0, 102, 204, 0.15)",l.style.pointerEvents="none",h.appendChild(l)},move(f){if(!i||!l||!h||!s)return;const g=h.getBoundingClientRect(),x=f.clientX-g.left,m=g.height,w=Math.min(s.x,x),T=Math.min(s.y,m),E=Math.abs(x-s.x),k=Math.abs(m-s.y);l.style.left=w+"px",l.style.top=T+"px",l.style.width=E+"px",l.style.height=k+"px"},end(){if(!i)return;i=!1;let f=null;if(l){f={x:parseFloat(l.style.left),y:parseFloat(l.style.top),width:parseFloat(l.style.width),height:parseFloat(l.style.height)};const g=e.slider?.updateByRectData(f);l.remove(),l=null,s=null,g&&e.onSliderUpdated(g)}}}}),this.slider?.bindEvents(),this.slider?.addListener("slider:updated",this.onSliderUpdated),this.context?.instance.on("zoom.end",this.handleZoomEnd)}unbindEvents(){this.sliderWindow&&Yt(this.sliderWindow).unset(),this.slider?.unbindEvents(),this.slider?.removeListener("slider:updated",this.onSliderUpdated),this.context?.instance.off("zoom.end",this.handleZoomEnd)}onSliderUpdated=({leftPercent:e,rightPercent:i})=>{if(this.context){const{start:s,end:l}=this.context.options.maxTimeRange,h=+s+(+l-+s)*e,f=+s+(+l-+s)*i;this.context.instance.setTimeRange(new Date(h),new Date(f))}};handleZoomEnd=({timeRange:e})=>{if(!this.context)return;const{start:i,end:s}=e,{start:l,end:h}=this.context.options.maxTimeRange,f=(+i-+l)/(+h-+l),g=(+s-+l)/(+h-+l);this.slider?.updateByRange([f,g])};drawSliderWindow(){this.sliderWindow=document.createElement("div"),this.sliderWindow.classList.add("slider-window"),this.container.appendChild(this.sliderWindow)}drawSparks(){this.sparkGroup=new Uf().init(this.options.sparks,this.sliderWindow?.offsetWidth??0),this.sparkGroup?.el&&this.sliderWindow?.appendChild(this.sparkGroup.el)}drawSlider(){const e=i=>{if(!this.context)return"";const{start:s,end:l}=this.context.options.maxTimeRange,h=+s+(+l-+s)*i;return this.options.dateFormat?this.options.dateFormat(new Date(h)):new Date(h).toLocaleString()};this.slider=new jf().init(this.options.range,e),this.slider?.el&&this.sliderWindow?.appendChild(this.slider.el),this.slider?.updateByRange()}}let ct,ho,qt,Be=[];function Gf(){Hf(),Bf()}function Hf(){const t=document.getElementById("project-timeline"),e=document.getElementById("project-zoom-slider");ho=new Yf(e,{range:[.49,.52],sparks:[{id:"1",pos:[.1],color:"#667eea"},{id:"2",pos:[.49,.52],color:"#f093fb"},{id:"3",pos:[.8],color:"#4facfe"}],dateFormat:l=>{const h=l.getFullYear(),f=String(l.getMonth()+1).padStart(2,"0"),g=String(l.getDate()).padStart(2,"0");return`${h}-${f}-${g}`}}),ct=new Xo(t,{plugins:[ho]}),ct.addTimeline("","#4facfe","stage3"),ct.addTimeline("","#f093fb","stage2"),ct.addTimeline("","#667eea","stage1"),ct.addEvents([{title:"",description:"",startTime:new Date("2026-01-15"),color:"#667eea",timelineId:"stage1"},{title:"",description:"",startTime:new Date("2026-01-25"),color:"#667eea",timelineId:"stage1"},{title:"",description:"",startTime:new Date("2026-02-10"),color:"#667eea",timelineId:"stage1"},{title:"",description:"",startTime:new Date("2026-03-05"),color:"#f093fb",timelineId:"stage2"},{title:"",description:"",startTime:new Date("2026-03-15"),color:"#f093fb",timelineId:"stage2"},{title:"",description:"",startTime:new Date("2026-04-01"),color:"#f093fb",timelineId:"stage2"},{title:"",description:"",startTime:new Date("2026-04-20"),color:"#f093fb",timelineId:"stage2"},{title:"",description:"",startTime:new Date("2026-03-10"),color:"#4facfe",timelineId:"stage3"},{title:"",description:"",startTime:new Date("2026-03-25"),color:"#4facfe",timelineId:"stage3"},{title:"",description:"",startTime:new Date("2026-04-15"),color:"#4facfe",timelineId:"stage3"},{title:"",description:"",startTime:new Date("2026-05-01"),color:"#4facfe",timelineId:"stage3"},{title:"",description:"",startTime:new Date("2026-05-05"),endTime:new Date("2026-05-15"),color:"#4facfe",timelineId:"stage3"}]);const i=document.getElementById("zoomSlider"),s=document.getElementById("zoomValue");i.addEventListener("input",l=>{const h=parseFloat(l.target.value);ct.setZoom(h),s.textContent=h.toFixed(1)+"x"}),ct.on("zoom.end",({scale:l})=>{i.value=String(l),s.textContent=l.toFixed(1)+"x"}),ct.on("click",({data:l})=>{Ot(`"${l.title}"`,"system")}),Ot("D3.js","system")}function Bf(){const t=document.getElementById("versions-timeline");qt=new Xo(t),qt.addTimeline("","#4facfe","beta_line"),qt.addTimeline("","#f093fb","develop_line"),qt.addTimeline("","#667eea","start_line"),qt.addEvents([{title:"()",description:"",startTime:new Date("2026-01-15"),color:"#667eea",timelineId:"start_line",stage:{id:1,index:0}},{title:"()",description:"",startTime:new Date("2026-01-21"),color:"#f093fb",timelineId:"develop_line",stage:{id:1,index:1}},{title:"()",description:"",startTime:new Date("2026-02-25"),color:"#4facfe",timelineId:"beta_line",stage:{id:1,index:2}},{title:"()",description:"",startTime:new Date("2026-02-01"),color:"#667eea",timelineId:"start_line",stage:{id:2,index:0}},{title:"()",description:"",startTime:new Date("2026-02-10"),color:"#f093fb",timelineId:"develop_line",stage:{id:2,index:1}},{title:"()",description:"",startTime:new Date("2026-03-10"),color:"#4facfe",timelineId:"beta_line",stage:{id:2,index:2}},{title:"()",description:"",startTime:new Date("2026-03-15"),color:"#667eea",timelineId:"start_line",stage:{id:3,index:0}},{title:"()",description:"",startTime:new Date("2026-03-21"),color:"#f093fb",timelineId:"develop_line",stage:{id:3,index:1}},{title:"()",description:"",startTime:new Date("2026-04-21"),color:"#4facfe",timelineId:"beta_line",stage:{id:3,index:2}}])}function Wf(){if(ct.getTimelines().length===0){Ot("","warning");return}const t=Math.floor(Math.random()*ct.getTimelines().length),e=ct.getTimelines()[t],i=new Date("2026-01-01"),s=new Date("2026-12-31"),l=new Date(i.getTime()+Math.random()*(s.getTime()-i.getTime())),h=ct.addEvent({title:` ${Math.floor(Math.random()*100)}`,description:"",startTime:l,color:e.color},e.id);Ot(` "${e.name}" : ${h?.title}`,"point")}function Xf(){if(ct.getTimelines().length===0){Ot("","warning");return}const t=Math.floor(Math.random()*ct.getTimelines().length),e=ct.getTimelines()[t],i=new Date("2026-01-01"),s=new Date("2026-12-31"),l=new Date(i.getTime()+Math.random()*(s.getTime()-i.getTime())),h=new Date(l.getTime()+Math.random()*30*24*60*60*1e3),f=ct.addEvent({title:` ${Math.floor(Math.random()*100)}`,description:"",startTime:l,endTime:h,color:e.color},e.id);Ot(` "${e.name}" : ${f?.title}`,"range")}function Vf(){const t=["#667eea","#f093fb","#4facfe","#43e97b","#fa709a","#fee140"],e=["","","","","",""],i=t[Math.floor(Math.random()*t.length)],s=e[Math.floor(Math.random()*e.length)]+"",l=ct.addTimeline(s,i);Ot(`: ${l.name}`,"system")}function qf(){if(ct.getTimelines().length>0){const t=ct.getTimelines()[ct.getTimelines().length-1];ct.removeTimeline(t.id),Ot(`: ${t.name}`,"system")}else Ot("","warning")}function Zf(){ct.resetView();const t=document.getElementById("zoomSlider");t.value="1";const e=document.getElementById("zoomValue");e.textContent="1.0x",Ot("","system")}function Jf(){const t=ct.exportDataString(),e=new Blob([t],{type:"application/json"}),i=URL.createObjectURL(e),s=document.createElement("a");s.href=i,s.download="projectTimeline-data.json",s.click(),URL.revokeObjectURL(i),Ot("","system")}function Kf(){const t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=e=>{const i=e.target.files[0];if(i){const s=new FileReader;s.onload=l=>{const h=l.target.result;ct.importDataString(h)?Ot("","system"):Ot("","error")},s.readAsText(i)}},t.click()}function Qf(){qt.isStageLineVisible?qt.hideStageLines():qt.showStageLines()}function tp(t){ct.changeLocale(t),qt.changeLocale(t)}function ep(t){const e=document.getElementById("project-zoom-slider");e.style.display=t?"block":"none"}function Ot(t,e="info"){const i=new Date().toLocaleTimeString("zh-CN"),s={message:t,type:e,timestamp:i};Be.unshift(s),Be.length>20&&(Be=Be.slice(0,20)),np()}function np(){const t=document.getElementById("eventLog");t.innerHTML=Be.map(e=>`
    <div class="event-item ${e.type==="range"?"range":""}">
        <strong>[${e.timestamp}]</strong> ${e.message}
    </div>
`).join("")}document.addEventListener("DOMContentLoaded",Gf);window.addRandomEvent=Wf;window.addRandomRangeEvent=Xf;window.addTimeline=Vf;window.removeTimeline=qf;window.resetView=Zf;window.exportData=Jf;window.importData=Kf;window.toggleStageLines=Qf;window.changeLocale=tp;window.toggleZoomSlider=ep;
